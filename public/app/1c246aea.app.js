"use strict";function dt_non_norm(a,b,c,d){return 1/c*jStat.studentt.pdf((a-b)/c,d)}function paired_t_test(a,b){var c=a.length,d=b.length;mean1=jStat.mean(a),mean2=jStat.mean(b);var e=Math.pow(jStat.stdev(a,!0),2),f=Math.pow(jStat.stdev(b,!0),2),g=Math.sqrt(((c-1)*e+(d-1)*f)/(c+d-2)),h=(mean1-mean2)/(g*Math.sqrt(1/c+1/d)),i=jStat.ttest(h,c+d-2+1);return[mean1-mean2,h,i]}function string_to_num_array(a){return a=a.replace(/[^-1234567890.]+$/,"").replace(/^[^-1234567890.]+/,""),jStat.map(a.split(/[^-1234567890.]+/),function(a){return parseFloat(a)})}function histogram_counts(a,b){for(var c=jStat.min(a),d=jStat.max(a),e=[],f=0;b>f;f++)e.push([c+f/b*(d-c)+(d-c)/b/2,0]);for(var f=0;f<a.length;f++)bin_i=Math.floor((a[f]-c)/(d-c)*b),bin_i>b-1&&(bin_i=b-1),bin_i<0&&(bin_i=0),e[bin_i][1]++;return e}function HDIofMCMC(a){a=a.sort(function(a,b){return a-b});for(var b=Math.floor(.95*a.length),c=[jStat.min(a),jStat.max(a)],d=0;d<a.length-b;d++){var e=a[d+b]-a[d];e<c[1]-c[0]&&(c=[a[d],a[d+b]])}return c}function perc_larger_and_smaller_than(a,b){return comps=jStat.map(b,function(b){return b>=a?1:0}),mean_larger=jStat.mean(comps),[1-mean_larger,mean_larger]}function chain_to_plot_data(a,b,c){null!=c&&(b=a.length/c),plot_data=[];for(var d=0;d<a[0].length;d++)plot_data.push([]);for(var d=0;d<a.length;d+=b)for(var e=Math.floor(d),f=a[e],g=0;g<f.length;g++)plot_data[g].push([e,f[g]]);return plot_data}function param_chain(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d][b]);return c}function amwg(a,b,c){function d(){null!=c?j.push(k.concat(c(k))):j.push(k);for(var a=0;g>a;a++){var d=jStat.normal.sample(k[a],Math.exp(l[a])),e=k.slice();e[a]=d;try{var f=Math.exp(b(e)-b(k))}catch(n){var f=0}f>Math.random()&&(m[a]++,k=e)}if(j.length%i==0){h++;for(var a=0;g>a;a++)m[a]/i>.44?l[a]+=Math.min(.01,1/Math.sqrt(h)):m[a]/i<.44&&(l[a]-=Math.min(.01,1/Math.sqrt(h))),m[a]=0}return k}function e(a){for(var b=0;a-1>b;b++)d();return d()}function f(a,b){return a>0?(n=!0,e(b),setTimeout(function(){f(a-b,b)},0)):void(n=!1)}var g=a.length,h=0,i=50,j=[],k=a,l=[];this.log_sd=l;for(var m=[],n=!1,o=0;g>o;o++)l[o]=0,m[o]=0;this.next_sample=d,this.get_chain=function(){return j},this.get_curr_state=function(){return k},this.burn=function(a){var b=j.slice();this.n_samples(a),j=b},this.n_samples=e,this.is_running_asynch=function(){return n},this.n_samples_asynch=f}function make_BEST_posterior_func(a,b){data=[a,b],mean_mu=jStat.mean(a.concat(b)),sd_mu=1e6*jStat.stdev(a.concat(b)),sigma_low=jStat.stdev(a.concat(b))/1e3,sigma_high=1e3*jStat.stdev(a.concat(b));var c=function(a){var b=[a[0],a[1]],c=[a[2],a[3]],d=a[4],e=0;e+=Math.log(jStat.exponential.pdf(d-1,1/29));for(var f=0;2>f;f++){e+=Math.log(jStat.uniform.pdf(c[f],sigma_low,sigma_high)),e+=Math.log(jStat.normal.pdf(b[f],mean_mu,sd_mu));for(var g=0;g<data[f].length;g++)e+=Math.log(dt_non_norm(data[f][g],b[f],c[f],d))}return e};return c}function plot_mcmc_chain(a,b,c){$.plot($("#"+a),[{data:b,label:c}],{shadowSize:0})}function plot_mcmc_hist(a,b,c,d,e){var f=histogram_counts(b,30),g=f[1][0]-f[0][0],h=jStat.mean(b),i=[[h,0]],j="Mean: "+h.toPrecision(3);if(c)var k=HDIofMCMC(b),l=[[k[0],0],[k[1],0]],m="95% HDI ("+k[0].toPrecision(3)+", "+k[1].toPrecision(3)+")";if(null!=d)var n=[[d,0],[d,1/0]],o=perc_larger_and_smaller_than(d,b),p=""+(100*o[0]).toPrecision(3)+"% < "+d+" < "+(100*o[1]).toPrecision(3)+"%";var q={font:{size:9},shadowSize:0,yaxis:{autoscaleMargin:.66}};null!=e&&(q.xaxis={min:e[0],max:e[1]}),c&&null==d?$.plot($("#"+a),[{data:f,bars:{show:!0,align:"center",barWidth:g}},[],{data:l,label:m,lines:{lineWidth:5}},{data:i,label:j,points:{show:!0}}],q):c||null==d?c&&null!=d?$.plot($("#"+a),[{data:f,bars:{show:!0,align:"center",barWidth:g}},{data:n,label:p,lines:{lineWidth:2}},{data:l,label:m,lines:{lineWidth:5}},{data:i,label:j,points:{show:!0}}],q):$.plot($("#"+a),[{data:f,bars:{show:!0,align:"center",barWidth:g}},{data:i,label:j,points:{show:!0}}],q):$.plot($("#"+a),[{data:f,bars:{show:!0,align:"center",barWidth:g}},{data:n,label:p,lines:{lineWidth:2}},{data:i,label:j,points:{show:!0}}],q)}function OAuth(a){if(!(this instanceof OAuth))return new OAuth(a);if(a||(a={}),!a.consumer)throw new Error("consumer option is required");switch(this.consumer=a.consumer,this.signature_method=a.signature_method||"HMAC-SHA1",this.nonce_length=a.nonce_length||32,this.version=a.version||"1.0",this.parameter_seperator=a.parameter_seperator||", ","undefined"==typeof a.last_ampersand?this.last_ampersand=!0:this.last_ampersand=a.last_ampersand,this.signature_method){case"HMAC-SHA1":this.hash=function(a,b){return CryptoJS.HmacSHA1(a,b).toString(CryptoJS.enc.Base64)};break;case"PLAINTEXT":this.hash=function(a,b){return b};break;case"RSA-SHA1":throw new Error("oauth-1.0a does not support this signature method right now. Coming Soon...");default:throw new Error("The OAuth 1.0a protocol defines three signature methods: HMAC-SHA1, RSA-SHA1, and PLAINTEXT only")}}angular.module("airedioApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap","firebase"]).config(["$routeProvider","$locationProvider",function(a,b){a.otherwise({redirectTo:"/"}),b.html5Mode(!0)}]);var jscolor={dir:"",bindClass:"color",binding:!0,preloading:!0,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){jscolor.binding&&jscolor.bind(),jscolor.preloading&&jscolor.preload()},getDir:function(){if(!jscolor.dir){var a=jscolor.detectDir();jscolor.dir=a!==!1?a:"jscolor/"}return jscolor.dir},detectDir:function(){for(var a=location.href,b=document.getElementsByTagName("base"),c=0;c<b.length;c+=1)b[c].href&&(a=b[c].href);for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c+=1)if(b[c].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(b[c].src)){var d=new jscolor.URI(b[c].src),e=d.toAbsolute(a);return e.path=e.path.replace(/[^\/]+$/,""),e.query=null,e.fragment=null,e.toString()}return!1},bind:function(){for(var a=new RegExp("(^|\\s)("+jscolor.bindClass+")(\\s*(\\{[^}]*\\})|\\s|$)","i"),b=document.getElementsByTagName("input"),c=0;c<b.length;c+=1)if(!jscolor.isColorAttrSupported||"color"!=b[c].type.toLowerCase()){var d;if(!b[c].color&&b[c].className&&(d=b[c].className.match(a))){var e={};if(d[4])try{e=new Function("return ("+d[4]+")")()}catch(f){}b[c].color=new jscolor.color(b[c],e)}}},preload:function(){for(var a in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(a)&&jscolor.loadImage(a)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(a){jscolor.imgRequire[a]=!0},loadImage:function(a){jscolor.imgLoaded[a]||(jscolor.imgLoaded[a]=new Image,jscolor.imgLoaded[a].src=jscolor.getDir()+a)},fetchElement:function(a){return"string"==typeof a?document.getElementById(a):a},addEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},fireEvent:function(a,b){if(a)if(document.createEvent){var c=document.createEvent("HTMLEvents");c.initEvent(b,!0,!0),a.dispatchEvent(c)}else if(document.createEventObject){var c=document.createEventObject();a.fireEvent("on"+b,c)}else a["on"+b]&&a["on"+b]()},getElementPos:function(a){var b=a,c=a,d=0,e=0;if(b.offsetParent)do d+=b.offsetLeft,e+=b.offsetTop;while(b=b.offsetParent);for(;(c=c.parentNode)&&"BODY"!==c.nodeName.toUpperCase();)d-=c.scrollLeft,e-=c.scrollTop;return[d,e]},getElementSize:function(a){return[a.offsetWidth,a.offsetHeight]},getRelMousePos:function(a){var b=0,c=0;return a||(a=window.event),"number"==typeof a.offsetX?(b=a.offsetX,c=a.offsetY):"number"==typeof a.layerX&&(b=a.layerX,c=a.layerY),{x:b,y:c}},getViewPos:function(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(a){function b(a){for(var b="";a;)if("../"===a.substr(0,3)||"./"===a.substr(0,2))a=a.replace(/^\.+/,"").substr(1);else if("/./"===a.substr(0,3)||"/."===a)a="/"+a.substr(3);else if("/../"===a.substr(0,4)||"/.."===a)a="/"+a.substr(4),b=b.replace(/\/?[^\/]*$/,"");else if("."===a||".."===a)a="";else{var c=a.match(/^\/?[^\/]*/)[0];a=a.substr(c.length),b+=c}return b}this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(a){var b=a.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=b[3]?b[2]:null,this.authority=b[5]?b[6]:null,this.path=b[7],this.query=b[9]?b[10]:null,this.fragment=b[12]?b[13]:null,this},this.toString=function(){var a="";return null!==this.scheme&&(a=a+this.scheme+":"),null!==this.authority&&(a=a+"//"+this.authority),null!==this.path&&(a+=this.path),null!==this.query&&(a=a+"?"+this.query),null!==this.fragment&&(a=a+"#"+this.fragment),a},this.toAbsolute=function(a){var a=new jscolor.URI(a),c=this,d=new jscolor.URI;return null===a.scheme?!1:(null!==c.scheme&&c.scheme.toLowerCase()===a.scheme.toLowerCase()&&(c.scheme=null),null!==c.scheme?(d.scheme=c.scheme,d.authority=c.authority,d.path=b(c.path),d.query=c.query):(null!==c.authority?(d.authority=c.authority,d.path=b(c.path),d.query=c.query):(""===c.path?(d.path=a.path,null!==c.query?d.query=c.query:d.query=a.query):("/"===c.path.substr(0,1)?d.path=b(c.path):(null!==a.authority&&""===a.path?d.path="/"+c.path:d.path=a.path.replace(/[^\/]+$/,"")+c.path,d.path=b(d.path)),d.query=c.query),d.authority=a.authority),d.scheme=a.scheme),d.fragment=c.fragment,d)},a&&this.parse(a)},color:function(a,b){function c(a,b,c){var d=Math.min(Math.min(a,b),c),e=Math.max(Math.max(a,b),c),f=e-d;if(0===f)return[null,0,e];var g=a===d?3+(c-b)/f:b===d?5+(a-c)/f:1+(b-a)/f;return[6===g?0:g,f/e,e]}function d(a,b,c){if(null===a)return[c,c,c];var d=Math.floor(a),e=d%2?a-d:1-(a-d),f=c*(1-b),g=c*(1-b*e);switch(d){case 6:case 0:return[c,g,f];case 1:return[g,c,f];case 2:return[f,c,g];case 3:return[f,g,c];case 4:return[g,f,c];case 5:return[c,f,g]}}function e(){delete jscolor.picker.owner,document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}function f(b,c){function d(){var a=q.pickerInsetColor.split(/\s+/),b=a.length<2?a[0]:a[1]+" "+a[0]+" "+a[0]+" "+a[1];k.btn.style.borderColor=b}if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(q.pickerCloseText)};for(var e=0,f=4;e<jscolor.images.sld[1];e+=f){var j=document.createElement("div");j.style.height=f+"px",j.style.fontSize="1px",j.style.lineHeight="0",jscolor.picker.sld.appendChild(j)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var k=jscolor.picker;if(k.box.onmouseup=k.box.onmouseout=function(){a.focus()},k.box.onmousedown=function(){s=!0},k.box.onmousemove=function(a){(v||w)&&(v&&m(a),w&&n(a),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),o())},"ontouchstart"in window){var l=function(a){var b={offsetX:a.touches[0].pageX-x.X,offsetY:a.touches[0].pageY-x.Y};(v||w)&&(v&&m(b),w&&n(b),o()),a.stopPropagation(),a.preventDefault()};k.box.removeEventListener("touchmove",l,!1),k.box.addEventListener("touchmove",l,!1)}k.padM.onmouseup=k.padM.onmouseout=function(){v&&(v=!1,jscolor.fireEvent(t,"change"))},k.padM.onmousedown=function(a){switch(r){case 0:0===q.hsv[2]&&q.fromHSV(null,null,1);break;case 1:0===q.hsv[1]&&q.fromHSV(null,1,null)}w=!1,v=!0,m(a),o()},"ontouchstart"in window&&k.padM.addEventListener("touchstart",function(a){x={X:a.target.offsetParent.offsetLeft,Y:a.target.offsetParent.offsetTop},this.onmousedown({offsetX:a.touches[0].pageX-x.X,offsetY:a.touches[0].pageY-x.Y})}),k.sldM.onmouseup=k.sldM.onmouseout=function(){w&&(w=!1,jscolor.fireEvent(t,"change"))},k.sldM.onmousedown=function(a){v=!1,w=!0,n(a),o()},"ontouchstart"in window&&k.sldM.addEventListener("touchstart",function(a){x={X:a.target.offsetParent.offsetLeft,Y:a.target.offsetParent.offsetTop},this.onmousedown({offsetX:a.touches[0].pageX-x.X,offsetY:a.touches[0].pageY-x.Y})});var p=g(q);k.box.style.width=p[0]+"px",k.box.style.height=p[1]+"px",k.boxB.style.position="absolute",k.boxB.style.clear="both",k.boxB.style.left=b+"px",k.boxB.style.top=c+"px",k.boxB.style.zIndex=q.pickerZIndex,k.boxB.style.border=q.pickerBorder+"px solid",k.boxB.style.borderColor=q.pickerBorderColor,k.boxB.style.background=q.pickerFaceColor,k.pad.style.width=jscolor.images.pad[0]+"px",k.pad.style.height=jscolor.images.pad[1]+"px",k.padB.style.position="absolute",k.padB.style.left=q.pickerFace+"px",k.padB.style.top=q.pickerFace+"px",k.padB.style.border=q.pickerInset+"px solid",k.padB.style.borderColor=q.pickerInsetColor,k.padM.style.position="absolute",k.padM.style.left="0",k.padM.style.top="0",k.padM.style.width=q.pickerFace+2*q.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",k.padM.style.height=k.box.style.height,k.padM.style.cursor="crosshair",k.sld.style.overflow="hidden",k.sld.style.width=jscolor.images.sld[0]+"px",k.sld.style.height=jscolor.images.sld[1]+"px",k.sldB.style.display=q.slider?"block":"none",k.sldB.style.position="absolute",k.sldB.style.right=q.pickerFace+"px",k.sldB.style.top=q.pickerFace+"px",k.sldB.style.border=q.pickerInset+"px solid",k.sldB.style.borderColor=q.pickerInsetColor,k.sldM.style.display=q.slider?"block":"none",k.sldM.style.position="absolute",k.sldM.style.right="0",k.sldM.style.top="0",k.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+q.pickerFace+2*q.pickerInset+"px",k.sldM.style.height=k.box.style.height;try{k.sldM.style.cursor="pointer"}catch(u){k.sldM.style.cursor="hand"}k.btn.style.display=q.pickerClosable?"block":"none",k.btn.style.position="absolute",k.btn.style.left=q.pickerFace+"px",k.btn.style.bottom=q.pickerFace+"px",k.btn.style.padding="0 15px",k.btn.style.height="18px",k.btn.style.border=q.pickerInset+"px solid",d(),k.btn.style.color=q.pickerButtonColor,k.btn.style.font="12px sans-serif",k.btn.style.textAlign="center";try{k.btn.style.cursor="pointer"}catch(u){k.btn.style.cursor="hand"}switch(k.btn.onmousedown=function(){q.hidePicker()},k.btnS.style.lineHeight=k.btn.style.height,r){case 0:var y="hs.png";break;case 1:var y="hv.png"}k.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')",k.padM.style.backgroundRepeat="no-repeat",k.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')",k.sldM.style.backgroundRepeat="no-repeat",k.pad.style.backgroundImage="url('"+jscolor.getDir()+y+"')",k.pad.style.backgroundRepeat="no-repeat",k.pad.style.backgroundPosition="0 0",h(),i(),jscolor.picker.owner=q,document.getElementsByTagName("body")[0].appendChild(k.boxB)}function g(a){var b=[2*a.pickerInset+2*a.pickerFace+jscolor.images.pad[0]+(a.slider?2*a.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),a.pickerClosable?4*a.pickerInset+3*a.pickerFace+jscolor.images.pad[1]+a.pickerButtonHeight:2*a.pickerInset+2*a.pickerFace+jscolor.images.pad[1]];return b}function h(){switch(r){case 0:var a=1;break;case 1:var a=2}var b=Math.round(q.hsv[0]/6*(jscolor.images.pad[0]-1)),c=Math.round((1-q.hsv[a])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=q.pickerFace+q.pickerInset+b-Math.floor(jscolor.images.cross[0]/2)+"px "+(q.pickerFace+q.pickerInset+c-Math.floor(jscolor.images.cross[1]/2))+"px";var e=jscolor.picker.sld.childNodes;switch(r){case 0:for(var f=d(q.hsv[0],q.hsv[1],1),g=0;g<e.length;g+=1)e[g].style.backgroundColor="rgb("+f[0]*(1-g/e.length)*100+"%,"+f[1]*(1-g/e.length)*100+"%,"+f[2]*(1-g/e.length)*100+"%)";break;case 1:var f,h,i=[q.hsv[2],0,0],g=Math.floor(q.hsv[0]),j=g%2?q.hsv[0]-g:1-(q.hsv[0]-g);switch(g){case 6:case 0:f=[0,1,2];break;case 1:f=[1,0,2];break;case 2:f=[2,0,1];break;case 3:f=[2,1,0];break;case 4:f=[1,2,0];break;case 5:f=[0,2,1]}for(var g=0;g<e.length;g+=1)h=1-1/(e.length-1)*g,i[1]=i[0]*(1-h*j),i[2]=i[0]*(1-h),e[g].style.backgroundColor="rgb("+100*i[f[0]]+"%,"+100*i[f[1]]+"%,"+100*i[f[2]]+"%)"}}function i(){switch(r){case 0:var a=2;break;case 1:var a=1}var b=Math.round((1-q.hsv[a])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(q.pickerFace+q.pickerInset+b-Math.floor(jscolor.images.arrow[1]/2))+"px"}function j(){return jscolor.picker&&jscolor.picker.owner===q}function k(){t===a&&q.importColor(),q.pickerOnfocus&&q.hidePicker()}function l(){t!==a&&q.importColor()}function m(a){var b=jscolor.getRelMousePos(a),c=b.x-q.pickerFace-q.pickerInset,d=b.y-q.pickerFace-q.pickerInset;switch(r){case 0:q.fromHSV(c*(6/(jscolor.images.pad[0]-1)),1-d/(jscolor.images.pad[1]-1),null,B);break;case 1:q.fromHSV(c*(6/(jscolor.images.pad[0]-1)),null,1-d/(jscolor.images.pad[1]-1),B)}}function n(a){var b=jscolor.getRelMousePos(a),c=b.y-q.pickerFace-q.pickerInset;switch(r){case 0:q.fromHSV(null,null,1-c/(jscolor.images.sld[1]-1),A);break;case 1:q.fromHSV(null,1-c/(jscolor.images.sld[1]-1),null,A)}}function o(){if(q.onImmediateChange){var a;a="string"==typeof q.onImmediateChange?new Function(q.onImmediateChange):q.onImmediateChange,a.call(q)}}this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=a,this.styleElement=a,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.minH=0,this.maxH=6,this.minS=0,this.maxS=1,this.minV=0,this.maxV=1,this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=10,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4;for(var p in b)b.hasOwnProperty(p)&&(this[p]=b[p]);this.hidePicker=function(){j()&&e()},this.showPicker=function(){if(!j()){var b,c,d,e=jscolor.getElementPos(a),h=jscolor.getElementSize(a),i=jscolor.getViewPos(),k=jscolor.getViewSize(),l=g(this);switch(this.pickerPosition.toLowerCase()){case"left":b=1,c=0,d=-1;break;case"right":b=1,c=0,d=1;break;case"top":b=0,c=1,d=-1;break;default:b=0,c=1,d=1}var m=(h[c]+l[c])/2;if(this.pickerSmartPosition)var n=[-i[b]+e[b]+l[b]>k[b]&&-i[b]+e[b]+h[b]/2>k[b]/2&&e[b]+h[b]-l[b]>=0?e[b]+h[b]-l[b]:e[b],-i[c]+e[c]+h[c]+l[c]-m+m*d>k[c]?-i[c]+e[c]+h[c]/2>k[c]/2&&e[c]+h[c]-m-m*d>=0?e[c]+h[c]-m-m*d:e[c]+h[c]-m+m*d:e[c]+h[c]-m+m*d>=0?e[c]+h[c]-m+m*d:e[c]+h[c]-m-m*d];else var n=[e[b],e[c]+h[c]-m+m*d];f(n[b],n[c])}},this.importColor=function(){t?this.adjust?!this.required&&/^\s*$/.test(t.value)?(t.value="",u.style.backgroundImage=u.jscStyle.backgroundImage,u.style.backgroundColor=u.jscStyle.backgroundColor,u.style.color=u.jscStyle.color,this.exportColor(y|z)):this.fromString(t.value)||this.exportColor():this.fromString(t.value,y)||(u.style.backgroundImage=u.jscStyle.backgroundImage,u.style.backgroundColor=u.jscStyle.backgroundColor,u.style.color=u.jscStyle.color,this.exportColor(y|z)):this.exportColor()},this.exportColor=function(a){if(!(a&y)&&t){var b=this.toString();this.caps&&(b=b.toUpperCase()),this.hash&&(b="#"+b),t.value=b}a&z||!u||(u.style.backgroundImage="none",u.style.backgroundColor="#"+this.toString(),u.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),a&A||!j()||h(),a&B||!j()||i()},this.fromHSV=function(a,b,c,e){null!==a&&(a=Math.max(0,this.minH,Math.min(6,this.maxH,a))),null!==b&&(b=Math.max(0,this.minS,Math.min(1,this.maxS,b))),null!==c&&(c=Math.max(0,this.minV,Math.min(1,this.maxV,c))),this.rgb=d(null===a?this.hsv[0]:this.hsv[0]=a,null===b?this.hsv[1]:this.hsv[1]=b,null===c?this.hsv[2]:this.hsv[2]=c),this.exportColor(e)},this.fromRGB=function(a,b,e,f){null!==a&&(a=Math.max(0,Math.min(1,a))),null!==b&&(b=Math.max(0,Math.min(1,b))),null!==e&&(e=Math.max(0,Math.min(1,e)));var g=c(null===a?this.rgb[0]:a,null===b?this.rgb[1]:b,null===e?this.rgb[2]:e);null!==g[0]&&(this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,g[0]))),0!==g[2]&&(this.hsv[1]=null===g[1]?null:Math.max(0,this.minS,Math.min(1,this.maxS,g[1]))),this.hsv[2]=null===g[2]?null:Math.max(0,this.minV,Math.min(1,this.maxV,g[2]));var h=d(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=h[0],this.rgb[1]=h[1],this.rgb[2]=h[2],this.exportColor(f)},this.fromString=function(a,b){var c=a.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return c?(6===c[1].length?this.fromRGB(parseInt(c[1].substr(0,2),16)/255,parseInt(c[1].substr(2,2),16)/255,parseInt(c[1].substr(4,2),16)/255,b):this.fromRGB(parseInt(c[1].charAt(0)+c[1].charAt(0),16)/255,parseInt(c[1].charAt(1)+c[1].charAt(1),16)/255,parseInt(c[1].charAt(2)+c[1].charAt(2),16)/255,b),!0):!1},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var q=this,r="hvs"===this.pickerMode.toLowerCase()?1:0,s=!1,t=jscolor.fetchElement(this.valueElement),u=jscolor.fetchElement(this.styleElement),v=!1,w=!1,x={},y=1,z=2,A=4,B=8;jscolor.isColorAttrSupported=!1;var C=document.createElement("input");if(C.setAttribute&&(C.setAttribute("type","color"),"color"==C.type.toLowerCase()&&(jscolor.isColorAttrSupported=!0)),jscolor.addEvent(a,"focus",function(){q.pickerOnfocus&&q.showPicker()}),jscolor.addEvent(a,"blur",function(){s?s=!1:window.setTimeout(function(){s||k(),s=!1},0)}),t){var D=function(){q.fromString(t.value,y),o()};jscolor.addEvent(t,"keyup",D),jscolor.addEvent(t,"input",D),jscolor.addEvent(t,"blur",l),t.setAttribute("autocomplete","off")}switch(u&&(u.jscStyle={backgroundImage:u.style.backgroundImage,backgroundColor:u.style.backgroundColor,color:u.style.color}),r){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif"),jscolor.requireImage("arrow.gif"),this.importColor()}};jscolor.install();var app=angular.module("airedioApp");app.controller("MakeMapCtrl",["$scope","$timeout","$http","$q","$firebaseObject","$firebaseArray","$firebaseAuth","$sce","$window",function(a,b,c,d,e,f,g,h,i){function j(){var b=a.map.rect1?!0:!1,c=a.map.rect2?!0:!1,d=a.map.colorScheme;a.map={},a.map.onair=!0,a.map.colorScheme=d,a.map.maxdata=a.maxdata,a.map.mindata=a.mindata,a.map.firecode=D.code,a.map.mapCenter={lat:Y.getCenter().lat(),lng:Y.getCenter().lng()},a.map.zoom=Y.getZoom(),b&&(a.map.rect1=function(){var a=B.getBounds().getNorthEast(),b=B.getBounds().getSouthWest();return a={lat:a.lat(),lng:a.lng()},b={lat:b.lat(),lng:b.lng()},{ne:a,sw:b}}()),c&&(a.map.rect2=function(){var a=C.getBounds().getNorthEast(),b=C.getBounds().getSouthWest();return a={lat:a.lat(),lng:a.lng()},b={lat:b.lat(),lng:b.lng()},{ne:a,sw:b}}())}function k(a,b,c){return b}function l(a){return a.attr({cx:function(a){return a.coorx},cy:function(a){return a.coory},r:function(a){return String(K(a.main.data)+"px")}}).style({fill:function(a){return J(a.main.data)},position:"absolute",opacity:function(a){return k(a,.8,.8)}})}function m(){var b;a.mindata=H.top(H.length-1),a.maxdata=H.top(0),b=w.selectAll("circle").data(H.top(1/0)),b.enter().append("circle").call(l);var c=Y.getBounds();c.getNorthEast(),c.getSouthWest();b.exit().remove()}a.dataTab=!1,a.map={},a.dataname="";var n;a.map.colorScheme=["#00ff00","#ff0000"],a.colabData={},a.colabData.airedEmail="",a.colabData.matchEmail="",a.datum=[{text:"Twiiter Stream",code:"obamaStream"}];var o,p,q=void 0;a.demo=!1,a.kandyapi={},a.kandyapi.calluser="",a.showEndCall=!1,a.showCallAE=!1,a.videos=!1,a.showCall=!0;var r=new Firebase("https://aired.firebaseio.com");a.auth=g(r),a.user={email:"",password:""},a.registerUser={email:"",password:"",confirmPassword:""},a.loggedin=!1,a.login=function(){a.errors=[],a.num="logging in",a.auth.$authWithPassword({email:a.user.email,password:a.user.password}).then(function(a){})["catch"](function(b){a.errors.push(b.message)})},a.logout=function(){a.auth.$unauth(),i.location.reload()},a.modals={},a.modals.welcome=!0,a.modals.myData=!1,a.modals.addData=!1,a.modals.styleData=!1,a.modals.dataAnalysis=!1,a.modals.collaborate=!1,a.modals.account=!1,a.modals.welcomeCall=function(){a.modals.welcome=!a.modals.welcome},a.modals.myDataCall=function(){a.modals.myData=!a.modals.myData},a.modals.addDataCall=function(){a.modals.addData=!a.modals.addData},a.modals.styleDataCall=function(){a.modals.styleData=!a.modals.styleData},a.modals.dataAnalysisCall=function(){a.modals.dataAnalysis=!a.modals.dataAnalysis},a.modals.collaborateCall=function(){a.modals.collaborate=!a.modals.collaborate},a.modals.accountCall=function(){a.modals.account=!a.modals.account},a.auth.$onAuth(function(b){b?(a.datum=[],a.user.email=b.password.email,p=b.uid,a.loggedin=!0,q=new Firebase("https://aired.firebaseio.com/userdataref/"+p),a.datum=f(q),("simplelogin:12"==b.uid||"simplelogin:13"==b.uid)&&(a.demo=!0,o()),console.log("Logged in")):(console.log("Logged out"),a.loggedin=!1)}),a.createUser=function(){a.message=null,a.errors=[],a.auth.$createUser({email:a.registerUser.email,password:a.registerUser.password}).then(function(b){a.user.email=a.registerUser.email,a.user.password=a.registerUser.password,p=b.uid;var c=new Firebase("https://aired.firebaseio.com/userdataref/"+p);for(var d in a.datum)c.push({text:a.datum[d].text,code:a.datum[d].code});a.login()})["catch"](function(b){a.errors.push(b.message)})},a.shareDes=function(){if(a.outref){var b=a.colabData.airedEmail.indexOf("@");if(-1==b||0==b)return alert("Please enter a valid email");var c=a.colabData.airedEmail.substring(0,b);n=new Firebase("https://aired.firebaseio.com/onair/"+c+"/"+D.code),j(),n.set(a.map),n.onDisconnect().remove();var d=e(n);d.$bindTo(a,"map")}else alert("You need to select a data stream before linking maps")},a.findAir=function(){var b=a.colabData.matchEmail.indexOf("@");if(-1==b||0==b)return alert("Please enter a valid email");var c=a.colabData.matchEmail.substring(0,b);n=new Firebase("https://aired.firebaseio.com/onair/"+c);e(n);n.once("value",function(b){if(null==b.val())alert("Sorry, no one has shared a map with that email");else{n=new Firebase("https://aired.firebaseio.com/onair/"+c+"/"+b.val()[Object.keys(b.val())[0]].firecode);var d=e(n);d.$bindTo(a,"map"),d.$loaded().then(function(){D={code:a.map.firecode},a.changeData(null,D)})}})};var s,t,u,v,w,k,l,x,y,m,t,z,A,B,C,D,E=function(b){a.map.callfunc=b};z=crossfilter([]);var F,G,H;z.groupAll();s=null,a.firecode="ID",a.rectOffMess1=a.rectOffMess2="Click to Start Data Analysis";var I,B,C,J,K,L,M,N,O,P,Q,R=[],S=[];a.bayesbutt=!0;var T=d3.scale.linear().domain([0,1]).range(["red","black","black"]);a.showCharts=!1;var U,V;$("#diff_plots_div").hide();var W=0;a.changeData=function(b){D=arguments[1]?arguments[1]:{code:a.datum[b].code},A=new Firebase("https://aired.firebaseio.com/geotweets/"+D.code+"/data"),a.outref="https://aired.firebaseio.com/geotweets/"+D.code,A.once("value",function(a){});var c=f(A);c.$loaded().then(function(){a.tweetList=c}),a.selectedi=a.datum[b]},a.downlaodData=function(b){var c={code:a.datum[b].code};return"api/things/"+c.code},a.closeAlert=function(b){"undefined"==typeof q?(a.datum.splice(b,2),a.tweetList=[]):(a.datum.$remove(b),a.tweetList=[])},t=null,u=5,v=4e3;a.getCode=function(b){var c=arguments[1]?arguments[1]:65614599431864;"undefined"==typeof q?a.datum.push({text:b,code:c}):a.datum.$add({text:b,code:c}),a.dataname="",D={code:c},a.firecode=c,A=new Firebase("https://aired.firebaseio.com/geotweets/"+c+"/auth"),A.set({ready:"yes"}),A=new Firebase("https://aired.firebaseio.com/geotweets/"+c+"/data"),a.tweetList=f(A),0==W?(t.setMap(Y),W=293):m()},a.searchTweet=function(b,d,e){c.post("/max_id",{firebasecode:D}).success(function(g){d="undefined"!=typeof D?g.max_id:"Infinity",a.count="undefined"!=typeof b?b:a.count,a.meter=!0,e=0==typeof D?D.code:e;var h=Y.getCenter(),i=$("#searchwords").val().replace(/,/g," OR "),j=h.lat()+","+h.lng()+",50mi";c.post("/sentiTweets",{firebasecode:D,tweetOptions:{q:i,count:a.count,locale:"en",result_type:"recent",geocode:j,max_id:d}}).success(function(b){a.meter=!1,D=b,A=new Firebase("https://aired.firebaseio.com/geotweets/"+D.code+"/data"),a.tweetList=f(A)})})},a.mindata=61e7,a.maxdata=-92933980.6;var X;a.$watch("tweetList",function(b){b&&X!=b&&(X=b,z=crossfilter(b),F=z.dimension(function(a){return a.main.lng}),G=z.dimension(function(a){return a.main.lat}),H=z.dimension(function(b){return b.main.data<a.mindata&&(a.mindata=b.main.data),b.main.data>a.maxdata&&(a.maxdata=b.main.data),J=d3.scale.linear().domain([a.maxdata,a.mindata]).range(a.map.colorScheme),K=d3.scale.linear().domain([a.maxdata,a.mindata]).range([7,14]),b.main.data}),t.draw?t.draw():t.setMap(Y))},!0);var Y;a.datumtypes={},a.styledMap=new google.maps.StyledMapType(pale_dawn,{name:"Styled Map"});var Z=function(b){a.styledMap=new google.maps.StyledMapType(b,{name:"Styled Map"}),Y.mapTypes.set("map_style",a.styledMap)};a.subtle_grayscale=function(){Z(subtle_grayscale),E("subtle_grayscale")},a.blue_water=function(){Z(blue_water),E("blue_water")},a.avacado=function(){Z(avacado),E("avacado")},a.shades_of_grey=function(){Z(shades_of_grey),E("shades_of_grey")},a.pale_dawn=function(){Z(pale_dawn),E("pale_dawn")},a.apple_aaps_esque=function(){Z(apple_aaps_esque),E("apple_aaps_esque")},a.midnight_commander=function(){Z(midnight_commander),E("midnight_commander")},a.blue_essence=function(){Z(blue_essence),E("blue_essence")},a.retro=function(){Z(retro),E("retro")},a.paper=function(){Z(paper),E("paper")},a.unimposed=function(){Z(unimposed),E("unimposed")};initMap=function(){function c(c){b(function(){var b=B.getBounds().getNorthEast(),c=B.getBounds().getSouthWest();b={lat:b.lat(),lng:b.lng()},c={lat:c.lat(),lng:c.lng()},a.map.rect1={ne:b,sw:c},F.filterRange([c.lng,b.lng]),G.filterRange([c.lat,b.lat]),inner1=F.top(1/0),R=[],L=d3.mean(inner1,function(a){return R[R.length]=Number(a.main.data),Number(a.main.data)}),M=d3.variance(R),N=inner1.length;var d,e,f;d=Y.getBounds(),e=d.getNorthEast(),f=d.getSouthWest(),F.filterRange([f.lng(),e.lng()]),G.filterRange([f.lat(),e.lat()]),_()})}function d(c){b(function(){var b=C.getBounds().getNorthEast(),c=C.getBounds().getSouthWest();b={lat:b.lat(),lng:b.lng()},c={lat:c.lat(),lng:c.lng()},a.map.rect2={ne:b,sw:c},F.filterRange([c.lng,b.lng]),G.filterRange([c.lat,b.lat]),inner2=F.top(1/0),S=[],O=d3.mean(inner2,function(a){return S[S.length]=Number(a.main.data),Number(a.main.data)}),P=d3.variance(S),Q=inner2.length;var d,e,f;d=Y.getBounds(),e=d.getNorthEast(),f=d.getSouthWest(),F.filterRange([f.lng(),e.lng()]),G.filterRange([f.lat(),e.lat()]),_()})}$(function(){$(document).tooltip({items:"button",content:function(){var a=$(this);return"subtle_grayscale"===a.attr("id")?"<p>A nice, simple grayscale version of the map with color extremes that are never too harsh on the eyes. </p> <img class='mapim' src='https://az594329.vo.msecnd.net/assets/15-subtle-grayscale.png?v=20150319062423' />":"blue_water"===a.attr("id")?"<p>A simple map with blue water and roads/landscape in grayscale.</p> <p></p> <img class='mapim' src='https://az594329.vo.msecnd.net/assets/25-blue-water.png?v=20150319065438' />":"shades_of_grey"===a.attr("id")?"<p>A map with various shades of grey. Great for a website with a really dark theme.</p> <img class='mapim' src='https://az594329.vo.msecnd.net/assets/38-shades-of-grey.png?v=20150319065307' />":"pale_dawn"===a.attr("id")?"<p>Use of subdued colours results in an excellent style for sites with a pastel colour scheme.</p> <img class='mapim' src='https://az594329.vo.msecnd.net/assets/1-pale-dawn.png?v=20150319065645' />":"apple_aaps_esque"===a.attr("id")?"<p>A theme that largely resembles the Apple Maps theme, albeit somewhat flatter.</p> <img class='mapim' src='https://az594329.vo.msecnd.net/assets/42-apple-maps-esque.png?v=20150319070040' />":"midnight_commander"===a.attr("id")?"<p>A dark use of water and 'Tron' like colours results in a very unique style.</p> <img class='mapim' src='https://az594329.vo.msecnd.net/assets/2-midnight-commander.png?v=20150319065929' />":"blue_essence"===a.attr("id")?"<p>A light blue style that helps you focus on content on the map. Great if you use lots of pins and want to have highlighted transportation systems.</p> <img class='mapim' src='https://az594329.vo.msecnd.net/assets/61-blue-essence.png?v=20150319065841' />":"retro"===a.attr("id")?"<p>A retro style map from Google that has a ton of detail. Looks great zoomed in on a city with lots of features.</p> <img class='mapim' src='https://az594329.vo.msecnd.net/assets/18-retro.png?v=20150319065809' />":"paper"===a.attr("id")?"<p>A light theme with an excellent contrast between water, parks, and land.</p> <img class='mapim' src='https://az594329.vo.msecnd.net/assets/39-paper.png?v=20150319070056' />":"avacado"===a.attr("id")?"<p>A creamy green color palette.</p> <img class='mapim' src='https://az594329.vo.msecnd.net/assets/35-avocado-world.png?v=20150319071514' />":"unimposed"===a.attr("id")?"<p>This style is a neutral yet detailed view of the world. Good for anonymous, natural views of the globe without indications of humans.</p> <img class='mapim' src='https://az594329.vo.msecnd.net/assets/16-unimposed-topography.png?v=20150319095652' />":void 0;
}})}),Y=new google.maps.Map(d3.select("#map").node(),{zoom:10,center:new google.maps.LatLng(25.7877,-80.2241),disableDefaultUI:!0,mapTypeControlOptions:{mapTypeId:[google.maps.MapTypeId.ROADMAP,"map_style"]}}),I=new google.maps.LatLngBounds(new google.maps.LatLng(25.748781939750618,-80.21240599060059),new google.maps.LatLng(25.77087930591169,-80.18184391784666)),B=new google.maps.Rectangle({bounds:I,draggable:!0,editable:!0}),C=new google.maps.Rectangle({bounds:I,draggable:!0,editable:!0}),google.maps.event.addListener(C,"bounds_changed",d),google.maps.event.addListener(B,"bounds_changed",c),Y.mapTypes.set("map_style",a.styledMap),Y.setMapTypeId("map_style");var e=d3.select("#pac-input").node();Y.controls[google.maps.ControlPosition.TOP_LEFT].push(e);var f=new google.maps.places.SearchBox(e);google.maps.event.addListener(f,"places_changed",function(){var a=f.getPlaces(),b=new google.maps.LatLngBounds;if(0!=a.length)for(var c,d=0;c=a[d];d++)b.extend(c.geometry.location),Y.fitBounds(b),Y.setZoom(startzoom)}),a.map.mapCenter={lat:Y.getCenter().lat(),lng:Y.getCenter().lng()},google.maps.event.addListener(Y,"bounds_changed",function(){var c,d,e;c=this.getBounds(),d=c.getNorthEast(),e=c.getSouthWest(),b(function(){a.map.mapCenter={lat:Y.getCenter().lat(),lng:Y.getCenter().lng()},a.map.zoom=Y.getZoom()}),void 0!=F&&void 0!=G&&(F.filterRange([e.lng(),d.lng()]),G.filterRange([e.lat(),d.lat()])),f.setBounds(c)})},b(function(){a.runbayes=function(){function c(g){b(function(){a.percentDone=(k/(f/500)*100).toFixed(0)}),a.bayesbutt=!1,j.burn(500),k+=1,g>0?burn_timeout_id=setTimeout(function(){c(g-1)},0):(a.$apply(function(){a.showCharts=!0}),console.log("\n-- Finished Burn in phase --\n"),console.log("\n-- Started sampling phase --\n"),sample_timeout_id=j.n_samples_asynch(e,50),a.$apply(function(){a.bayesbutt=!0}),d())}function d(){var a=new Date,b=j.get_chain(),c=chain_to_plot_data(b,Math.ceil(e/1e3));plot_mcmc_chain("group_diff_plot",c[5],"samples"),plot_mcmc_hist("group_diff_hist",param_chain(b,5),!0,0);var f=new Date-a;j.is_running_asynch()&&(plot_timeout_id=setTimeout(function(){d()},2*f))}if(n&&"runbayes"!=a.map.callfunc)E("runbayes");else{a.dataTab=!0;var e=2e4,f=2e4,g=make_BEST_posterior_func(R,S),h=function(a){var b=a[0]-a[1],c=a[2]-a[3],d=(a[0]-a[1])/Math.sqrt((Math.pow(a[2],2)+Math.pow(a[3],2))/2),e=Math.log(a[4])/Math.LN10;return[b,c,e,d]},i=[jStat.mean(R),jStat.mean(S),jStat.stdev(R),jStat.stdev(S),5],j=new amwg(i,g,h),k=0;c(Math.ceil(f/500))}}});var _=function(){var b=jStat.ttest((L-O)/Math.sqrt(M/N+P/Q),N+Q,2);isNaN(b)||void 0===b||(B.setOptions({fillColor:T(b)}),C.setOptions({fillColor:T(b)}),a.$apply(function(){a.p_val="Two-Tailed P-value: "+b.toFixed(5)}))};a.$watch("map.colorScheme",function(){w&&(J=d3.scale.linear().domain([a.mindata,a.maxdata]).range(a.map.colorScheme),w.selectAll("circle").call(l))},!0),x=function(a){return a.style({opacity:0})},y=function(a){return a.style({opacity:function(a){return k(a,1,1)}})},t=new google.maps.OverlayView,t.onAdd=function(){return layer=d3.select(this.getPanes().overlayLayer).append("div").attr("class","stationOverlay"),svg=layer.append("svg"),w=svg.append("g").attr({"class":"class",gPrints:"gPrints"}),svg.attr({width:2*v,height:2*v}).style({position:"absolute",top:-1*v+"px",left:-1*v+"px"}),t.draw=function(){var a=null,b=Y.getBounds();U=b.getNorthEast(),V=b.getSouthWest(),F.filterAll(),G.filterAll(),a=H.top(1/0);var c,d;s=this.getProjection(),c=function(a){var b,c;return b=new google.maps.LatLng(a[0],a[1]),c=s.fromLatLngToDivPixel(b),[c.x+v,c.y+v]},a.filter(function(a){var b;return b=c([a.main.lat,a.main.lng]),a.coorx=b[0],a.coory=b[1],!0}),d=w.selectAll("circle").data(a),d.enter().append("circle"),d.call(l);var e=Y.getBounds(),f=e.getNorthEast(),g=e.getSouthWest();return F.filterRange([g.lng(),f.lng()]),G.filterRange([g.lat(),f.lat()]),d.exit().remove()}};var aa=function(){B.setMap(null)},ba=function(){I=new google.maps.LatLngBounds(t.getProjection().fromContainerPixelToLatLng(new google.maps.Point(684,412.9999999998836)),t.getProjection().fromContainerPixelToLatLng(new google.maps.Point(747,345.9999999999418))),B.setOptions({bounds:I}),B.setMap(Y)},ca=function(){C.setMap(null)},da=function(){I=new google.maps.LatLngBounds(t.getProjection().fromContainerPixelToLatLng(new google.maps.Point(684,412.9999999998836)),t.getProjection().fromContainerPixelToLatLng(new google.maps.Point(747,345.9999999999418))),C.setOptions({bounds:I}),C.setMap(Y)};a.addRect=function(b){function c(){"undefined"!=typeof a.tweetList?1==b?"Remove"!=a.rectOffMess1?(ba(),a.rectOffMess1="Remove"):(a.rectOffMess1="Click to Start Data Analysis",aa()):"Remove"!=a.rectOffMess2?(da(),a.rectOffMess2="Remove"):(a.rectOffMess2="Click to Start Data Analysis",ca()):alert("You need to add data to before you can start analysis!")}var d="addRect,"+b;n&&a.map.callfunc!=d?E(d):c()},o=function(){function b(b){l[0].pause(),a.videos=!0}function c(){KandyAPI.Phone.updatePresence(0)}function d(){alert("Login Failed")}function e(b){a.callId=b.getId(),a.map[a.user.email]=b.localStreamURL,l[0].play(),a.showEndCall=!0,a.showCallAE=!1}function f(){l[0].pause(),alert("Call initiate Failed.")}function g(b){l[0].pause(),a.endCall()}function i(b,c){alert("You have an incoming call!/nClick the Collaborate tab to answer"),k[0].play(),a.callId=b.getId(),a.callob=b,a.$apply(function(){a.showCallAE=!0,a.callId=b.getId()}),c?a.calling="Anonymous Calling":a.calling=b.callerName+" Calling!"}function j(b){a.callId=b.getId(),a.showCall=a.showCallAE=!1,l[0].pause(),k[0].pause(),KandyAPI.Phone.startCallVideo(a.callId,function(){a.$apply(function(){a.trustSrc=function(a){return h.trustAsResourceUrl(a)},a.src=scope.map["user1@aired.io"]})},function(){})}KandyAPI.Phone.setup({listeners:{loginsuccess:c,loginfailed:d,callinitiated:e,callinitiatefailed:f,oncall:b,callended:g,callincoming:i,callanswered:j,presencenotification:function(a,b,c,d){}}}),a.makecall=function(){a.showCall=!1;var b=a.kandyapi.calluser+"@ceseale3.gmail.com";KandyAPI.Phone.makeCall(b,!0),a.videos=!0};var k=$("<audio>",{loop:"loop",id:"ring-in"}),l=$("<audio>",{loop:"loop",id:"ring-out"}),m={ringIn:[{src:"https://kandy-portal.s3.amazonaws.com/public/sounds/ringin.mp3",type:"audio/mp3"},{src:"https://kandy-portal.s3.amazonaws.com/public/sounds/ringin.ogg",type:"audio/ogg"}],ringOut:[{src:"https://kandy-portal.s3.amazonaws.com/public/sounds/ringout.mp3",type:"audio/mp3"},{src:"https://kandy-portal.s3.amazonaws.com/public/sounds/ringout.ogg",type:"audio/ogg"}]};m.ringIn.forEach(function(a){var b=$("<source>").attr("src",a.src);k.append(b)}),m.ringOut.forEach(function(a){var b=$("<source>").attr("src",a.src);l.append(b)}),a.endCall=function(){KandyAPI.Phone.endCall(a.callId),a.showEndCall=!1,a.showCallAE=!1,a.videos=!1,a.showCall=!0};var n;a.answerCall=function(){l[0].pause(),k[0].pause(),a.showCallAE=!1,a.showCall=a.showCallAE=!1,KandyAPI.Phone.answerCall(a.callId,!0)},a.rejectCall=function(){l[0].pause(),k[0].pause(),a.showCallAE=!1,KandyAPI.Phone.rejectCall(a.callId)},function(){if("user1@aired.io"==a.user.email){n="user1";var b="DAK3e8ebe179640472ebe2dffd268a53a12",c="kandydemo00";KandyAPI.Phone.login(b,n,c)}else{n="user2";var b="DAK3e8ebe179640472ebe2dffd268a53a12",c="kandydemo00";KandyAPI.Phone.login(b,n,c)}}()};var ea;$(document).ready(function(){initMap(),a.$watch("map",function(){if(n){if(ea!=a.map.callfunc)if(ea=a.map.callfunc,-1!=a.map.callfunc.indexOf(",")){var b=a.map.callfunc.split(",");a[b[0]](b[1])}else a[a.map.callfunc]();Y.setZoom(a.map.zoom),Y.setCenter(new google.maps.LatLng(a.map.mapCenter.lat,a.map.mapCenter.lng)),a.map.rect1?B.getMap()?B.setBounds(new google.maps.LatLngBounds(new google.maps.LatLng(a.map.rect1.sw.lat,a.map.rect1.sw.lng),new google.maps.LatLng(a.map.rect1.ne.lat,a.map.rect1.ne.lng))):(B.setOptions({bounds:new google.maps.LatLngBounds(new google.maps.LatLng(a.map.rect1.sw.lat,a.map.rect1.sw.lng),new google.maps.LatLng(a.map.rect1.ne.lat,a.map.rect1.ne.lng))}),B.setMap(Y)):aa(),a.map.rect2?C.getMap()?C.setBounds(new google.maps.LatLngBounds(new google.maps.LatLng(a.map.rect2.sw.lat,a.map.rect2.sw.lng),new google.maps.LatLng(a.map.rect2.ne.lat,a.map.rect2.ne.lng))):(C.setOptions({bounds:new google.maps.LatLngBounds(new google.maps.LatLng(a.map.rect2.sw.lat,a.map.rect2.sw.lng),new google.maps.LatLng(a.map.rect2.ne.lat,a.map.rect2.ne.lng))}),C.setMap(Y)):ca()}},!0)})}]),angular.module("airedioApp").config(["$routeProvider",function(a){a.when("/",{templateUrl:" app/mapmaker/main.html",controller:"MakeMapCtrl"})}]),angular.module("firebase.config",[]).constant("FBURL","https://sizzling-fire-3750.firebaseio.com").constant("SIMPLE_LOGIN_PROVIDERS",["password"]).constant("loginRedirectPath","/login"),angular.module("firebase.utils",["firebase","firebase.config"]).factory("fbutil",["$window","FBURL","$firebase",function(a,b,c){function d(a){for(var b=0;b<a.length;b++)if(angular.isArray(a[b]))a[b]=d(a[b]);else if("string"!=typeof a[b])throw new Error("Argument "+b+" to firebaseRef is not a string: "+a[b]);return a.join("/")}function e(c){var e=new a.Firebase(b),f=Array.prototype.slice.call(arguments);return f.length&&(e=e.child(d(f))),e}function f(a,b){var d=e(a);return b=angular.extend({},b),angular.forEach(["limitToFirst","limitToLast","orderByKey","orderByChild","orderByPriority","startAt","endAt"],function(a){if(b.hasOwnProperty(a)){var c=b[a];d=d[a].apply(d,angular.isArray(c)?c:[c]),delete b[a]}}),c(d,b)}return{syncObject:function(a,b){return f.apply(null,arguments).$asObject()},syncArray:function(a,b){return f.apply(null,arguments).$asArray()},ref:e}}]),function(){angular.module("simpleLogin",["firebase","firebase.utils","firebase.config"]).factory("authRequired",["simpleLogin","$q",function(a,b){return function(){return a.auth.$requireAuth().then(function(a){return a?a:b.reject({authRequired:!0})})}}]).factory("simpleLogin",["$firebaseAuth","fbutil","$q","$rootScope","createProfile",function(a,b,c,d,e){function f(){i.initialized=!0,i.user=g.$getAuth()||null,angular.forEach(h,function(a){a(i.user)})}var g=a(b.ref()),h=[],i={auth:g,user:null,initialized:!1,getUser:function(){return g.$getAuth()},login:function(a,b){return g.$authWithOAuthPopup(a,b)},anonymousLogin:function(a){return g.$authAnonymously(a)},passwordLogin:function(a,b){return g.$authWithPassword(a,b)},logout:function(){g.$unauth()},createAccount:function(a,b,c){return g.$createUser({email:a,password:b}).then(function(){return i.passwordLogin({email:a,password:b},c)}).then(function(b){return e(b.uid,a).then(function(){return b})})},changePassword:function(a,b,c){return g.$changePassword({email:a,oldPassword:b,newPassword:c})},changeEmail:function(a,b,c){return g.$changeEmail({password:a,oldEmail:c,newEmail:b})},removeUser:function(a,b){return g.$removeUser({email:a,password:b})},watch:function(a,b){h.push(a),g.$waitForAuth(a);var c=function(){var b=h.indexOf(a);b>-1&&h.splice(b,1)};return b&&b.$on("$destroy",c),c}};return g.$onAuth(f),i}]).factory("createProfile",["fbutil","$q","$timeout",function(a,b,c){return function(d,e,f){function g(a){return h(a.substr(0,a.indexOf("@"))||"")}function h(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)}var i=a.ref("users",d),j=b.defer();return i.set({email:e,name:f||g(e)},function(a){c(function(){a?j.reject(a):j.resolve(i)})}),j.promise}}])}(),function(){function a(a,b){var c={version:"2.1.0-dev",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};c.chartRegistry=function(){function a(a){return a||(a=c.constants.DEFAULT_CHART_GROUP),b[a]||(b[a]=[]),a}var b={};return{has:function(a){for(var c in b)if(b[c].indexOf(a)>=0)return!0;return!1},register:function(c,d){d=a(d),b[d].push(c)},deregister:function(c,d){d=a(d);for(var e=0;e<b[d].length;e++)if(b[d][e].anchorName()===c.anchorName()){b[d].splice(e,1);break}},clear:function(a){a?delete b[a]:b={}},list:function(c){return c=a(c),b[c]}}}(),c.registerChart=function(a,b){c.chartRegistry.register(a,b)},c.deregisterChart=function(a,b){c.chartRegistry.deregister(a,b)},c.hasChart=function(a){return c.chartRegistry.has(a)},c.deregisterAllCharts=function(a){c.chartRegistry.clear(a)},c.filterAll=function(a){for(var b=c.chartRegistry.list(a),d=0;d<b.length;++d)b[d].filterAll()},c.refocusAll=function(a){for(var b=c.chartRegistry.list(a),d=0;d<b.length;++d)b[d].focus&&b[d].focus()},c.renderAll=function(a){for(var b=c.chartRegistry.list(a),d=0;d<b.length;++d)b[d].render();null!==c._renderlet&&c._renderlet(a)},c.redrawAll=function(a){for(var b=c.chartRegistry.list(a),d=0;d<b.length;++d)b[d].redraw();null!==c._renderlet&&c._renderlet(a)},c.disableTransitions=!1,c.transition=function(a,b,d){if(0>=b||void 0===b||c.disableTransitions)return a;var e=a.transition().duration(b);return"function"==typeof d&&d(e),e},c.units={},c.units.integers=function(a,b){return Math.abs(b-a)},c.units.ordinal=function(a,b,c){return c},c.units.fp={},c.units.fp.precision=function(a){var b=function(a,d){var e=Math.abs((d-a)/b.resolution);return c.utils.isNegligible(e-Math.floor(e))?Math.floor(e):Math.ceil(e)};return b.resolution=a,b},c.round={},c.round.floor=function(a){return Math.floor(a)},c.round.ceil=function(a){return Math.ceil(a)},c.round.round=function(a){return Math.round(a)},c.override=function(a,b,c){var d=a[b];a["_"+b]=d,a[b]=c},c.renderlet=function(a){return arguments.length?(c._renderlet=a,c):c._renderlet},c.instanceOfChart=function(a){return a instanceof Object&&a.__dcFlag__&&!0},c.errors={},c.errors.Exception=function(a){var b=a||"Unexpected internal error";this.message=b,this.toString=function(){return b}},c.errors.InvalidStateException=function(){c.errors.Exception.apply(this,arguments)},c.dateFormat=a.time.format("%m/%d/%Y"),c.printers={},c.printers.filters=function(a){for(var b="",d=0;d<a.length;++d)d>0&&(b+=", "),b+=c.printers.filter(a[d]);return b},c.printers.filter=function(a){var b="";return"undefined"!=typeof a&&null!==a&&(a instanceof Array?a.length>=2?b="["+c.utils.printSingleValue(a[0])+" -> "+c.utils.printSingleValue(a[1])+"]":a.length>=1&&(b=c.utils.printSingleValue(a[0])):b=c.utils.printSingleValue(a)),b},c.pluck=function(a,b){return b?function(c,d){return b.call(c,c[a],d)}:function(b){return b[a]}},c.utils={},c.utils.printSingleValue=function(a){var b=""+a;return a instanceof Date?b=c.dateFormat(a):"string"==typeof a?b=a:c.utils.isFloat(a)?b=c.utils.printSingleValue.fformat(a):c.utils.isInteger(a)&&(b=Math.round(a)),b},c.utils.printSingleValue.fformat=a.format(".2f"),c.utils.add=function(a,b){if("string"==typeof b&&(b=b.replace("%","")),a instanceof Date){"string"==typeof b&&(b=+b);var c=new Date;return c.setTime(a.getTime()),c.setDate(a.getDate()+b),c}if("string"==typeof b){var d=+b/100;return a>0?a*(1+d):a*(1-d)}return a+b},c.utils.subtract=function(a,b){if("string"==typeof b&&(b=b.replace("%","")),a instanceof Date){"string"==typeof b&&(b=+b);var c=new Date;return c.setTime(a.getTime()),c.setDate(a.getDate()-b),c}if("string"==typeof b){var d=+b/100;return 0>a?a*(1+d):a*(1-d)}return a-b},c.utils.isNumber=function(a){return a===+a},c.utils.isFloat=function(a){return a===+a&&a!==(0|a)},c.utils.isInteger=function(a){return a===+a&&a===(0|a)},c.utils.isNegligible=function(a){return!c.utils.isNumber(a)||a<c.constants.NEGLIGIBLE_NUMBER&&a>-c.constants.NEGLIGIBLE_NUMBER},c.utils.clamp=function(a,b,c){return b>a?b:a>c?c:a};var d=0;return c.utils.uniqueId=function(){return++d},c.utils.nameToId=function(a){return a.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},c.utils.appendOrSelect=function(a,b,c){c=c||b;var d=a.select(b);return d.empty()&&(d=a.append(c)),d},c.utils.safeNumber=function(a){return c.utils.isNumber(+a)?+a:0},c.logger={},c.logger.enableDebugLog=!1,c.logger.warn=function(a){return console&&(console.warn?console.warn(a):console.log&&console.log(a)),c.logger},c.logger.debug=function(a){return c.logger.enableDebugLog&&console&&(console.debug?console.debug(a):console.log&&console.log(a)),c.logger},c.logger.deprecate=function(a,b){function d(){return e||(c.logger.warn(b),e=!0),a.apply(this,arguments)}var e=!1;return d},c.events={current:null},c.events.trigger=function(a,b){return b?(c.events.current=a,void setTimeout(function(){a===c.events.current&&a()},b)):void a()},c.filters={},c.filters.RangedFilter=function(a,b){var c=new Array(a,b);return c.isFiltered=function(a){return a>=this[0]&&a<this[1]},c},c.filters.TwoDimensionalFilter=function(a){if(null===a)return null;var b=a;return b.isFiltered=function(a){return a.length&&a.length===b.length&&a[0]===b[0]&&a[1]===b[1]},b},c.filters.RangedTwoDimensionalFilter=function(a){if(null===a)return null;var b,c=a;return b=c[0]instanceof Array?[[Math.min(a[0][0],a[1][0]),Math.min(a[0][1],a[1][1])],[Math.max(a[0][0],a[1][0]),Math.max(a[0][1],a[1][1])]]:[[a[0],-(1/0)],[a[1],1/0]],c.isFiltered=function(a){var c,d;if(a instanceof Array){if(2!==a.length)return!1;c=a[0],d=a[1]}else c=a,d=b[0][1];return c>=b[0][0]&&c<b[1][0]&&d>=b[0][1]&&d<b[1][1]},c},c.baseMixin=function(d){function e(){return l=d.root().append("svg").attr("width",d.width()).attr("height",d.height())}function f(a){if(!d[a]||!d[a]())throw new c.errors.InvalidStateException("Mandatory attribute chart."+a+" is missing on chart[#"+d.anchorName()+"]")}function g(){if(d.dimension()&&d.dimension().filter){var a=H(d.dimension(),G);G=a?a:G}}d.__dcFlag__=c.utils.uniqueId();var h,i,j,k,l,m,n,o=200,p=function(a){var b=a&&a.getBoundingClientRect&&a.getBoundingClientRect().width;return b&&b>o?b:o},q=p,r=200,s=function(a){var b=a&&a.getBoundingClientRect&&a.getBoundingClientRect().height;return b&&b>r?b:r},t=s,u=c.pluck("key"),v=c.pluck("value"),w=c.pluck("key"),x=c.pluck("key"),y=!1,z=function(a){return d.keyAccessor()(a)+": "+d.valueAccessor()(a)},A=!0,B=750,C=c.printers.filters,D=["dimension","group"],E=c.constants.DEFAULT_CHART_GROUP,F=a.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet"),G=[],H=function(a,b){return a.filter(null),0===b.length?a.filter(null):a.filterFunction(function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.isFiltered&&d.isFiltered(a))return!0;if(a>=d&&d>=a)return!0}return!1}),b},I=function(a){return a.all()};d.width=function(b){return arguments.length?(q=a.functor(b||p),d):q(k.node())},d.height=function(b){return arguments.length?(t=a.functor(b||s),d):t(k.node())},d.minWidth=function(a){return arguments.length?(o=a,d):o},d.minHeight=function(a){return arguments.length?(r=a,d):r},d.dimension=function(a){return arguments.length?(h=a,d.expireCache(),d):h},d.data=function(b){return arguments.length?(I=a.functor(b),d.expireCache(),d):I.call(d,i)},d.group=function(a,b){return arguments.length?(i=a,d._groupName=b,d.expireCache(),d):i},d.ordering=function(a){return arguments.length?(x=a,m=b.quicksort.by(x),d.expireCache(),d):x},d._computeOrderedGroups=function(a){var c=a.slice(0);return c.length<=1?c:(m||(m=b.quicksort.by(x)),m(c,0,c.length))},d.filterAll=function(){return d.filter(null)},d.select=function(a){return k.select(a)},d.selectAll=function(a){return k?k.selectAll(a):null},d.anchor=function(b,e){return arguments.length?(c.instanceOfChart(b)?(j=b.anchor(),k=b.root()):(j=b,k=a.select(j),k.classed(c.constants.CHART_CLASS,!0),c.registerChart(d,e)),E=e,d):j},d.anchorName=function(){var a=d.anchor();return a&&a.id?a.id:a&&a.replace?a.replace("#",""):"dc-chart"+d.chartID()},d.root=function(a){return arguments.length?(k=a,d):k},d.svg=function(a){return arguments.length?(l=a,d):l},d.resetSvg=function(){return d.select("svg").remove(),e()},d.filterPrinter=function(a){return arguments.length?(C=a,d):C},d.turnOnControls=function(){return k&&(d.selectAll(".reset").style("display",null),d.selectAll(".filter").text(C(d.filters())).style("display",null)),d},d.turnOffControls=function(){return k&&(d.selectAll(".reset").style("display","none"),d.selectAll(".filter").style("display","none").text(d.filter())),d},d.transitionDuration=function(a){return arguments.length?(B=a,d):B},d._mandatoryAttributes=function(a){return arguments.length?(D=a,d):D},d.render=function(){F.preRender(d),D&&D.forEach(f);var a=d._doRender();return n&&n.render(),d._activateRenderlets("postRender"),a},d._activateRenderlets=function(a){d.transitionDuration()>0&&l?l.transition().duration(d.transitionDuration()).each("end",function(){F.renderlet(d),a&&F[a](d)}):(F.renderlet(d),a&&F[a](d))},d.redraw=function(){F.preRedraw(d);var a=d._doRedraw();return n&&n.render(),d._activateRenderlets("postRedraw"),a},d.redrawGroup=function(){c.redrawAll(d.chartGroup())},d.renderGroup=function(){c.renderAll(d.chartGroup())},d._invokeFilteredListener=function(a){void 0!==a&&F.filtered(d,a)},d._invokeZoomedListener=function(){F.zoomed(d)};var J=function(a,b){return null===b||"undefined"==typeof b?a.length>0:a.some(function(a){return a>=b&&b>=a})};d.hasFilterHandler=function(a){return arguments.length?(J=a,d):J},d.hasFilter=function(a){return J(G,a)};var K=function(a,b){for(var c=0;c<a.length;c++)if(a[c]<=b&&a[c]>=b){a.splice(c,1);break}return a};d.removeFilterHandler=function(a){return arguments.length?(K=a,d):K};var L=function(a,b){return a.push(b),a};d.addFilterHandler=function(a){return arguments.length?(L=a,d):L};var M=function(a){return[]};return d.resetFilterHandler=function(a){return arguments.length?(M=a,d):M},d.replaceFilter=function(a){G=[],d.filter(a)},d.filter=function(a){return arguments.length?(a instanceof Array&&a[0]instanceof Array&&!a.isFiltered?a[0].forEach(function(a){d.hasFilter(a)?K(G,a):L(G,a)}):null===a?G=M(G):d.hasFilter(a)?K(G,a):L(G,a),g(),d._invokeFilteredListener(a),null!==k&&d.hasFilter()?d.turnOnControls():d.turnOffControls(),d):G.length>0?G[0]:null},d.filters=function(){return G},d.highlightSelected=function(b){a.select(b).classed(c.constants.SELECTED_CLASS,!0),a.select(b).classed(c.constants.DESELECTED_CLASS,!1)},d.fadeDeselected=function(b){a.select(b).classed(c.constants.SELECTED_CLASS,!1),a.select(b).classed(c.constants.DESELECTED_CLASS,!0)},d.resetHighlight=function(b){a.select(b).classed(c.constants.SELECTED_CLASS,!1),a.select(b).classed(c.constants.DESELECTED_CLASS,!1)},d.onClick=function(a){var b=d.keyAccessor()(a);c.events.trigger(function(){d.filter(b),d.redrawGroup()})},d.filterHandler=function(a){return arguments.length?(H=a,d):H},d._doRender=function(){return d},d._doRedraw=function(){return d},d.legendables=function(){return[]},d.legendHighlight=function(){},d.legendReset=function(){},d.legendToggle=function(){},d.isLegendableHidden=function(){return!1},d.keyAccessor=function(a){return arguments.length?(u=a,d):u},d.valueAccessor=function(a){return arguments.length?(v=a,d):v},d.label=function(a){return arguments.length?(w=a,y=!0,d):w},d.renderLabel=function(a){return arguments.length?(y=a,d):y},d.title=function(a){return arguments.length?(z=a,d):z},d.renderTitle=function(a){return arguments.length?(A=a,d):A},d.renderlet=c.logger.deprecate(function(a){d.on("renderlet."+c.utils.uniqueId(),a)},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),d.chartGroup=function(a){return arguments.length?(E=a,d):E},d.expireCache=function(){return d},d.legend=function(a){return arguments.length?(n=a,n.parent(d),d):n},d.chartID=function(){return d.__dcFlag__},d.options=function(a){for(var b in a)"function"==typeof d[b]?d[b].call(d,a[b]):c.logger.debug("Not a valid option setter name: "+b);return d},d.on=function(a,b){return F.on(a,b),d},d},c.marginMixin=function(a){var b={top:10,right:50,bottom:30,left:30};return a.margins=function(c){return arguments.length?(b=c,a):b},a.effectiveWidth=function(){return a.width()-a.margins().left-a.margins().right},a.effectiveHeight=function(){return a.height()-a.margins().top-a.margins().bottom},a},c.colorMixin=function(b){var c=a.scale.category20c(),d=!0,e=function(a){return b.keyAccessor()(a)};return b.colors=function(d){return arguments.length?(c=d instanceof Array?a.scale.quantize().range(d):a.functor(d),b):c},b.ordinalColors=function(c){return b.colors(a.scale.ordinal().range(c))},b.linearColors=function(c){return b.colors(a.scale.linear().range(c).interpolate(a.interpolateHcl))},b.colorAccessor=function(a){return arguments.length?(e=a,d=!1,b):e},b.defaultColorAccessor=function(){return d},b.colorDomain=function(a){return arguments.length?(c.domain(a),b):c.domain()},b.calculateColorDomain=function(){var d=[a.min(b.data(),b.colorAccessor()),a.max(b.data(),b.colorAccessor())];return c.domain(d),b},b.getColor=function(a,b){return c(e.call(this,a,b))},b.colorCalculator=function(a){return arguments.length?(b.getColor=a,b):b.getColor},b},c.coordinateGridMixin=function(b){function d(){U=!0,W&&(b.x().domain(l(b.x().domain(),y)),F&&b.x().domain(l(b.x().domain(),F.x().domain())));var a=b.x().domain(),d=c.filters.RangedFilter(a[0],a[1]);b.replaceFilter(d),b.rescale(),b.redraw(),F&&!m(b.filter(),F.filter())&&c.events.trigger(function(){F.replaceFilter(d),F.redraw()}),b._invokeZoomedListener(),c.events.trigger(function(){b.redrawGroup()},c.constants.EVENT_DELAY),U=!m(a,y)}function e(a){b.isOrdinal()?(b.elasticX()||0===x.domain().length)&&x.domain(b._ordinalXDomain()):b.elasticX()&&x.domain([b.xAxisMin(),b.xAxisMax()]);var c=x.domain();(!A||c.some(function(a,b){return a!==A[b]}))&&b.rescale(),A=c,b.isOrdinal()?x.rangeBands([0,b.xAxisLength()],ba,b._useOuterPadding()?aa:0):x.range([0,b.xAxisLength()]),H=H.scale(b.x()),f(a)}function f(a){var d=a.selectAll("g."+q);if(T){d.empty()&&(d=a.insert("g",":first-child").attr("class",o+" "+q).attr("transform","translate("+b.margins().left+","+b.margins().top+")"));var e=H.tickValues()?H.tickValues():"function"==typeof x.ticks?x.ticks(H.ticks()[0]):x.domain(),f=d.selectAll("line").data(e),g=f.enter().append("line").attr("x1",function(a){return x(a)}).attr("y1",b._xAxisY()-b.margins().top).attr("x2",function(a){return x(a)}).attr("y2",0).attr("opacity",0);c.transition(g,b.transitionDuration()).attr("opacity",1),c.transition(f,b.transitionDuration()).attr("x1",function(a){return x(a)}).attr("y1",b._xAxisY()-b.margins().top).attr("x2",function(a){return x(a)}).attr("y2",0),f.exit().remove()}else d.selectAll("line").remove()}function g(){return b._xAxisY()-b.margins().top}function h(){return b.anchorName().replace(/[ .#]/g,"-")+"-clip"}function i(){var a=c.utils.appendOrSelect(u,"defs"),d=h(),e=c.utils.appendOrSelect(a,"#"+d,"clipPath").attr("id",d),f=2*_;c.utils.appendOrSelect(e,"rect").attr("width",b.xAxisLength()+f).attr("height",b.yAxisHeight()+f).attr("transform","translate(-"+_+", -"+_+")")}function j(a){b.isOrdinal()&&(R=!1),e(b.g()),b._prepareYAxis(b.g()),b.plotData(),(b.elasticX()||U||a)&&b.renderXAxis(b.g()),(b.elasticY()||a)&&b.renderYAxis(b.g()),a?b.renderBrush(b.g()):b.redrawBrush(b.g())}function k(){$?b._enableMouseZoom():Z&&b._disableMouseZoom()}function l(b,c){var d=[];return d[0]=a.max([b[0],c[0]]),d[1]=a.min([b[1],c[1]]),d}function m(a,b){return a||b?a&&b?0===a.length&&0===b.length?!0:a[0].valueOf()===b[0].valueOf()&&a[1].valueOf()===b[1].valueOf()?!0:!1:!1:!0}function n(a){return a instanceof Array&&a.length>1}var o="grid-line",p="horizontal",q="vertical",r="y-axis-label",s="x-axis-label",t=12;b=c.colorMixin(c.marginMixin(c.baseMixin(b))),b.colors(a.scale.category10()),b._mandatoryAttributes().push("x");var u,v,w,x,y,z,A,B,C,D,E,F,G,H=a.svg.axis().orient("bottom"),I=c.units.integers,J=0,K=!1,L=0,M=a.svg.axis().orient("left"),N=0,O=!1,P=0,Q=a.svg.brush(),R=!0,S=!1,T=!1,U=!1,V=[1,1/0],W=!0,X=a.behavior.zoom().on("zoom",d),Y=a.behavior.zoom().on("zoom",null),Z=!1,$=!1,_=0,aa=.5,ba=0,ca=!1;return b.rescale=function(){E=void 0},b.rangeChart=function(a){return arguments.length?(F=a,F.focusChart(b),b):F},b.zoomScale=function(a){return arguments.length?(V=a,b):V},b.zoomOutRestrict=function(a){return arguments.length?(V[0]=a?1:0,W=a,b):W},b._generateG=function(a){return u=void 0===a?b.svg():a,v=u.append("g"),w=v.append("g").attr("class","chart-body").attr("transform","translate("+b.margins().left+", "+b.margins().top+")").attr("clip-path","url(#"+h()+")"),v},b.g=function(a){return arguments.length?(v=a,b):v},b.mouseZoomable=function(a){return arguments.length?($=a,b):$},b.chartBodyG=function(a){return arguments.length?(w=a,b):w},b.x=function(a){return arguments.length?(x=a,y=x.domain(),b):x},b.xOriginalDomain=function(){return y},b.xUnits=function(a){return arguments.length?(I=a,b):I},b.xAxis=function(a){return arguments.length?(H=a,b):H},b.elasticX=function(a){return arguments.length?(K=a,b):K},b.xAxisPadding=function(a){return arguments.length?(J=a,b):J},b.xUnitCount=function(){if(void 0===E){var a=b.xUnits()(b.x().domain()[0],b.x().domain()[1],b.x().domain());E=a instanceof Array?a.length:a}return E},b.useRightYAxis=function(a){return arguments.length?(ca=a,b):ca},b.isOrdinal=function(){return b.xUnits()===c.units.ordinal},b._useOuterPadding=function(){return!0},b._ordinalXDomain=function(){var a=b._computeOrderedGroups(b.data());return a.map(b.keyAccessor())},b.renderXAxis=function(a){var d=a.selectAll("g.x");d.empty()&&(d=a.append("g").attr("class","axis x").attr("transform","translate("+b.margins().left+","+b._xAxisY()+")"));var e=a.selectAll("text."+s);e.empty()&&b.xAxisLabel()&&(e=a.append("text").attr("transform","translate("+(b.margins().left+b.xAxisLength()/2)+","+(b.height()-L)+")").attr("class",s).attr("text-anchor","middle").text(b.xAxisLabel())),b.xAxisLabel()&&e.text()!==b.xAxisLabel()&&e.text(b.xAxisLabel()),c.transition(d,b.transitionDuration()).call(H)},b._xAxisY=function(){return b.height()-b.margins().bottom},b.xAxisLength=function(){return b.effectiveWidth()},b.xAxisLabel=function(a,c){return arguments.length?(z=a,b.margins().bottom-=L,L=void 0===c?t:c,b.margins().bottom+=L,b):z},b._prepareYAxis=function(c){if(void 0===B||b.elasticY()){B=a.scale.linear();var d=b.yAxisMin()||0,e=b.yAxisMax()||0;B.domain([d,e]).rangeRound([b.yAxisHeight(),0])}B.range([b.yAxisHeight(),0]),M=M.scale(B),ca&&M.orient("right"),b._renderHorizontalGridLinesForAxis(c,B,M)},b.renderYAxisLabel=function(a,c,d,e){e=e||P;var f=b.g().selectAll("text."+r+"."+a+"-label");if(f.empty()&&c){var g=b.margins().top+b.yAxisHeight()/2;f=b.g().append("text").attr("transform","translate("+e+","+g+"),rotate("+d+")").attr("class",r+" "+a+"-label").attr("text-anchor","middle").text(c)}c&&f.text()!==c&&f.text(c)},b.renderYAxisAt=function(a,d,e){var f=b.g().selectAll("g."+a);f.empty()&&(f=b.g().append("g").attr("class","axis "+a).attr("transform","translate("+e+","+b.margins().top+")")),c.transition(f,b.transitionDuration()).call(d)},b.renderYAxis=function(){var a=ca?b.width()-b.margins().right:b._yAxisX();b.renderYAxisAt("y",M,a);var c=ca?b.width()-P:P,d=ca?90:-90;b.renderYAxisLabel("y",b.yAxisLabel(),d,c)},b._renderHorizontalGridLinesForAxis=function(a,d,e){var f=a.selectAll("g."+p);if(S){var g=e.tickValues()?e.tickValues():d.ticks(e.ticks()[0]);f.empty()&&(f=a.insert("g",":first-child").attr("class",o+" "+p).attr("transform","translate("+b.margins().left+","+b.margins().top+")"));var h=f.selectAll("line").data(g),i=h.enter().append("line").attr("x1",1).attr("y1",function(a){return d(a)}).attr("x2",b.xAxisLength()).attr("y2",function(a){return d(a)}).attr("opacity",0);c.transition(i,b.transitionDuration()).attr("opacity",1),c.transition(h,b.transitionDuration()).attr("x1",1).attr("y1",function(a){return d(a)}).attr("x2",b.xAxisLength()).attr("y2",function(a){return d(a)}),h.exit().remove()}else f.selectAll("line").remove()},b._yAxisX=function(){return b.useRightYAxis()?b.width()-b.margins().right:b.margins().left},b.yAxisLabel=function(a,c){return arguments.length?(C=a,b.margins().left-=P,P=void 0===c?t:c,b.margins().left+=P,b):C},b.y=function(a){return arguments.length?(B=a,b):B},b.yAxis=function(a){return arguments.length?(M=a,b):M},b.elasticY=function(a){return arguments.length?(O=a,b):O},b.renderHorizontalGridLines=function(a){
return arguments.length?(S=a,b):S},b.renderVerticalGridLines=function(a){return arguments.length?(T=a,b):T},b.xAxisMin=function(){var d=a.min(b.data(),function(a){return b.keyAccessor()(a)});return c.utils.subtract(d,J)},b.xAxisMax=function(){var d=a.max(b.data(),function(a){return b.keyAccessor()(a)});return c.utils.add(d,J)},b.yAxisMin=function(){var d=a.min(b.data(),function(a){return b.valueAccessor()(a)});return c.utils.subtract(d,N)},b.yAxisMax=function(){var d=a.max(b.data(),function(a){return b.valueAccessor()(a)});return c.utils.add(d,N)},b.yAxisPadding=function(a){return arguments.length?(N=a,b):N},b.yAxisHeight=function(){return b.effectiveHeight()},b.round=function(a){return arguments.length?(D=a,b):D},b._rangeBandPadding=function(a){return arguments.length?(ba=a,b):ba},b._outerRangeBandPadding=function(a){return arguments.length?(aa=a,b):aa},c.override(b,"filter",function(a){return arguments.length?(b._filter(a),a?b.brush().extent(a):b.brush().clear(),b):b._filter()}),b.brush=function(a){return arguments.length?(Q=a,b):Q},b.renderBrush=function(a){if(R){Q.on("brush",b._brushing),Q.on("brushstart",b._disableMouseZoom),Q.on("brushend",k);var c=a.append("g").attr("class","brush").attr("transform","translate("+b.margins().left+","+b.margins().top+")").call(Q.x(b.x()));b.setBrushY(c),b.setHandlePaths(c),b.hasFilter()&&b.redrawBrush(a)}},b.setHandlePaths=function(a){a.selectAll(".resize").append("path").attr("d",b.resizeHandlePath)},b.setBrushY=function(a){a.selectAll("rect").attr("height",g())},b.extendBrush=function(){var a=Q.extent();return b.round()&&(a[0]=a.map(b.round())[0],a[1]=a.map(b.round())[1],v.select(".brush").call(Q.extent(a))),a},b.brushIsEmpty=function(a){return Q.empty()||!a||a[1]<=a[0]},b._brushing=function(){var a=b.extendBrush();if(b.redrawBrush(v),b.brushIsEmpty(a))c.events.trigger(function(){b.filter(null),b.redrawGroup()},c.constants.EVENT_DELAY);else{var d=c.filters.RangedFilter(a[0],a[1]);c.events.trigger(function(){b.replaceFilter(d),b.redrawGroup()},c.constants.EVENT_DELAY)}},b.redrawBrush=function(a){if(R){b.filter()&&b.brush().empty()&&b.brush().extent(b.filter());var c=a.select("g.brush");c.call(b.brush().x(b.x())),b.setBrushY(c)}b.fadeDeselectedArea()},b.fadeDeselectedArea=function(){},b.resizeHandlePath=function(a){var b=+("e"===a),c=b?1:-1,d=g()/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)},b.clipPadding=function(a){return arguments.length?(_=a,b):_},b._preprocessData=function(){},b._doRender=function(){return b.resetSvg(),b._preprocessData(),b._generateG(),i(),j(!0),k(),b},b._doRedraw=function(){return b._preprocessData(),j(!1),i(),b},b._enableMouseZoom=function(){Z=!0,X.x(b.x()).scaleExtent(V).size([b.width(),b.height()]).duration(b.transitionDuration()),b.root().call(X)},b._disableMouseZoom=function(){b.root().call(Y)},b.focus=function(a){n(a)?b.x().domain(a):b.x().domain(y),X.x(b.x()),d()},b.refocused=function(){return U},b.focusChart=function(a){return arguments.length?(G=a,b.on("filtered",function(a){a.filter()?m(a.filter(),G.filter())||c.events.trigger(function(){G.focus(a.filter())}):c.events.trigger(function(){G.x().domain(G.xOriginalDomain())})}),b):G},b.brushOn=function(a){return arguments.length?(R=a,b):R},b},c.stackMixin=function(b){function d(a,c){var d=a.accessor||b.valueAccessor();return a.name=String(a.name||c),a.values=a.group.all().map(function(c,e){return{x:b.keyAccessor()(c,e),y:a.hidden?null:d(c,e),data:c,layer:a.name,hidden:a.hidden}}),a.values=a.values.filter(e()),a.values}function e(){if(!b.x())return a.functor(!0);var c=b.x().domain();return b.isOrdinal()?function(){return!0}:b.elasticX()?function(){return!0}:function(a){return a.x>=c[0]&&a.x<=c[c.length-1]}}function f(a){var b=j.map(c.pluck("name")).indexOf(a);return j[b]}function g(){return b.data().reduce(function(a,b){return a.concat(b.values)},[])}function h(a){return!a.hidden}var i=a.layout.stack().values(d),j=[],k={},l=!1;return b.stack=function(a,c,d){if(!arguments.length)return j;arguments.length<=2&&(d=c);var e={group:a};return"string"==typeof c&&(e.name=c),"function"==typeof d&&(e.accessor=d),j.push(e),b},c.override(b,"group",function(a,c,d){return arguments.length?(j=[],k={},b.stack(a,c),d&&b.valueAccessor(d),b._group(a,c)):b._group()}),b.hidableStacks=function(a){return arguments.length?(l=a,b):l},b.hideStack=function(a){var c=f(a);return c&&(c.hidden=!0),b},b.showStack=function(a){var c=f(a);return c&&(c.hidden=!1),b},b.getValueAccessorByIndex=function(a){return j[a].accessor||b.valueAccessor()},b.yAxisMin=function(){var d=a.min(g(),function(a){return a.y+a.y0<a.y0?a.y+a.y0:a.y0});return c.utils.subtract(d,b.yAxisPadding())},b.yAxisMax=function(){var d=a.max(g(),function(a){return a.y+a.y0});return c.utils.add(d,b.yAxisPadding())},b.xAxisMin=function(){var d=a.min(g(),c.pluck("x"));return c.utils.subtract(d,b.xAxisPadding())},b.xAxisMax=function(){var d=a.max(g(),c.pluck("x"));return c.utils.add(d,b.xAxisPadding())},c.override(b,"title",function(a,c){return a?"function"==typeof a?b._title(a):a===b._groupName&&"function"==typeof c?b._title(c):"function"!=typeof c?k[a]||b._title():(k[a]=c,b):b._title()}),b.stackLayout=function(a){return arguments.length?(i=a,b):i},b.data(function(){var a=j.filter(h);return a.length?b.stackLayout()(a):[]}),b._ordinalXDomain=function(){return g().map(c.pluck("x"))},b.colorAccessor(function(a){var b=this.layer||this.name||a.name||a.layer;return b}),b.legendables=function(){return j.map(function(a,c){return{chart:b,name:a.name,hidden:a.hidden||!1,color:b.getColor.call(a,a.values,c)}})},b.isLegendableHidden=function(a){var b=f(a.name);return b?b.hidden:!1},b.legendToggle=function(a){l&&(b.isLegendableHidden(a)?b.showStack(a.name):b.hideStack(a.name),b.renderGroup())},b},c.capMixin=function(b){var d=1/0,e="Others",f=function(c){var d=a.sum(c,b.valueAccessor()),f=b.group().all(),g=a.sum(f,b.valueAccessor()),h=c.map(b.keyAccessor()),i=f.map(b.keyAccessor()),j=a.set(h),k=i.filter(function(a){return!j.has(a)});return g>d?c.concat([{others:k,key:e,value:g-d}]):c};return b.cappedKeyAccessor=function(a,c){return a.others?a.key:b.keyAccessor()(a,c)},b.cappedValueAccessor=function(a,c){return a.others?a.value:b.valueAccessor()(a,c)},b.data(function(a){if(d===1/0)return b._computeOrderedGroups(a.all());var c=a.top(d);return c=b._computeOrderedGroups(c),f?f(c):c}),b.cap=function(a){return arguments.length?(d=a,b):d},b.othersLabel=function(a){return arguments.length?(e=a,b):e},b.othersGrouper=function(a){return arguments.length?(f=a,b):f},c.override(b,"onClick",function(a){a.others&&b.filter([a.others]),b._onClick(a)}),b},c.bubbleMixin=function(b){var d=.3,e=10;b.BUBBLE_NODE_CLASS="node",b.BUBBLE_CLASS="bubble",b.MIN_RADIUS=10,b=c.colorMixin(b),b.renderLabel(!0),b.data(function(a){return a.top(1/0)});var f=a.scale.linear().domain([0,100]),g=function(a){return a.r};b.r=function(a){return arguments.length?(f=a,b):f},b.radiusValueAccessor=function(a){return arguments.length?(g=a,b):g},b.rMin=function(){var c=a.min(b.data(),function(a){return b.radiusValueAccessor()(a)});return c},b.rMax=function(){var c=a.max(b.data(),function(a){return b.radiusValueAccessor()(a)});return c},b.bubbleR=function(a){var c=b.radiusValueAccessor()(a),d=b.r()(c);return(isNaN(d)||0>=c)&&(d=0),d};var h=function(a){return b.label()(a)},i=function(a){return b.bubbleR(a)>e?1:0};b._doRenderLabel=function(a){if(b.renderLabel()){var d=a.select("text");d.empty()&&(d=a.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",b.onClick)),d.attr("opacity",0).text(h),c.transition(d,b.transitionDuration()).attr("opacity",i)}},b.doUpdateLabels=function(a){if(b.renderLabel()){var d=a.selectAll("text").text(h);c.transition(d,b.transitionDuration()).attr("opacity",i)}};var j=function(a){return b.title()(a)};return b._doRenderTitles=function(a){if(b.renderTitle()){var c=a.select("title");c.empty()&&a.append("title").text(j)}},b.doUpdateTitles=function(a){b.renderTitle()&&a.selectAll("title").text(j)},b.minRadiusWithLabel=function(a){return arguments.length?(e=a,b):e},b.maxBubbleRelativeSize=function(a){return arguments.length?(d=a,b):d},b.fadeDeselectedArea=function(){b.hasFilter()?b.selectAll("g."+b.BUBBLE_NODE_CLASS).each(function(a){b.isSelectedNode(a)?b.highlightSelected(this):b.fadeDeselected(this)}):b.selectAll("g."+b.BUBBLE_NODE_CLASS).each(function(){b.resetHighlight(this)})},b.isSelectedNode=function(a){return b.hasFilter(a.key)},b.onClick=function(a){var d=a.key;c.events.trigger(function(){b.filter(d),b.redrawGroup()})},b},c.pieChart=function(b,d){function e(){D=D?D:a.min([O.width(),O.height()])/2;var b,c=r(),d=t();if(a.sum(O.data(),O.valueAccessor())?(b=d(O.data()),E.classed(K,!1)):(b=d([{key:L,value:1,others:[L]}]),E.classed(K,!0)),E){var e=E.selectAll("g."+J).data(b);f(e,c,b),l(b,c),p(e),q()}}function f(a,b,c){var d=g(a);h(d,b),i(d),k(c,b)}function g(a){var b=a.enter().append("g").attr("class",function(a,b){return J+" _"+b});return b}function h(a,b){var d=a.append("path").attr("fill",y).on("click",z).attr("d",function(a,c){return A(a,c,b)});c.transition(d,O.transitionDuration(),function(a){a.attrTween("d",w)})}function i(a){O.renderTitle()&&a.append("title").text(function(a){return O.title()(a)})}function j(a,b){c.transition(a,O.transitionDuration()).attr("transform",function(a){return B(a,b)}).attr("text-anchor","middle").text(function(a){var b=a.data;return!v(b)&&!u(a)||s(a)?O.label()(a.data):""})}function k(a,b){if(O.renderLabel()){var c=E.selectAll("text."+J).data(a);c.exit().remove();var d=c.enter().append("text").attr("class",function(a,b){var c=J+" _"+b;return H&&(c+=" external"),c}).on("click",z);j(d,b)}}function l(a,b){m(a,b),n(a,b),o(a)}function m(a,b){var d=E.selectAll("g."+J).data(a).select("path").attr("d",function(a,c){return A(a,c,b)});c.transition(d,O.transitionDuration(),function(a){a.attrTween("d",w)}).attr("fill",y)}function n(a,b){if(O.renderLabel()){var c=E.selectAll("text."+J).data(a);j(c,b)}}function o(a){O.renderTitle()&&E.selectAll("g."+J).data(a).select("title").text(function(a){return O.title()(a.data)})}function p(a){a.exit().remove()}function q(){O.hasFilter()?O.selectAll("g."+J).each(function(a){s(a)?O.highlightSelected(this):O.fadeDeselected(this)}):O.selectAll("g."+J).each(function(){O.resetHighlight(this)})}function r(){return a.svg.arc().outerRadius(D).innerRadius(M)}function s(a){return O.hasFilter(O.cappedKeyAccessor(a.data))}function t(){return a.layout.pie().sort(null).value(O.cappedValueAccessor)}function u(a){var b=a.endAngle-a.startAngle;return isNaN(b)||N>b}function v(a){return 0===O.cappedValueAccessor(a)}function w(b){b.innerRadius=M;var c=this._current;x(c)&&(c={startAngle:0,endAngle:0});var d=a.interpolate(c,b);return this._current=d(0),function(a){return A(d(a),0,r())}}function x(a){return!a||isNaN(a.startAngle)||isNaN(a.endAngle)}function y(a,b){return O.getColor(a.data,b)}function z(a,b){E.attr("class")!==K&&O.onClick(a.data,b)}function A(a,b,c){var d=c(a,b);return d.indexOf("NaN")>=0&&(d="M0,0"),d}function B(b,c){var d;return d=H?a.svg.arc().outerRadius(D+H).innerRadius(D+H).centroid(b):c.centroid(b),isNaN(d[0])||isNaN(d[1])?"translate(0,0)":"translate("+d+")"}function C(b,c){O.selectAll("g.pie-slice").each(function(d){b.name===d.data.key&&a.select(this).classed("highlight",c)})}var D,E,F,G,H,I=.5,J="pie-slice",K="empty-chart",L="empty",M=0,N=I,O=c.capMixin(c.colorMixin(c.baseMixin({})));return O.colorAccessor(O.cappedKeyAccessor),O.title(function(a){return O.cappedKeyAccessor(a)+": "+O.cappedValueAccessor(a)}),O.slicesCap=O.cap,O.label(O.cappedKeyAccessor),O.renderLabel(!0),O.transitionDuration(350),O._doRender=function(){return O.resetSvg(),E=O.svg().append("g").attr("transform","translate("+O.cx()+","+O.cy()+")"),e(),O},O.innerRadius=function(a){return arguments.length?(M=a,O):M},O.radius=function(a){return arguments.length?(D=a,O):D},O.cx=function(a){return arguments.length?(F=a,O):F||O.width()/2},O.cy=function(a){return arguments.length?(G=a,O):G||O.height()/2},O._doRedraw=function(){return e(),O},O.minAngleForLabel=function(a){return arguments.length?(N=a,O):N},O.emptyTitle=function(a){return 0===arguments.length?L:(L=a,O)},O.externalLabels=function(a){return 0===arguments.length?H:(H=a?a:void 0,O)},O.legendables=function(){return O.data().map(function(a,b){var c={name:a.key,data:a.value,others:a.others,chart:O};return c.color=O.getColor(a,b),c})},O.legendHighlight=function(a){C(a,!0)},O.legendReset=function(a){C(a,!1)},O.legendToggle=function(a){O.onClick({key:a.name,others:a.others})},O.anchor(b,d)},c.barChart=function(b,d){function e(a){return c.utils.safeNumber(Math.abs(m.y()(a.y+a.y0)-m.y()(a.y0)))}function f(a,b,d){var f=a.selectAll("rect.bar").data(d.values,c.pluck("x")),g=f.enter().append("rect").attr("class","bar").attr("fill",c.pluck("data",m.getColor)).attr("y",m.yAxisHeight()).attr("height",0);m.renderTitle()&&g.append("title").text(c.pluck("data",m.title(d.name))),m.isOrdinal()&&f.on("click",h),c.transition(f,m.transitionDuration()).attr("x",function(a){var b=m.x()(a.x);return o&&(b-=j/2),m.isOrdinal()&&void 0!==n&&(b+=n/2),c.utils.safeNumber(b)}).attr("y",function(a){var b=m.y()(a.y+a.y0);return a.y<0&&(b-=e(a)),c.utils.safeNumber(b)}).attr("width",j).attr("height",function(a){return e(a)}).attr("fill",c.pluck("data",m.getColor)).select("title").text(c.pluck("data",m.title(d.name))),c.transition(f.exit(),m.transitionDuration()).attr("height",0).remove()}function g(){if(void 0===j){var a=m.xUnitCount();j=m.isOrdinal()&&void 0===n?Math.floor(m.x().rangeBand()):n?Math.floor((m.xAxisLength()-(a-1)*n)/a):Math.floor(m.xAxisLength()/(1+m.barPadding())/a),(j===1/0||isNaN(j)||k>j)&&(j=k)}}function h(a){m.onClick(a.data)}function i(b,c){return function(){var d=a.select(this),e=d.attr("fill")===b;return c?!e:e}}var j,k=1,l=2,m=c.stackMixin(c.coordinateGridMixin({})),n=l,o=!1,p=!1;return c.override(m,"rescale",function(){m._rescale(),j=void 0}),c.override(m,"render",function(){m.round()&&o&&!p&&c.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),m._render()}),m.plotData=function(){var b=m.chartBodyG().selectAll("g.stack").data(m.data());g(),b.enter().append("g").attr("class",function(a,b){return"stack _"+b}),b.each(function(b,c){var d=a.select(this);f(d,c,b)})},m.fadeDeselectedArea=function(){var a=m.chartBodyG().selectAll("rect.bar"),b=m.brush().extent();if(m.isOrdinal())m.hasFilter()?(a.classed(c.constants.SELECTED_CLASS,function(a){return m.hasFilter(a.x)}),a.classed(c.constants.DESELECTED_CLASS,function(a){return!m.hasFilter(a.x)})):(a.classed(c.constants.SELECTED_CLASS,!1),a.classed(c.constants.DESELECTED_CLASS,!1));else if(m.brushIsEmpty(b))a.classed(c.constants.DESELECTED_CLASS,!1);else{var d=b[0],e=b[1];a.classed(c.constants.DESELECTED_CLASS,function(a){return a.x<d||a.x>=e})}},m.centerBar=function(a){return arguments.length?(o=a,m):o},m.barPadding=function(a){return arguments.length?(m._rangeBandPadding(a),n=void 0,m):m._rangeBandPadding()},m._useOuterPadding=function(){return void 0===n},m.outerPadding=m._outerRangeBandPadding,m.gap=function(a){return arguments.length?(n=a,m):n},m.extendBrush=function(){var a=m.brush().extent();return!m.round()||o&&!p||(a[0]=a.map(m.round())[0],a[1]=a.map(m.round())[1],m.chartBodyG().select(".brush").call(m.brush().extent(a))),a},m.alwaysUseRounding=function(a){return arguments.length?(p=a,m):p},m.legendHighlight=function(a){m.isLegendableHidden(a)||m.g().selectAll("rect.bar").classed("highlight",i(a.color)).classed("fadeout",i(a.color,!0))},m.legendReset=function(){m.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},c.override(m,"xAxisMax",function(){var a=this._xAxisMax();if("resolution"in m.xUnits()){var b=m.xUnits().resolution;a+=b}return a}),m.anchor(b,d)},c.lineChart=function(b,d){function e(a,b){return z.getColor.call(a,a.values,b)}function f(b,d){var f=a.svg.line().x(function(a){return z.x()(a.x)}).y(function(a){return z.y()(a.y+a.y0)}).interpolate(F).tension(G);r&&f.defined(r);var g=b.append("path").attr("class","line").attr("stroke",e);s&&g.attr("stroke-dasharray",s),c.transition(d.select("path.line"),z.transitionDuration()).attr("stroke",e).attr("d",function(a){return h(f(a.values))})}function g(b,d){if(A){var f=a.svg.area().x(function(a){return z.x()(a.x)}).y(function(a){return z.y()(a.y+a.y0)}).y0(function(a){return z.y()(a.y0)}).interpolate(F).tension(G);r&&f.defined(r),b.append("path").attr("class","area").attr("fill",e).attr("d",function(a){return h(f(a.values))}),c.transition(d.select("path.area"),z.transitionDuration()).attr("fill",e).attr("d",function(a){return h(f(a.values))})}}function h(a){return!a||a.indexOf("NaN")>=0?"M0,0":a}function i(b,d){if(!z.brushOn()){var e=u+"-list",f=b.select("g."+e);f.empty()&&(f=b.append("g").attr("class",e)),d.each(function(b,d){var e=b.values;r&&(e=e.filter(r));var g=f.select("g."+u+"._"+d);g.empty()&&(g=f.append("g").attr("class",u+" _"+d)),j(g);var h=g.selectAll("circle."+v).data(e,c.pluck("x"));h.enter().append("circle").attr("class",v).attr("r",m()).style("fill-opacity",D).style("stroke-opacity",E).on("mousemove",function(){var b=a.select(this);k(b),l(b,g)}).on("mouseout",function(){var b=a.select(this);n(b),o(g)}),h.attr("cx",function(a){return c.utils.safeNumber(z.x()(a.x))}).attr("cy",function(a){return c.utils.safeNumber(z.y()(a.y+a.y0))}).attr("fill",z.getColor).call(p,b),h.exit().remove()})}}function j(a){var b=a.select("path."+w).empty()?a.append("path").attr("class",w):a.select("path."+w);b.style("display","none").attr("stroke-dasharray","5,5");var c=a.select("path."+x).empty()?a.append("path").attr("class",x):a.select("path."+x);c.style("display","none").attr("stroke-dasharray","5,5")}function k(a){return a.style("fill-opacity",.8),a.style("stroke-opacity",.8),a.attr("r",B),a}function l(a,b){var c=a.attr("cx"),d=a.attr("cy"),e=z._yAxisX()-z.margins().left,f="M"+e+" "+d+"L"+c+" "+d,g="M"+c+" "+z.yAxisHeight()+"L"+c+" "+d;b.select("path."+w).style("display","").attr("d",f),b.select("path."+x).style("display","").attr("d",g)}function m(){return C||B}function n(a){a.style("fill-opacity",D).style("stroke-opacity",E).attr("r",m())}function o(a){a.select("path."+w).style("display","none"),a.select("path."+x).style("display","none")}function p(a,b){z.renderTitle()&&(a.selectAll("title").remove(),a.append("title").text(c.pluck("data",z.title(b.name))))}function q(b,c,d){return function(){var e=a.select(this),f=e.attr("stroke")===b&&e.attr("stroke-dasharray")===(c instanceof Array?c.join(","):null)||e.attr("fill")===b;return d?!f:f}}var r,s,t=5,u="dc-tooltip",v="dot",w="yRef",x="xRef",y=1e-6,z=c.stackMixin(c.coordinateGridMixin({})),A=!1,B=t,C=null,D=y,E=y,F="linear",G=.7;return z.transitionDuration(500),z._rangeBandPadding(1),z.plotData=function(){var a=z.chartBodyG(),b=a.selectAll("g.stack-list");b.empty()&&(b=a.append("g").attr("class","stack-list"));var c=b.selectAll("g.stack").data(z.data()),d=c.enter().append("g").attr("class",function(a,b){return"stack _"+b});f(d,c),g(d,c),i(a,c)},z.interpolate=function(a){return arguments.length?(F=a,z):F},z.tension=function(a){return arguments.length?(G=a,z):G},z.defined=function(a){return arguments.length?(r=a,z):r},z.dashStyle=function(a){return arguments.length?(s=a,z):s},z.renderArea=function(a){return arguments.length?(A=a,z):A},z.dotRadius=function(a){return arguments.length?(B=a,z):B},z.renderDataPoints=function(a){return arguments.length?(a?(D=a.fillOpacity||.8,E=a.strokeOpacity||.8,C=a.radius||2):(D=y,E=y,C=null),z):{fillOpacity:D,strokeOpacity:E,radius:C}},z.legendHighlight=function(a){z.isLegendableHidden(a)||z.g().selectAll("path.line, path.area").classed("highlight",q(a.color,a.dashstyle)).classed("fadeout",q(a.color,a.dashstyle,!0))},z.legendReset=function(){z.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},c.override(z,"legendables",function(){var a=z._legendables();return s?a.map(function(a){return a.dashstyle=s,a}):a}),z.anchor(b,d)},c.dataCount=function(b,d){var e=a.format(",d"),f=c.baseMixin({}),g={some:"",all:""};return f.html=function(a){return arguments.length?(a.all&&(g.all=a.all),a.some&&(g.some=a.some),f):g},f.formatNumber=function(a){return arguments.length?(e=a,f):e},f._doRender=function(){var a=f.dimension().size(),b=f.group().value(),c=e(a),d=e(b);return a===b&&""!==g.all?f.root().html(g.all.replace("%total-count",c).replace("%filter-count",d)):""!==g.some?f.root().html(g.some.replace("%total-count",c).replace("%filter-count",d)):(f.selectAll(".total-count").text(c),f.selectAll(".filter-count").text(d)),f},f._doRedraw=function(){return f._doRender()},f.anchor(b,d)},c.dataTable=function(b,d){function e(){var a=!0;if(o.forEach(function(b){a&="function"==typeof b}),!a){m.selectAll("th").remove();var b=m.root().selectAll("th").data(o),c=b.enter().append("th");c.attr("class",l).html(function(a){return m._doColumnHeaderFormat(a)})}var d=m.root().selectAll("tbody").data(f(),function(a){return m.keyAccessor()(a)}),e=d.enter().append("tbody");return e.append("tr").attr("class",k).append("td").attr("class",h).attr("colspan",o.length).html(function(a){return m.keyAccessor()(a)}),d.exit().remove(),e}function f(){var b;return b=q===a.ascending?m.dimension().bottom(n):m.dimension().top(n),a.nest().key(m.group()).sortKeys(q).entries(b.sort(function(a,b){return q(p(a),p(b))}))}function g(a){var b=a.order().selectAll("tr."+i).data(function(a){return a.values}),c=b.enter().append("tr").attr("class",i);return o.forEach(function(a,b){c.append("td").attr("class",j+" _"+b).html(function(b){return m._doColumnValueFormat(a,b)})}),b.exit().remove(),b}var h="dc-table-label",i="dc-table-row",j="dc-table-column",k="dc-table-group",l="dc-table-head",m=c.baseMixin({}),n=25,o=[],p=function(a){return a},q=a.ascending;return m._doRender=function(){return m.selectAll("tbody").remove(),g(e()),m},m._doColumnValueFormat=function(a,b){return"function"==typeof a?a(b):"string"==typeof a?b[a]:a.format(b)},m._doColumnHeaderFormat=function(a){return"function"==typeof a?m._doColumnHeaderFnToString(a):"string"==typeof a?m._doColumnHeaderCapitalize(a):String(a.label)},m._doColumnHeaderCapitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},m._doColumnHeaderFnToString=function(a){var b=String(a),c=b.indexOf("return ");if(c>=0){var d=b.lastIndexOf(";");if(d>=0){b=b.substring(c+7,d);var e=b.indexOf("numberFormat");e>=0&&(b=b.replace("numberFormat",""))}}return b},m._doRedraw=function(){return m._doRender()},m.size=function(a){return arguments.length?(n=a,m):n},m.columns=function(a){return arguments.length?(o=a,m):o},m.sortBy=function(a){return arguments.length?(p=a,m):p},m.order=function(a){return arguments.length?(q=a,m):q},m.anchor(b,d)},c.dataGrid=function(b,d){function e(){var a=l.root().selectAll("div."+k).data(f(),function(a){return l.keyAccessor()(a)}),b=a.enter().append("div").attr("class",k);return q&&b.html(function(a){return q(a)}),a.exit().remove(),b}function f(){var b=l.dimension().top(m);return a.nest().key(l.group()).sortKeys(p).entries(b.sort(function(a,b){return p(o(a),o(b))}))}function g(a){var b=a.order().selectAll("div."+i).data(function(a){return a.values});return b.enter().append("div").attr("class",i).html(function(a){return n(a)}),b.exit().remove(),b}var h="dc-grid-label",i="dc-grid-item",j="dc-grid-group",k="dc-grid-top",l=c.baseMixin({}),m=999,n=function(a){return"you need to provide an html() handling param:  "+JSON.stringify(a)},o=function(a){return a},p=a.ascending,q=function(a){return"<div class='"+j+"'><h1 class='"+h+"'>"+l.keyAccessor()(a)+"</h1></div>"};return l._doRender=function(){return l.selectAll("div."+k).remove(),g(e()),l},l._doRedraw=function(){return l._doRender()},l.size=function(a){return arguments.length?(m=a,l):m},l.html=function(a){return arguments.length?(n=a,l):n},l.htmlGroup=function(a){return arguments.length?(q=a,l):q},l.sortBy=function(a){return arguments.length?(o=a,l):o},l.order=function(a){return arguments.length?(p=a,l):p},l.anchor(b,d)},c.bubbleChart=function(a,b){function d(a){var b=a.enter().append("g");b.attr("class",i.BUBBLE_NODE_CLASS).attr("transform",k).append("circle").attr("class",function(a,b){return i.BUBBLE_CLASS+" _"+b}).on("click",i.onClick).attr("fill",i.getColor).attr("r",0),c.transition(a,i.transitionDuration()).selectAll("circle."+i.BUBBLE_CLASS).attr("r",function(a){return i.bubbleR(a)}).attr("opacity",function(a){return i.bubbleR(a)>0?1:0}),i._doRenderLabel(b),i._doRenderTitles(b)}function e(a){c.transition(a,i.transitionDuration()).attr("transform",k).selectAll("circle."+i.BUBBLE_CLASS).attr("fill",i.getColor).attr("r",function(a){return i.bubbleR(a)}).attr("opacity",function(a){return i.bubbleR(a)>0?1:0}),i.doUpdateLabels(a),i.doUpdateTitles(a)}function f(a){a.exit().remove()}function g(a){var b=i.x()(i.keyAccessor()(a));return isNaN(b)&&(b=0),b}function h(a){var b=i.y()(i.valueAccessor()(a));return isNaN(b)&&(b=0),b}var i=c.bubbleMixin(c.coordinateGridMixin({})),j=!1;i.transitionDuration(750);var k=function(a){return"translate("+g(a)+","+h(a)+")"};return i.elasticRadius=function(a){return arguments.length?(j=a,i):j},i.plotData=function(){j&&i.r().domain([i.rMin(),i.rMax()]),i.r().range([i.MIN_RADIUS,i.xAxisLength()*i.maxBubbleRelativeSize()]);var a=i.chartBodyG().selectAll("g."+i.BUBBLE_NODE_CLASS).data(i.data(),function(a){return a.key});d(a),e(a),f(a),i.fadeDeselectedArea()},i.renderBrush=function(){},i.redrawBrush=function(){i.fadeDeselectedArea()},i.anchor(a,b)},c.compositeChart=function(b,d){function e(){(void 0===u.rightY()||u.elasticY())&&(u.rightY(a.scale.linear()),u.rightY().domain([l(),o()]).rangeRound([u.yAxisHeight(),0])),u.rightY().range([u.yAxisHeight(),0]),u.rightYAxis(u.rightYAxis().scale(u.rightY())),u.rightYAxis().orient("right")}function f(){(void 0===u.y()||u.elasticY())&&(u.y(a.scale.linear()),u.y().domain([k(),n()]).rangeRound([u.yAxisHeight(),0])),u.y().range([u.yAxisHeight(),0]),u.yAxis(u.yAxis().scale(u.y())),u.yAxis().orient("left")}function g(a,b){a._generateG(u.g()),a.g().attr("class",s+" _"+b)}function h(){return v.filter(function(a){return!a.useRightYAxis()})}function i(){return v.filter(function(a){return a.useRightYAxis()})}function j(a){return a.map(function(a){return a.yAxisMin()})}function k(){return a.min(j(h()))}function l(){return a.min(j(i()))}function m(a){return a.map(function(a){return a.yAxisMax()})}function n(){return c.utils.add(a.max(m(h())),u.yAxisPadding())}function o(){return c.utils.add(a.max(m(i())),u.yAxisPadding())}function p(){return v.map(function(a){return a.xAxisMin()})}function q(){return v.map(function(a){return a.xAxisMax()})}var r,s="sub",t=12,u=c.coordinateGridMixin({}),v=[],w={},x=!1,y=!0,z=a.svg.axis(),A=0,B=t,C=!1;return u._mandatoryAttributes([]),u.transitionDuration(500),c.override(u,"_generateG",function(){for(var a=this.__generateG(),b=0;b<v.length;++b){var c=v[b];g(c,b),c.dimension()||c.dimension(u.dimension()),c.group()||c.group(u.group()),c.chartGroup(u.chartGroup()),c.svg(u.svg()),c.xUnits(u.xUnits()),c.transitionDuration(u.transitionDuration()),c.brushOn(u.brushOn()),c.renderTitle(u.renderTitle())}return a}),u._brushing=function(){for(var a=u.extendBrush(),b=u.brushIsEmpty(a),c=0;c<v.length;++c)v[c].filter(null),b||v[c].filter(a)},u._prepareYAxis=function(){0!==h().length&&f(),0!==i().length&&e(),h().length>0&&!C?u._renderHorizontalGridLinesForAxis(u.g(),u.y(),u.yAxis()):i().length>0&&u._renderHorizontalGridLinesForAxis(u.g(),r,z)},u.renderYAxis=function(){0!==h().length&&(u.renderYAxisAt("y",u.yAxis(),u.margins().left),u.renderYAxisLabel("y",u.yAxisLabel(),-90)),0!==i().length&&(u.renderYAxisAt("yr",u.rightYAxis(),u.width()-u.margins().right),u.renderYAxisLabel("yr",u.rightYAxisLabel(),90,u.width()-B))},u.plotData=function(){for(var a=0;a<v.length;++a){var b=v[a];b.g()||g(b,a),x&&b.colors(u.colors()),b.x(u.x()),b.xAxis(u.xAxis()),b.useRightYAxis()?(b.y(u.rightY()),b.yAxis(u.rightYAxis())):(b.y(u.y()),b.yAxis(u.yAxis())),b.plotData(),b._activateRenderlets()}},u.useRightAxisGridLines=function(a){return arguments?(C=a,u):C},u.childOptions=function(a){return arguments.length?(w=a,v.forEach(function(a){a.options(w)}),u):w},u.fadeDeselectedArea=function(){for(var a=0;a<v.length;++a){var b=v[a];b.brush(u.brush()),b.fadeDeselectedArea()}},u.rightYAxisLabel=function(a,b){return arguments.length?(A=a,u.margins().right-=B,B=void 0===b?t:b,u.margins().right+=B,u):A},u.compose=function(a){return v=a,v.forEach(function(a){a.height(u.height()),a.width(u.width()),a.margins(u.margins()),y&&a.title(u.title()),a.options(w)}),u},u.children=function(){return v},u.shareColors=function(a){return arguments.length?(x=a,u):x},u.shareTitle=function(a){return arguments.length?(y=a,u):y},u.rightY=function(a){return arguments.length?(r=a,u):r},delete u.yAxisMin,delete u.yAxisMax,c.override(u,"xAxisMin",function(){return c.utils.subtract(a.min(p()),u.xAxisPadding())}),c.override(u,"xAxisMax",function(){return c.utils.add(a.max(q()),u.xAxisPadding())}),u.legendables=function(){return v.reduce(function(a,b){return x&&b.colors(u.colors()),a.push.apply(a,b.legendables()),a},[])},u.legendHighlight=function(a){for(var b=0;b<v.length;++b){var c=v[b];c.legendHighlight(a)}},u.legendReset=function(a){for(var b=0;b<v.length;++b){var c=v[b];c.legendReset(a)}},u.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},u.rightYAxis=function(a){return arguments.length?(z=a,u):z},u.anchor(b,d)},c.seriesChart=function(b,d){function e(b,c){return a.ascending(i.keyAccessor()(b),i.keyAccessor()(c))}function f(a){j[a].g()&&j[a].g().remove(),delete j[a]}function g(){Object.keys(j).map(f),j={}}var h,i=c.compositeChart(b,d),j={},k=c.lineChart,l=a.ascending,m=e;return i._mandatoryAttributes().push("seriesAccessor","chart"),i.shareColors(!0),i._preprocessData=function(){var b,c=[],e=a.nest().key(h);l&&e.sortKeys(l),m&&e.sortValues(m);var g=e.entries(i.data()),n=g.map(function(e,f){var g=j[e.key]||k.call(i,i,d,e.key,f);return j[e.key]||(b=!0),j[e.key]=g,c.push(e.key),g.dimension(i.dimension()).group({all:a.functor(e.values)},e.key).keyAccessor(i.keyAccessor()).valueAccessor(i.valueAccessor()).brushOn(i.brushOn())});Object.keys(j).filter(function(a){return-1===c.indexOf(a)}).forEach(function(a){f(a),b=!0}),i._compose(n),b&&i.legend()&&i.legend().render()},i.chart=function(a){return arguments.length?(k=a,g(),i):k},i.seriesAccessor=function(a){return arguments.length?(h=a,g(),i):h},i.seriesSort=function(a){return arguments.length?(l=a,g(),i):l},i.valueSort=function(a){return arguments.length?(m=a,g(),i):m},i._compose=i.compose,delete i.compose,i},c.geoChoroplethChart=function(b,d){function e(a){var b=f();if(g(a)){var c=h(a);n(c,a,b),o(c,a,b)}}function f(){for(var a={},b=p.data(),c=0;c<b.length;++c)a[p.keyAccessor()(b[c])]=p.valueAccessor()(b[c]);return a}function g(a){return m(a).keyAccessor}function h(a){var b=p.svg().selectAll(i(a)).classed("selected",function(b){return j(a,b)}).classed("deselected",function(b){return k(a,b)}).attr("class",function(b){var d=m(a).name,e=c.utils.nameToId(m(a).keyAccessor(b)),f=d+" "+e;return j(a,b)&&(f+=" selected"),k(a,b)&&(f+=" deselected"),f});return b}function i(a){return"g.layer"+a+" g."+m(a).name}function j(a,b){return p.hasFilter()&&p.hasFilter(l(a,b))}function k(a,b){return p.hasFilter()&&!p.hasFilter(l(a,b))}function l(a,b){return m(a).keyAccessor(b)}function m(a){return s[a]}function n(b,d,e){var f=b.select("path").attr("fill",function(){var b=a.select(this).attr("fill");return b?b:"none"}).on("click",function(a){return p.onClick(a,d)});c.transition(f,p.transitionDuration()).attr("fill",function(a,b){return p.getColor(e[m(d).keyAccessor(a)],b)})}function o(a,b,c){p.renderTitle()&&a.selectAll("title").text(function(a){var d=l(b,a),e=c[d];return p.title()({key:d,value:e})})}var p=c.colorMixin(c.baseMixin({}));p.colorAccessor(function(a){return a||0;
});var q,r=a.geo.path(),s=[];return p._doRender=function(){p.resetSvg();for(var a=0;a<s.length;++a){var b=p.svg().append("g").attr("class","layer"+a),c=b.selectAll("g."+m(a).name).data(m(a).data).enter().append("g").attr("class",m(a).name);c.append("path").attr("fill","white").attr("d",r),c.append("title"),e(a)}q=!1},p.onClick=function(a,b){var d=m(b).keyAccessor(a);c.events.trigger(function(){p.filter(d),p.redrawGroup()})},p._doRedraw=function(){for(var a=0;a<s.length;++a)e(a),q&&p.svg().selectAll("g."+m(a).name+" path").attr("d",r);q=!1},p.overlayGeoJson=function(a,b,c){for(var d=0;d<s.length;++d)if(s[d].name===b)return s[d].data=a,s[d].keyAccessor=c,p;return s.push({name:b,data:a,keyAccessor:c}),p},p.projection=function(a){return r.projection(a),q=!0,p},p.geoJsons=function(){return s},p.geoPath=function(){return r},p.removeGeoJson=function(a){for(var b=[],c=0;c<s.length;++c){var d=s[c];d.name!==a&&b.push(d)}return s=b,p},p.anchor(b,d)},c.bubbleOverlay=function(b,d){function e(){return j=n.select("g."+k),j.empty()&&(j=n.svg().append("g").attr("class",k)),j}function f(){var a=g();o.forEach(function(b){var d=h(b,a),e=d.select("circle."+m);e.empty()&&(e=d.append("circle").attr("class",m).attr("r",0).attr("fill",n.getColor).on("click",n.onClick)),c.transition(e,n.transitionDuration()).attr("r",function(a){return n.bubbleR(a)}),n._doRenderLabel(d),n._doRenderTitles(d)})}function g(){var a={};return n.data().forEach(function(b){a[n.keyAccessor()(b)]=b}),a}function h(a,b){var d=l+" "+c.utils.nameToId(a.name),e=j.select("g."+c.utils.nameToId(a.name));return e.empty()&&(e=j.append("g").attr("class",d).attr("transform","translate("+a.x+","+a.y+")")),e.datum(b[a.name]),e}function i(){var a=g();o.forEach(function(b){var d=h(b,a),e=d.select("circle."+m);c.transition(e,n.transitionDuration()).attr("r",function(a){return n.bubbleR(a)}).attr("fill",n.getColor),n.doUpdateLabels(d),n.doUpdateTitles(d)})}var j,k="bubble-overlay",l="node",m="bubble",n=c.bubbleMixin(c.baseMixin({})),o=[];return n.transitionDuration(750),n.radiusValueAccessor(function(a){return a.value}),n.point=function(a,b,c){return o.push({name:a,x:b,y:c}),n},n._doRender=function(){return j=e(),n.r().range([n.MIN_RADIUS,n.width()*n.maxBubbleRelativeSize()]),f(),n.fadeDeselectedArea(),n},n._doRedraw=function(){return i(),n.fadeDeselectedArea(),n},n.debug=function(b){if(b){var d=n.select("g."+c.constants.DEBUG_GROUP_CLASS);d.empty()&&(d=n.svg().append("g").attr("class",c.constants.DEBUG_GROUP_CLASS));var e=d.append("text").attr("x",10).attr("y",20);d.append("rect").attr("width",n.width()).attr("height",n.height()).on("mousemove",function(){var b=a.mouse(d.node()),c=b[0]+", "+b[1];e.text(c)})}else n.selectAll(".debug").remove();return n},n.anchor(b,d),n},c.rowChart=function(b,d){function e(){if(!t||u){var b=a.extent(v,G.cappedValueAccessor);b[0]>0&&(b[0]=0),t=a.scale.linear().domain(b).range([0,G.effectiveWidth()])}H.scale(t)}function f(){var a=s.select("g.axis");e(),a.empty()&&(a=s.append("g").attr("class","axis").attr("transform","translate(0, "+G.effectiveHeight()+")")),c.transition(a,G.transitionDuration()).call(H)}function g(){s.selectAll("g.tick").select("line.grid-line").remove(),s.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-G.effectiveHeight()})}function h(){v=G.data(),f(),g();var a=s.selectAll("g."+D).data(v);i(a),j(a),l(a)}function i(a){var b=a.enter().append("g").attr("class",function(a,b){return D+" _"+b});b.append("rect").attr("width",0),n(b),o(a)}function j(a){a.exit().remove()}function k(){var a=t(0);return a===-(1/0)||a!==a?t(1):a}function l(a){var b,d=v.length;b=C?C:(G.effectiveHeight()-(d+1)*B)/d,y||(x=b/2);var e=a.attr("transform",function(a,c){return"translate(0,"+((c+1)*B+c*b)+")"}).select("rect").attr("height",b).attr("fill",G.getColor).on("click",p).classed("deselected",function(a){return G.hasFilter()?!r(a):!1}).classed("selected",function(a){return G.hasFilter()?r(a):!1});c.transition(e,G.transitionDuration()).attr("width",function(a){return Math.abs(k()-t(G.valueAccessor()(a)))}).attr("transform",q),m(a),o(a)}function m(a){G.renderTitle()&&(a.selectAll("title").remove(),a.append("title").text(G.title()))}function n(a){G.renderLabel()&&a.append("text").on("click",p),G.renderTitleLabel()&&a.append("text").attr("class",E).on("click",p)}function o(a){if(G.renderLabel()){var b=a.select("text").attr("x",w).attr("y",x).attr("dy",z).on("click",p).attr("class",function(a,b){return D+" _"+b}).text(function(a){return G.label()(a)});c.transition(b,G.transitionDuration()).attr("transform",q)}if(G.renderTitleLabel()){var d=a.select("."+E).attr("x",G.effectiveWidth()-A).attr("y",x).attr("text-anchor","end").on("click",p).attr("class",function(a,b){return E+" _"+b}).text(function(a){return G.title()(a)});c.transition(d,G.transitionDuration()).attr("transform",q)}}function p(a){G.onClick(a)}function q(a){var b=t(G.cappedValueAccessor(a)),c=k(),d=b>c?c:b;return"translate("+d+",0)"}function r(a){return G.hasFilter(G.cappedKeyAccessor(a))}var s,t,u,v,w=10,x=15,y=!1,z="0.35em",A=2,B=5,C=!1,D="row",E="titlerow",F=!1,G=c.capMixin(c.marginMixin(c.colorMixin(c.baseMixin({})))),H=a.svg.axis().orient("bottom");return G.rowsCap=G.cap,G._doRender=function(){return G.resetSvg(),s=G.svg().append("g").attr("transform","translate("+G.margins().left+","+G.margins().top+")"),h(),G},G.title(function(a){return G.cappedKeyAccessor(a)+": "+G.cappedValueAccessor(a)}),G.label(G.cappedKeyAccessor),G.x=function(a){return arguments.length?(t=a,G):t},G.renderTitleLabel=function(a){return arguments.length?(F=a,G):F},G._doRedraw=function(){return h(),G},G.xAxis=function(){return H},G.fixedBarHeight=function(a){return arguments.length?(C=a,G):C},G.gap=function(a){return arguments.length?(B=a,G):B},G.elasticX=function(a){return arguments.length?(u=a,G):u},G.labelOffsetX=function(a){return arguments.length?(w=a,G):w},G.labelOffsetY=function(a){return arguments.length?(x=a,y=!0,G):x},G.titleLabelOffsetX=function(a){return arguments.length?(A=a,G):A},G.anchor(b,d)},c.legend=function(){function a(){return j+i}var b,d,e=2,f={},g=0,h=0,i=12,j=5,k=!1,l=560,m=70,n=!1;return f.parent=function(a){return arguments.length?(b=a,f):b},f.render=function(){b.svg().select("g.dc-legend").remove(),d=b.svg().append("g").attr("class","dc-legend").attr("transform","translate("+g+","+h+")");var f=b.legendables(),o=d.selectAll("g.dc-legend-item").data(f).enter().append("g").attr("class","dc-legend-item").on("mouseover",function(a){b.legendHighlight(a)}).on("mouseout",function(a){b.legendReset(a)}).on("click",function(a){a.chart.legendToggle(a)});d.selectAll("g.dc-legend-item").classed("fadeout",function(a){return a.chart.isLegendableHidden(a)}),f.some(c.pluck("dashstyle"))?o.append("line").attr("x1",0).attr("y1",i/2).attr("x2",i).attr("y2",i/2).attr("stroke-width",2).attr("stroke-dasharray",c.pluck("dashstyle")).attr("stroke",c.pluck("color")):o.append("rect").attr("width",i).attr("height",i).attr("fill",function(a){return a?a.color:"blue"}),o.append("text").text(c.pluck("name")).attr("x",i+e).attr("y",function(){return i/2+(this.clientHeight?this.clientHeight:13)/2-2});var p=0,q=0;o.attr("transform",function(b,c){if(k){var d="translate("+p+","+q*a()+")",e=n===!0?this.getBBox().width+j:m;return p+e>=l?(++q,p=0):p+=e,d}return"translate(0,"+c*a()+")"})},f.x=function(a){return arguments.length?(g=a,f):g},f.y=function(a){return arguments.length?(h=a,f):h},f.gap=function(a){return arguments.length?(j=a,f):j},f.itemHeight=function(a){return arguments.length?(i=a,f):i},f.horizontal=function(a){return arguments.length?(k=a,f):k},f.legendWidth=function(a){return arguments.length?(l=a,f):l},f.itemWidth=function(a){return arguments.length?(m=a,f):m},f.autoItemWidth=function(a){return arguments.length?(n=a,f):n},f},c.scatterPlot=function(b,d){function e(b,d){var e=g.selectAll(".chart-body path.symbol").filter(function(){return b(a.select(this))}),f=h.size();h.size(Math.pow(d,2)),c.transition(e,g.transitionDuration()).attr("d",h),h.size(f)}function f(a){var b=g.selectAll(".chart-body path.symbol").each(function(b){this.filtered=a&&a.isFiltered(b.key)});c.transition(b,g.transitionDuration()).attr("d",h)}var g=c.coordinateGridMixin({}),h=a.svg.symbol(),i=function(a){return a.value},j=g.keyAccessor();g.keyAccessor(function(a){return j(a)[0]}),g.valueAccessor(function(a){return j(a)[1]}),g.colorAccessor(function(){return g._groupName});var k=function(a){return"translate("+g.x()(g.keyAccessor()(a))+","+g.y()(g.valueAccessor()(a))+")"},l=3,m=5,n=0;return h.size(function(a){return i(a)?this.filtered?Math.pow(m,2):Math.pow(l,2):n}),c.override(g,"_filter",function(a){return arguments.length?g.__filter(c.filters.RangedTwoDimensionalFilter(a)):g.__filter()}),g.plotData=function(){var a=g.chartBodyG().selectAll("path.symbol").data(g.data());a.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",g.getColor).attr("transform",k),c.transition(a,g.transitionDuration()).attr("opacity",function(a){return i(a)?1:0}).attr("fill",g.getColor).attr("transform",k).attr("d",h),c.transition(a.exit(),g.transitionDuration()).attr("opacity",0).remove()},g.existenceAccessor=function(a){return arguments.length?(i=a,this):i},g.symbol=function(a){return arguments.length?(h.type(a),g):h.type()},g.symbolSize=function(a){return arguments.length?(l=a,g):l},g.highlightedSize=function(a){return arguments.length?(m=a,g):m},g.hiddenSize=function(a){return arguments.length?(n=a,g):n},g.legendables=function(){return[{chart:g,name:g._groupName,color:g.getColor()}]},g.legendHighlight=function(b){e(function(a){return a.attr("fill")===b.color},m),g.selectAll(".chart-body path.symbol").filter(function(){return a.select(this).attr("fill")!==b.color}).classed("fadeout",!0)},g.legendReset=function(b){e(function(a){return a.attr("fill")===b.color},l),g.selectAll(".chart-body path.symbol").filter(function(){return a.select(this).attr("fill")!==b.color}).classed("fadeout",!1)},g.setHandlePaths=function(){},g.extendBrush=function(){var a=g.brush().extent();return g.round()&&(a[0]=a[0].map(g.round()),a[1]=a[1].map(g.round()),g.g().select(".brush").call(g.brush().extent(a))),a},g.brushIsEmpty=function(a){return g.brush().empty()||!a||a[0][0]>=a[1][0]||a[0][1]>=a[1][1]},g._brushing=function(){var a=g.extendBrush();if(g.redrawBrush(g.g()),g.brushIsEmpty(a))c.events.trigger(function(){g.filter(null),g.redrawGroup()}),f(!1);else{var b=c.filters.RangedTwoDimensionalFilter(a);c.events.trigger(function(){g.filter(null),g.filter(b),g.redrawGroup()},c.constants.EVENT_DELAY),f(b)}},g.setBrushY=function(a){a.call(g.brush().y(g.y()))},g.anchor(b,d)},c.numberDisplay=function(b,d){var e="number-display",f=a.format(".2s"),g=c.baseMixin({}),h={one:"",some:"",none:""};return g._mandatoryAttributes(["group"]),g.html=function(a){return arguments.length?(a.none?h.none=a.none:a.one?h.none=a.one:a.some&&(h.none=a.some),a.one?h.one=a.one:a.some&&(h.one=a.some),a.some?h.some=a.some:a.one&&(h.some=a.one),g):h},g.value=function(){return g.data()},g.data(function(a){var b=a.value?a.value():a.top(1)[0];return g.valueAccessor()(b)}),g.transitionDuration(250),g._doRender=function(){var b=g.value(),c=g.selectAll("."+e);c.empty()&&(c=c.data([0]).enter().append("span").attr("class",e)),c.transition().duration(g.transitionDuration()).ease("quad-out-in").tween("text",function(){var c=a.interpolateNumber(this.lastValue||0,b);return this.lastValue=b,function(a){var d=null,e=g.formatNumber()(c(a));0===b&&""!==h.none?d=h.none:1===b&&""!==h.one?d=h.one:""!==h.some&&(d=h.some),this.innerHTML=d?d.replace("%number",e):e}})},g._doRedraw=function(){return g._doRender()},g.formatNumber=function(a){return arguments.length?(f=a,g):f},g.anchor(b,d)},c.heatMap=function(b,d){function e(a,b){var d=m.selectAll(".box-group").filter(function(c){return c.key[a]===b}),e=d.filter(function(a){return!m.hasFilter(a.key)});c.events.trigger(function(){e.empty()?d.each(function(a){m.filter(a.key)}):e.each(function(a){m.filter(a.key)}),m.redrawGroup()})}function f(a,b,c){return!b||c[b-1]!==a}var g,h,i,j=6.75,k=j,l=j,m=c.colorMixin(c.marginMixin(c.baseMixin({})));m._mandatoryAttributes(["group"]),m.title(m.colorAccessor());var n=function(a){return a},o=function(a){return a};m.colsLabel=function(a){return arguments.length?(n=a,m):n},m.rowsLabel=function(a){return arguments.length?(o=a,m):o};var p=function(a){e(0,a)},q=function(a){e(1,a)},r=function(a){var b=a.key;c.events.trigger(function(){m.filter(b),m.redrawGroup()})};return c.override(m,"filter",function(a){return arguments.length?m._filter(c.filters.TwoDimensionalFilter(a)):m._filter()}),m.rows=function(b){if(arguments.length)return i=b,m;if(i)return i;var c=m.data().map(m.valueAccessor());return c.sort(a.ascending),a.scale.ordinal().domain(c.filter(f))},m.cols=function(b){if(arguments.length)return h=b,m;if(h)return h;var c=m.data().map(m.keyAccessor());return c.sort(a.ascending),a.scale.ordinal().domain(c.filter(f))},m._doRender=function(){return m.resetSvg(),g=m.svg().append("g").attr("class","heatmap").attr("transform","translate("+m.margins().left+","+m.margins().top+")"),m._doRedraw()},m._doRedraw=function(){var a=m.rows(),b=m.cols(),d=a.domain().length,e=b.domain().length,f=Math.floor(m.effectiveWidth()/e),h=Math.floor(m.effectiveHeight()/d);b.rangeRoundBands([0,m.effectiveWidth()]),a.rangeRoundBands([m.effectiveHeight(),0]);var i=g.selectAll("g.box-group").data(m.data(),function(a,b){return m.keyAccessor()(a,b)+"\x00"+m.valueAccessor()(a,b)}),j=i.enter().append("g").attr("class","box-group");j.append("rect").attr("class","heat-box").attr("fill","white").on("click",m.boxOnClick()),m.renderTitle()&&j.append("title").text(m.title()),c.transition(i.selectAll("rect"),m.transitionDuration()).attr("x",function(a,c){return b(m.keyAccessor()(a,c))}).attr("y",function(b,c){return a(m.valueAccessor()(b,c))}).attr("rx",k).attr("ry",l).attr("fill",m.getColor).attr("width",f).attr("height",h),i.exit().remove();var n=g.selectAll("g.cols");n.empty()&&(n=g.append("g").attr("class","cols axis"));var o=n.selectAll("text").data(b.domain());o.enter().append("text").attr("x",function(a){return b(a)+f/2}).style("text-anchor","middle").attr("y",m.effectiveHeight()).attr("dy",12).on("click",m.xAxisOnClick()).text(m.colsLabel()),c.transition(o,m.transitionDuration()).text(m.colsLabel()).attr("x",function(a){return b(a)+f/2}),o.exit().remove();var p=g.selectAll("g.rows");p.empty()&&(p=g.append("g").attr("class","rows axis"));var q=p.selectAll("text").data(a.domain());return q.enter().append("text").attr("dy",6).style("text-anchor","end").attr("x",0).attr("dx",-2).on("click",m.yAxisOnClick()).text(m.rowsLabel()),c.transition(q,m.transitionDuration()).text(m.rowsLabel()).attr("y",function(b){return a(b)+h/2}),q.exit().remove(),m.hasFilter()?m.selectAll("g.box-group").each(function(a){m.isSelectedNode(a)?m.highlightSelected(this):m.fadeDeselected(this)}):m.selectAll("g.box-group").each(function(){m.resetHighlight(this)}),m},m.boxOnClick=function(a){return arguments.length?(r=a,m):r},m.xAxisOnClick=function(a){return arguments.length?(p=a,m):p},m.yAxisOnClick=function(a){return arguments.length?(q=a,m):q},m.xBorderRadius=function(a){return arguments.length?(k=a,m):k},m.yBorderRadius=function(a){return arguments.length?(l=a,m):l},m.isSelectedNode=function(a){return m.hasFilter(a.key)},m.anchor(b,d)},function(){function b(a){return[0,a.length-1]}function c(b){return[a.quantile(b,.25),a.quantile(b,.5),a.quantile(b,.75)]}a.box=function(){function d(b){b.each(function(b,c){b=b.map(i).sort(a.ascending);var d=a.select(this),m=b.length,n=b[0],o=b[m-1],p=b.quartiles=k(b),q=j&&j.call(this,b,c),r=q&&q.map(function(a){return b[a]}),s=q?a.range(0,q[0]).concat(a.range(q[1]+1,m)):a.range(m),t=a.scale.linear().domain(h&&h.call(this,b,c)||[n,o]).range([f,0]),u=this.__chart__||a.scale.linear().domain([0,1/0]).range(t.range());this.__chart__=t;var v=d.selectAll("line.center").data(r?[r]:[]);v.enter().insert("line","rect").attr("class","center").attr("x1",e/2).attr("y1",function(a){return u(a[0])}).attr("x2",e/2).attr("y2",function(a){return u(a[1])}).style("opacity",1e-6).transition().duration(g).style("opacity",1).attr("y1",function(a){return t(a[0])}).attr("y2",function(a){return t(a[1])}),v.transition().duration(g).style("opacity",1).attr("y1",function(a){return t(a[0])}).attr("y2",function(a){return t(a[1])}),v.exit().transition().duration(g).style("opacity",1e-6).attr("y1",function(a){return t(a[0])}).attr("y2",function(a){return t(a[1])}).remove();var w=d.selectAll("rect.box").data([p]);w.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(a){return u(a[2])}).attr("width",e).attr("height",function(a){return u(a[0])-u(a[2])}).transition().duration(g).attr("y",function(a){return t(a[2])}).attr("height",function(a){return t(a[0])-t(a[2])}),w.transition().duration(g).attr("y",function(a){return t(a[2])}).attr("height",function(a){return t(a[0])-t(a[2])});var x=d.selectAll("line.median").data([p[1]]);x.enter().append("line").attr("class","median").attr("x1",0).attr("y1",u).attr("x2",e).attr("y2",u).transition().duration(g).attr("y1",t).attr("y2",t),x.transition().duration(g).attr("y1",t).attr("y2",t);var y=d.selectAll("line.whisker").data(r||[]);y.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",u).attr("x2",e).attr("y2",u).style("opacity",1e-6).transition().duration(g).attr("y1",t).attr("y2",t).style("opacity",1),y.transition().duration(g).attr("y1",t).attr("y2",t).style("opacity",1),y.exit().transition().duration(g).attr("y1",t).attr("y2",t).style("opacity",1e-6).remove();var z=d.selectAll("circle.outlier").data(s,Number);z.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",e/2).attr("cy",function(a){return u(b[a])}).style("opacity",1e-6).transition().duration(g).attr("cy",function(a){return t(b[a])}).style("opacity",1),z.transition().duration(g).attr("cy",function(a){return t(b[a])}).style("opacity",1),z.exit().transition().duration(g).attr("cy",function(a){return t(b[a])}).style("opacity",1e-6).remove();var A=l||t.tickFormat(8),B=d.selectAll("text.box").data(p);B.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(a,b){return 1&b?6:-6}).attr("x",function(a,b){return 1&b?e:0}).attr("y",u).attr("text-anchor",function(a,b){return 1&b?"start":"end"}).text(A).transition().duration(g).attr("y",t),B.transition().duration(g).text(A).attr("y",t);var C=d.selectAll("text.whisker").data(r||[]);C.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",e).attr("y",u).text(A).style("opacity",1e-6).transition().duration(g).attr("y",t).style("opacity",1),C.transition().duration(g).text(A).attr("y",t).style("opacity",1),C.exit().transition().duration(g).attr("y",t).style("opacity",1e-6).remove()}),a.timer.flush()}var e=1,f=1,g=0,h=null,i=Number,j=b,k=c,l=null;return d.width=function(a){return arguments.length?(e=a,d):e},d.height=function(a){return arguments.length?(f=a,d):f},d.tickFormat=function(a){return arguments.length?(l=a,d):l},d.duration=function(a){return arguments.length?(g=a,d):g},d.domain=function(b){return arguments.length?(h=null===b?b:a.functor(b),d):h},d.value=function(a){return arguments.length?(i=a,d):i},d.whiskers=function(a){return arguments.length?(j=a,d):j},d.quartiles=function(a){return arguments.length?(k=a,d):k},d}}(),c.boxPlot=function(b,d){function e(a){return function(b){for(var c=b.quartiles[0],d=b.quartiles[2],e=(d-c)*a,f=-1,g=b.length;b[++f]<c-e;);for(;b[--g]>d+e;);return[f,g]}}function f(a){var b=a.enter().append("g");b.attr("class","box").attr("transform",p).call(m).on("click",function(a){i.filter(a.key),i.redrawGroup()})}function g(b){c.transition(b,i.transitionDuration()).attr("transform",p).call(m).each(function(){a.select(this).select("rect.box").attr("fill",i.getColor)})}function h(a){a.exit().remove().call(m)}var i=c.coordinateGridMixin({}),j=1.5,k=e,l=k(j),m=a.box(),n=null,o=function(a,b){return i.isOrdinal()?i.x().rangeBand():a/(1+i.boxPadding())/b};i.yAxisPadding(12),i.x(a.scale.ordinal()),i.xUnits(c.units.ordinal),i.data(function(a){return a.all().map(function(a){return a.map=function(b){return b.call(a,a)},a}).filter(function(a){var b=i.valueAccessor()(a);return 0!==b.length})}),i.boxPadding=i._rangeBandPadding,i.boxPadding(.8),i.outerPadding=i._outerRangeBandPadding,i.outerPadding(.5),i.boxWidth=function(b){return arguments.length?(o=a.functor(b),i):o};var p=function(a,b){var c=i.x()(i.keyAccessor()(a,b));return"translate("+c+", 0)"};return i._preprocessData=function(){i.elasticX()&&i.x().domain([])},i.plotData=function(){var a=o(i.effectiveWidth(),i.xUnitCount());m.whiskers(l).width(a).height(i.effectiveHeight()).value(i.valueAccessor()).domain(i.y().domain()).duration(i.transitionDuration()).tickFormat(n);var b=i.chartBodyG().selectAll("g.box").data(i.data(),function(a){return a.key});f(b),g(b),h(b),i.fadeDeselectedArea()},i.fadeDeselectedArea=function(){i.hasFilter()?i.g().selectAll("g.box").each(function(a){i.isSelectedNode(a)?i.highlightSelected(this):i.fadeDeselected(this)}):i.g().selectAll("g.box").each(function(){i.resetHighlight(this)})},i.isSelectedNode=function(a){return i.hasFilter(a.key)},i.yAxisMin=function(){var b=a.min(i.data(),function(b){return a.min(i.valueAccessor()(b))});return c.utils.subtract(b,i.yAxisPadding())},i.yAxisMax=function(){var b=a.max(i.data(),function(b){return a.max(i.valueAccessor()(b))});return c.utils.add(b,i.yAxisPadding())},i.tickFormat=function(a){return arguments.length?(n=a,i):n},i.anchor(b,d)},c.abstractBubbleChart=c.bubbleMixin,c.baseChart=c.baseMixin,c.capped=c.capMixin,c.colorChart=c.colorMixin,c.coordinateGridChart=c.coordinateGridMixin,c.marginable=c.marginMixin,c.stackableChart=c.stackMixin,c.d3=a,c.crossfilter=b,c}if("function"==typeof define&&define.amd)define(["d3","crossfilter"],a);else if("object"==typeof module&&module.exports){var b=require("d3"),c=require("crossfilter");"function"!=typeof c&&(c=c.crossfilter),module.exports=a(b,c)}else this.dc=a(d3,crossfilter)}(),angular.module("airedioApp").directive("ngHideAuth",["simpleLogin","$timeout",function(a,b){var c;return a.watch(function(a){c=!!a}),{restrict:"A",link:function(d,e){function f(){b(function(){e.toggleClass("ng-cloak",c!==!1)},0)}e.addClass("ng-cloak"),a.watch(f,d),a.getUser(f)}}}]),angular.module("airedioApp").directive("ngShowAuth",["simpleLogin","$timeout",function(a,b){var c;return a.watch(function(a){c=!!a}),{restrict:"A",link:function(d,e){function f(){b(function(){e.toggleClass("ng-cloak",!c)},0)}e.addClass("ng-cloak"),a.watch(f,d),a.getUser(f)}}}]),angular.module("airedioApp").filter("reverse",function(){return function(a){return angular.isArray(a)?a.slice().reverse():[]}}),function(a){a.color={},a.color.make=function(b,c,d,e){var f={};return f.r=b||0,f.g=c||0,f.b=d||0,f.a=null!=e?e:1,f.add=function(a,b){for(var c=0;c<a.length;++c)f[a.charAt(c)]+=b;return f.normalize()},f.scale=function(a,b){for(var c=0;c<a.length;++c)f[a.charAt(c)]*=b;return f.normalize()},f.toString=function(){return f.a>=1?"rgb("+[f.r,f.g,f.b].join(",")+")":"rgba("+[f.r,f.g,f.b,f.a].join(",")+")"},f.normalize=function(){function a(a,b,c){return a>b?a:b>c?c:b}return f.r=a(0,parseInt(f.r),255),f.g=a(0,parseInt(f.g),255),f.b=a(0,parseInt(f.b),255),f.a=a(0,f.a,1),f},f.clone=function(){return a.color.make(f.r,f.b,f.g,f.a)},f.normalize()},a.color.extract=function(b,c){var d;do{if(d=b.css(c).toLowerCase(),""!=d&&"transparent"!=d)break;b=b.parent()}while(!a.nodeName(b.get(0),"body"));return"rgba(0, 0, 0, 0)"==d&&(d="transparent"),a.color.parse(d)},a.color.parse=function(c){var d,e=a.color.make;if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))return e(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10));if(d=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10),parseFloat(d[4]));if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))return e(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]));if(d=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]),parseFloat(d[4]));if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))return e(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16));if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))return e(parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16));var f=a.trim(c).toLowerCase();return"transparent"==f?e(255,255,255,0):(d=b[f]||[0,0,0],e(d[0],d[1],d[2]))};var b={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(a){function b(b,d,e,f){function g(a,b){b=[ua].concat(b);for(var c=0;c<a.length;++c)a[c].apply(this,b)}function h(){for(var b=0;b<f.length;++b){var c=f[b];c.init(ua),c.options&&a.extend(!0,ga,c.options)}}function j(b){var c;for(a.extend(!0,ga,b),null==ga.xaxis.color&&(ga.xaxis.color=ga.grid.color),null==ga.yaxis.color&&(ga.yaxis.color=ga.grid.color),null==ga.xaxis.tickColor&&(ga.xaxis.tickColor=ga.grid.tickColor),null==ga.yaxis.tickColor&&(ga.yaxis.tickColor=ga.grid.tickColor),null==ga.grid.borderColor&&(ga.grid.borderColor=ga.grid.color),null==ga.grid.tickColor&&(ga.grid.tickColor=a.color.parse(ga.grid.color).scale("a",.22).toString()),c=0;c<Math.max(1,ga.xaxes.length);++c)ga.xaxes[c]=a.extend(!0,{},ga.xaxis,ga.xaxes[c]);for(c=0;c<Math.max(1,ga.yaxes.length);++c)ga.yaxes[c]=a.extend(!0,{},ga.yaxis,ga.yaxes[c]);for(ga.xaxis.noTicks&&null==ga.xaxis.ticks&&(ga.xaxis.ticks=ga.xaxis.noTicks),ga.yaxis.noTicks&&null==ga.yaxis.ticks&&(ga.yaxis.ticks=ga.yaxis.noTicks),ga.x2axis&&(ga.xaxes[1]=a.extend(!0,{},ga.xaxis,ga.x2axis),ga.xaxes[1].position="top"),ga.y2axis&&(ga.yaxes[1]=a.extend(!0,{},ga.yaxis,ga.y2axis),ga.yaxes[1].position="right"),ga.grid.coloredAreas&&(ga.grid.markings=ga.grid.coloredAreas),ga.grid.coloredAreasColor&&(ga.grid.markingsColor=ga.grid.coloredAreasColor),ga.lines&&a.extend(!0,ga.series.lines,ga.lines),ga.points&&a.extend(!0,ga.series.points,ga.points),ga.bars&&a.extend(!0,ga.series.bars,ga.bars),null!=ga.shadowSize&&(ga.series.shadowSize=ga.shadowSize),c=0;c<ga.xaxes.length;++c)q(ma,c+1).options=ga.xaxes[c];for(c=0;c<ga.yaxes.length;++c)q(na,c+1).options=ga.yaxes[c];for(var d in ta)ga.hooks[d]&&ga.hooks[d].length&&(ta[d]=ta[d].concat(ga.hooks[d]));g(ta.processOptions,[ga])}function k(a){fa=l(a),r(),s()}function l(b){for(var c=[],d=0;d<b.length;++d){var e=a.extend(!0,{},ga.series);null!=b[d].data?(e.data=b[d].data,delete b[d].data,a.extend(!0,e,b[d]),b[d].data=e.data):e.data=b[d],c.push(e)}return c}function m(a,b){var c=a[b+"axis"];return"object"==typeof c&&(c=c.n),"number"!=typeof c&&(c=1),c}function n(){return a.grep(ma.concat(na),function(a){return a})}function o(a){var b,c,d={};for(b=0;b<ma.length;++b)c=ma[b],c&&c.used&&(d["x"+c.n]=c.c2p(a.left));for(b=0;b<na.length;++b)c=na[b],c&&c.used&&(d["y"+c.n]=c.c2p(a.top));return void 0!==d.x1&&(d.x=d.x1),void 0!==d.y1&&(d.y=d.y1),d}function p(a){var b,c,d,e={};for(b=0;b<ma.length;++b)if(c=ma[b],c&&c.used&&(d="x"+c.n,null==a[d]&&1==c.n&&(d="x"),null!=a[d])){e.left=c.p2c(a[d]);break}for(b=0;b<na.length;++b)if(c=na[b],c&&c.used&&(d="y"+c.n,null==a[d]&&1==c.n&&(d="y"),null!=a[d])){e.top=c.p2c(a[d]);break}return e}function q(b,c){return b[c-1]||(b[c-1]={n:c,direction:b==ma?"x":"y",options:a.extend(!0,{},b==ma?ga.xaxis:ga.yaxis)}),b[c-1]}function r(){var b,c=fa.length,d=[],e=[];for(b=0;b<fa.length;++b){var f=fa[b].color;null!=f&&(--c,"number"==typeof f?e.push(f):d.push(a.color.parse(fa[b].color)))}for(b=0;b<e.length;++b)c=Math.max(c,e[b]+1);var g=[],h=0;for(b=0;g.length<c;){var i;i=ga.colors.length==b?a.color.make(100,100,100):a.color.parse(ga.colors[b]);var j=h%2==1?-1:1;i.scale("rgb",1+j*Math.ceil(h/2)*.2),g.push(i),++b,b>=ga.colors.length&&(b=0,++h)}var k,l=0;for(b=0;b<fa.length;++b){if(k=fa[b],null==k.color?(k.color=g[l].toString(),++l):"number"==typeof k.color&&(k.color=g[k.color].toString()),null==k.lines.show){var n,o=!0;for(n in k)if(k[n]&&k[n].show){o=!1;break}o&&(k.lines.show=!0)}k.xaxis=q(ma,m(k,"x")),k.yaxis=q(na,m(k,"y"))}}function s(){function b(a,b,c){b<a.datamin&&b!=-q&&(a.datamin=b),c>a.datamax&&c!=q&&(a.datamax=c)}var c,d,e,f,h,i,j,k,l,m,o=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,q=Number.MAX_VALUE;for(a.each(n(),function(a,b){b.datamin=o,b.datamax=p,b.used=!1}),c=0;c<fa.length;++c)h=fa[c],h.datapoints={points:[]},g(ta.processRawData,[h,h.data,h.datapoints]);for(c=0;c<fa.length;++c){h=fa[c];var r=h.data,s=h.datapoints.format;if(s||(s=[],s.push({x:!0,number:!0,required:!0}),s.push({y:!0,number:!0,required:!0}),(h.bars.show||h.lines.show&&h.lines.fill)&&(s.push({y:!0,number:!0,required:!1,defaultValue:0}),h.bars.horizontal&&(delete s[s.length-1].y,s[s.length-1].x=!0)),h.datapoints.format=s),null==h.datapoints.pointsize)for(h.datapoints.pointsize=s.length,j=h.datapoints.pointsize,i=h.datapoints.points,insertSteps=h.lines.show&&h.lines.steps,h.xaxis.used=h.yaxis.used=!0,d=e=0;d<r.length;++d,e+=j){m=r[d];var t=null==m;if(!t)for(f=0;j>f;++f)k=m[f],l=s[f],l&&(l.number&&null!=k&&(k=+k,isNaN(k)?k=null:k==1/0?k=q:k==-(1/0)&&(k=-q)),null==k&&(l.required&&(t=!0),null!=l.defaultValue&&(k=l.defaultValue))),i[e+f]=k;if(t)for(f=0;j>f;++f)k=i[e+f],null!=k&&(l=s[f],l.x&&b(h.xaxis,k,k),l.y&&b(h.yaxis,k,k)),i[e+f]=null;else if(insertSteps&&e>0&&null!=i[e-j]&&i[e-j]!=i[e]&&i[e-j+1]!=i[e+1]){for(f=0;j>f;++f)i[e+j+f]=i[e+f];i[e+1]=i[e-j+1],e+=j}}}for(c=0;c<fa.length;++c)h=fa[c],g(ta.processDatapoints,[h,h.datapoints]);for(c=0;c<fa.length;++c){h=fa[c],i=h.datapoints.points,j=h.datapoints.pointsize;var u=o,v=o,w=p,x=p;for(d=0;d<i.length;d+=j)if(null!=i[d])for(f=0;j>f;++f)k=i[d+f],l=s[f],l&&k!=q&&k!=-q&&(l.x&&(u>k&&(u=k),k>w&&(w=k)),l.y&&(v>k&&(v=k),k>x&&(x=k)));if(h.bars.show){var y="left"==h.bars.align?0:-h.bars.barWidth/2;h.bars.horizontal?(v+=y,x+=y+h.bars.barWidth):(u+=y,w+=y+h.bars.barWidth)}b(h.xaxis,u,w),b(h.yaxis,v,x)}a.each(n(),function(a,b){b.datamin==o&&(b.datamin=null),b.datamax==p&&(b.datamax=null)})}function t(c,d){var e=document.createElement("canvas");return e.className=d,e.width=pa,e.height=qa,c||a(e).css({position:"absolute",left:0,top:0}),a(e).appendTo(b),e.getContext||(e=window.G_vmlCanvasManager.initElement(e)),e.getContext("2d").save(),e}function u(){if(pa=b.width(),qa=b.height(),0>=pa||0>=qa)throw"Invalid dimensions for plot, width = "+pa+", height = "+qa}function v(a){a.width!=pa&&(a.width=pa),a.height!=qa&&(a.height=qa);var b=a.getContext("2d");b.restore(),b.save()}function w(){var c,d=b.children("canvas.base"),e=b.children("canvas.overlay");0==d.length||0==e?(b.html(""),b.css({padding:0}),"static"==b.css("position")&&b.css("position","relative"),u(),ha=t(!0,"base"),ia=t(!1,"overlay"),c=!1):(ha=d.get(0),ia=e.get(0),c=!0),ka=ha.getContext("2d"),la=ia.getContext("2d"),ja=a([ia,ha]),c&&(b.data("plot").shutdown(),ua.resize(),la.clearRect(0,0,pa,qa),ja.unbind(),b.children().not([ha,ia]).remove()),
b.data("plot",ua)}function x(){ga.grid.hoverable&&(ja.mousemove(V),ja.mouseleave(W)),ga.grid.clickable&&ja.click(X),g(ta.bindEvents,[ja])}function y(){wa&&clearTimeout(wa),ja.unbind("mousemove",V),ja.unbind("mouseleave",W),ja.unbind("click",X),g(ta.shutdown,[ja])}function z(a){function b(a){return a}var c,d,e=a.options.transform||b,f=a.options.inverseTransform;"x"==a.direction?(c=a.scale=ra/Math.abs(e(a.max)-e(a.min)),d=Math.min(e(a.max),e(a.min))):(c=a.scale=sa/Math.abs(e(a.max)-e(a.min)),c=-c,d=Math.max(e(a.max),e(a.min))),e==b?a.p2c=function(a){return(a-d)*c}:a.p2c=function(a){return(e(a)-d)*c},f?a.c2p=function(a){return f(d+a/c)}:a.c2p=function(a){return d+a/c}}function A(c){function d(d,e){return a('<div style="position:absolute;top:-10000px;'+e+'font-size:smaller"><div class="'+c.direction+"Axis "+c.direction+c.n+'Axis">'+d.join("")+"</div></div>").appendTo(b)}var e,f,g,h=c.options,i=c.ticks||[],j=[],k=h.labelWidth,l=h.labelHeight;if("x"==c.direction){if(null==k&&(k=Math.floor(pa/(i.length>0?i.length:1))),null==l){for(j=[],e=0;e<i.length;++e)f=i[e].label,f&&j.push('<div class="tickLabel" style="float:left;width:'+k+'px">'+f+"</div>");j.length>0&&(j.push('<div style="clear:left"></div>'),g=d(j,"width:10000px;"),l=g.height(),g.remove())}}else if(null==k||null==l){for(e=0;e<i.length;++e)f=i[e].label,f&&j.push('<div class="tickLabel">'+f+"</div>");j.length>0&&(g=d(j,""),null==k&&(k=g.children().width()),null==l&&(l=g.find("div.tickLabel").height()),g.remove())}null==k&&(k=0),null==l&&(l=0),c.labelWidth=k,c.labelHeight=l}function B(b){var c=b.labelWidth,d=b.labelHeight,e=b.options.position,f=b.options.tickLength,g=ga.grid.axisMargin,h=ga.grid.labelMargin,i="x"==b.direction?ma:na,j=a.grep(i,function(a){return a&&a.options.position==e&&a.reserveSpace});a.inArray(b,j)==j.length-1&&(g=0),null==f&&(f="full");var k=a.grep(i,function(a){return a&&a.reserveSpace}),l=0==a.inArray(b,k);l||"full"!=f||(f=5),isNaN(+f)||(h+=+f),"x"==b.direction?(d+=h,"bottom"==e?(oa.bottom+=d+g,b.box={top:qa-oa.bottom,height:d}):(b.box={top:oa.top+g,height:d},oa.top+=d+g)):(c+=h,"left"==e?(b.box={left:oa.left+g,width:c},oa.left+=c+g):(oa.right+=c+g,b.box={left:pa-oa.right,width:c})),b.position=e,b.tickLength=f,b.box.padding=h,b.innermost=l}function C(a){"x"==a.direction?(a.box.left=oa.left,a.box.width=ra):(a.box.top=oa.top,a.box.height=sa)}function D(){var b,c=n();if(a.each(c,function(a,b){b.show=b.options.show,null==b.show&&(b.show=b.used),b.reserveSpace=b.show||b.options.reserveSpace,E(b)}),allocatedAxes=a.grep(c,function(a){return a.reserveSpace}),oa.left=oa.right=oa.top=oa.bottom=0,ga.grid.show){for(a.each(allocatedAxes,function(a,b){F(b),G(b),H(b,b.ticks),A(b)}),b=allocatedAxes.length-1;b>=0;--b)B(allocatedAxes[b]);var d=ga.grid.minBorderMargin;if(null==d)for(d=0,b=0;b<fa.length;++b)d=Math.max(d,fa[b].points.radius+fa[b].points.lineWidth/2);for(var e in oa)oa[e]+=ga.grid.borderWidth,oa[e]=Math.max(d,oa[e])}ra=pa-oa.left-oa.right,sa=qa-oa.bottom-oa.top,a.each(c,function(a,b){z(b)}),ga.grid.show&&(a.each(allocatedAxes,function(a,b){C(b)}),M()),T()}function E(a){var b=a.options,c=+(null!=b.min?b.min:a.datamin),d=+(null!=b.max?b.max:a.datamax),e=d-c;if(0==e){var f=0==d?1:.01;null==b.min&&(c-=f),(null==b.max||null!=b.min)&&(d+=f)}else{var g=b.autoscaleMargin;null!=g&&(null==b.min&&(c-=e*g,0>c&&null!=a.datamin&&a.datamin>=0&&(c=0)),null==b.max&&(d+=e*g,d>0&&null!=a.datamax&&a.datamax<=0&&(d=0)))}a.min=c,a.max=d}function F(b){var d,e=b.options;d="number"==typeof e.ticks&&e.ticks>0?e.ticks:.3*Math.sqrt("x"==b.direction?pa:qa);var f,g,h,i,j,k,l,m=(b.max-b.min)/d;if("time"==e.mode){var n={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:525949.2*60*1e3},o=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],p=0;null!=e.minTickSize&&(p="number"==typeof e.tickSize?e.tickSize:e.minTickSize[0]*n[e.minTickSize[1]]);for(var j=0;j<o.length-1&&!(m<(o[j][0]*n[o[j][1]]+o[j+1][0]*n[o[j+1][1]])/2&&o[j][0]*n[o[j][1]]>=p);++j);f=o[j][0],h=o[j][1],"year"==h&&(k=Math.pow(10,Math.floor(Math.log(m/n.year)/Math.LN10)),l=m/n.year/k,f=1.5>l?1:3>l?2:7.5>l?5:10,f*=k),b.tickSize=e.tickSize||[f,h],g=function(a){var b=[],d=a.tickSize[0],e=a.tickSize[1],f=new Date(a.min),g=d*n[e];"second"==e&&f.setUTCSeconds(c(f.getUTCSeconds(),d)),"minute"==e&&f.setUTCMinutes(c(f.getUTCMinutes(),d)),"hour"==e&&f.setUTCHours(c(f.getUTCHours(),d)),"month"==e&&f.setUTCMonth(c(f.getUTCMonth(),d)),"year"==e&&f.setUTCFullYear(c(f.getUTCFullYear(),d)),f.setUTCMilliseconds(0),g>=n.minute&&f.setUTCSeconds(0),g>=n.hour&&f.setUTCMinutes(0),g>=n.day&&f.setUTCHours(0),g>=4*n.day&&f.setUTCDate(1),g>=n.year&&f.setUTCMonth(0);var h,i=0,j=Number.NaN;do if(h=j,j=f.getTime(),b.push(j),"month"==e)if(1>d){f.setUTCDate(1);var k=f.getTime();f.setUTCMonth(f.getUTCMonth()+1);var l=f.getTime();f.setTime(j+i*n.hour+(l-k)*d),i=f.getUTCHours(),f.setUTCHours(0)}else f.setUTCMonth(f.getUTCMonth()+d);else"year"==e?f.setUTCFullYear(f.getUTCFullYear()+d):f.setTime(j+g);while(j<a.max&&j!=h);return b},i=function(b,c){var d=new Date(b);if(null!=e.timeformat)return a.plot.formatDate(d,e.timeformat,e.monthNames);var f=c.tickSize[0]*n[c.tickSize[1]],g=c.max-c.min,h=e.twelveHourClock?" %p":"";return f<n.minute?fmt="%h:%M:%S"+h:f<n.day?g<2*n.day?fmt="%h:%M"+h:fmt="%b %d %h:%M"+h:f<n.month?fmt="%b %d":f<n.year?g<n.year?fmt="%b":fmt="%b %y":fmt="%y",a.plot.formatDate(d,fmt,e.monthNames)}}else{var q=e.tickDecimals,r=-Math.floor(Math.log(m)/Math.LN10);null!=q&&r>q&&(r=q),k=Math.pow(10,-r),l=m/k,1.5>l?f=1:3>l?(f=2,l>2.25&&(null==q||q>=r+1)&&(f=2.5,++r)):f=7.5>l?5:10,f*=k,null!=e.minTickSize&&f<e.minTickSize&&(f=e.minTickSize),b.tickDecimals=Math.max(0,null!=q?q:r),b.tickSize=e.tickSize||f,g=function(a){var b,d=[],e=c(a.min,a.tickSize),f=0,g=Number.NaN;do b=g,g=e+f*a.tickSize,d.push(g),++f;while(g<a.max&&g!=b);return d},i=function(a,b){return a.toFixed(b.tickDecimals)}}if(null!=e.alignTicksWithAxis){var s=("x"==b.direction?ma:na)[e.alignTicksWithAxis-1];if(s&&s.used&&s!=b){var t=g(b);if(t.length>0&&(null==e.min&&(b.min=Math.min(b.min,t[0])),null==e.max&&t.length>1&&(b.max=Math.max(b.max,t[t.length-1]))),g=function(a){var b,c,d=[];for(c=0;c<s.ticks.length;++c)b=(s.ticks[c].v-s.min)/(s.max-s.min),b=a.min+b*(a.max-a.min),d.push(b);return d},"time"!=b.mode&&null==e.tickDecimals){var u=Math.max(0,-Math.floor(Math.log(m)/Math.LN10)+1),v=g(b);v.length>1&&/\..*0$/.test((v[1]-v[0]).toFixed(u))||(b.tickDecimals=u)}}}b.tickGenerator=g,a.isFunction(e.tickFormatter)?b.tickFormatter=function(a,b){return""+e.tickFormatter(a,b)}:b.tickFormatter=i}function G(b){var c=b.options.ticks,d=[];null==c||"number"==typeof c&&c>0?d=b.tickGenerator(b):c&&(d=a.isFunction(c)?c({min:b.min,max:b.max}):c);var e,f;for(b.ticks=[],e=0;e<d.length;++e){var g=null,h=d[e];"object"==typeof h?(f=+h[0],h.length>1&&(g=h[1])):f=+h,null==g&&(g=b.tickFormatter(f,b)),isNaN(f)||b.ticks.push({v:f,label:g})}}function H(a,b){a.options.autoscaleMargin&&b.length>0&&(null==a.options.min&&(a.min=Math.min(a.min,b[0].v)),null==a.options.max&&b.length>1&&(a.max=Math.max(a.max,b[b.length-1].v)))}function I(){ka.clearRect(0,0,pa,qa);var a=ga.grid;a.show&&a.backgroundColor&&K(),a.show&&!a.aboveData&&L();for(var b=0;b<fa.length;++b)g(ta.drawSeries,[ka,fa[b]]),N(fa[b]);g(ta.draw,[ka]),a.show&&a.aboveData&&L()}function J(a,b){var c,d,e,f,g=n();for(i=0;i<g.length;++i)if(c=g[i],c.direction==b&&(f=b+c.n+"axis",a[f]||1!=c.n||(f=b+"axis"),a[f])){d=a[f].from,e=a[f].to;break}if(a[f]||(c="x"==b?ma[0]:na[0],d=a[b+"1"],e=a[b+"2"]),null!=d&&null!=e&&d>e){var h=d;d=e,e=h}return{from:d,to:e,axis:c}}function K(){ka.save(),ka.translate(oa.left,oa.top),ka.fillStyle=ea(ga.grid.backgroundColor,sa,0,"rgba(255, 255, 255, 0)"),ka.fillRect(0,0,ra,sa),ka.restore()}function L(){var b;ka.save(),ka.translate(oa.left,oa.top);var c=ga.grid.markings;if(c){if(a.isFunction(c)){var d=ua.getAxes();d.xmin=d.xaxis.min,d.xmax=d.xaxis.max,d.ymin=d.yaxis.min,d.ymax=d.yaxis.max,c=c(d)}for(b=0;b<c.length;++b){var e=c[b],f=J(e,"x"),g=J(e,"y");null==f.from&&(f.from=f.axis.min),null==f.to&&(f.to=f.axis.max),null==g.from&&(g.from=g.axis.min),null==g.to&&(g.to=g.axis.max),f.to<f.axis.min||f.from>f.axis.max||g.to<g.axis.min||g.from>g.axis.max||(f.from=Math.max(f.from,f.axis.min),f.to=Math.min(f.to,f.axis.max),g.from=Math.max(g.from,g.axis.min),g.to=Math.min(g.to,g.axis.max),(f.from!=f.to||g.from!=g.to)&&(f.from=f.axis.p2c(f.from),f.to=f.axis.p2c(f.to),g.from=g.axis.p2c(g.from),g.to=g.axis.p2c(g.to),f.from==f.to||g.from==g.to?(ka.beginPath(),ka.strokeStyle=e.color||ga.grid.markingsColor,ka.lineWidth=e.lineWidth||ga.grid.markingsLineWidth,ka.moveTo(f.from,g.from),ka.lineTo(f.to,g.to),ka.stroke()):(ka.fillStyle=e.color||ga.grid.markingsColor,ka.fillRect(f.from,g.to,f.to-f.from,g.from-g.to))))}}for(var d=n(),h=ga.grid.borderWidth,i=0;i<d.length;++i){var j,k,l,m,o=d[i],p=o.box,q=o.tickLength;if(o.show&&0!=o.ticks.length){for(ka.strokeStyle=o.options.tickColor||a.color.parse(o.options.color).scale("a",.22).toString(),ka.lineWidth=1,"x"==o.direction?(j=0,k="full"==q?"top"==o.position?0:sa:p.top-oa.top+("top"==o.position?p.height:0)):(k=0,j="full"==q?"left"==o.position?0:ra:p.left-oa.left+("left"==o.position?p.width:0)),o.innermost||(ka.beginPath(),l=m=0,"x"==o.direction?l=ra:m=sa,1==ka.lineWidth&&(j=Math.floor(j)+.5,k=Math.floor(k)+.5),ka.moveTo(j,k),ka.lineTo(j+l,k+m),ka.stroke()),ka.beginPath(),b=0;b<o.ticks.length;++b){var r=o.ticks[b].v;l=m=0,r<o.min||r>o.max||"full"==q&&h>0&&(r==o.min||r==o.max)||("x"==o.direction?(j=o.p2c(r),m="full"==q?-sa:q,"top"==o.position&&(m=-m)):(k=o.p2c(r),l="full"==q?-ra:q,"left"==o.position&&(l=-l)),1==ka.lineWidth&&("x"==o.direction?j=Math.floor(j)+.5:k=Math.floor(k)+.5),ka.moveTo(j,k),ka.lineTo(j+l,k+m))}ka.stroke()}}h&&(ka.lineWidth=h,ka.strokeStyle=ga.grid.borderColor,ka.strokeRect(-h/2,-h/2,ra+h,sa+h)),ka.restore()}function M(){b.find(".tickLabels").remove();for(var a=['<div class="tickLabels" style="font-size:smaller">'],c=n(),d=0;d<c.length;++d){var e=c[d],f=e.box;if(e.show){a.push('<div class="'+e.direction+"Axis "+e.direction+e.n+'Axis" style="color:'+e.options.color+'">');for(var g=0;g<e.ticks.length;++g){var h=e.ticks[g];if(!(!h.label||h.v<e.min||h.v>e.max)){var i,j={};"x"==e.direction?(i="center",j.left=Math.round(oa.left+e.p2c(h.v)-e.labelWidth/2),"bottom"==e.position?j.top=f.top+f.padding:j.bottom=qa-(f.top+f.height-f.padding)):(j.top=Math.round(oa.top+e.p2c(h.v)-e.labelHeight/2),"left"==e.position?(j.right=pa-(f.left+f.width-f.padding),i="right"):(j.left=f.left+f.padding,i="left")),j.width=e.labelWidth;var k=["position:absolute","text-align:"+i];for(var l in j)k.push(l+":"+j[l]+"px");a.push('<div class="tickLabel" style="'+k.join(";")+'">'+h.label+"</div>")}}a.push("</div>")}}a.push("</div>"),b.append(a.join(""))}function N(a){a.lines.show&&O(a),a.bars.show&&R(a),a.points.show&&P(a)}function O(a){function b(a,b,c,d,e){var f=a.points,g=a.pointsize,h=null,i=null;ka.beginPath();for(var j=g;j<f.length;j+=g){var k=f[j-g],l=f[j-g+1],m=f[j],n=f[j+1];if(null!=k&&null!=m){if(n>=l&&l<e.min){if(n<e.min)continue;k=(e.min-l)/(n-l)*(m-k)+k,l=e.min}else if(l>=n&&n<e.min){if(l<e.min)continue;m=(e.min-l)/(n-l)*(m-k)+k,n=e.min}if(l>=n&&l>e.max){if(n>e.max)continue;k=(e.max-l)/(n-l)*(m-k)+k,l=e.max}else if(n>=l&&n>e.max){if(l>e.max)continue;m=(e.max-l)/(n-l)*(m-k)+k,n=e.max}if(m>=k&&k<d.min){if(m<d.min)continue;l=(d.min-k)/(m-k)*(n-l)+l,k=d.min}else if(k>=m&&m<d.min){if(k<d.min)continue;n=(d.min-k)/(m-k)*(n-l)+l,m=d.min}if(k>=m&&k>d.max){if(m>d.max)continue;l=(d.max-k)/(m-k)*(n-l)+l,k=d.max}else if(m>=k&&m>d.max){if(k>d.max)continue;n=(d.max-k)/(m-k)*(n-l)+l,m=d.max}(k!=h||l!=i)&&ka.moveTo(d.p2c(k)+b,e.p2c(l)+c),h=m,i=n,ka.lineTo(d.p2c(m)+b,e.p2c(n)+c)}}ka.stroke()}function c(a,b,c){for(var d=a.points,e=a.pointsize,f=Math.min(Math.max(0,c.min),c.max),g=0,h=!1,i=1,j=0,k=0;;){if(e>0&&g>d.length+e)break;g+=e;var l=d[g-e],m=d[g-e+i],n=d[g],o=d[g+i];if(h){if(e>0&&null!=l&&null==n){k=g,e=-e,i=2;continue}if(0>e&&g==j+e){ka.fill(),h=!1,e=-e,i=1,g=j=k+e;continue}}if(null!=l&&null!=n){if(n>=l&&l<b.min){if(n<b.min)continue;m=(b.min-l)/(n-l)*(o-m)+m,l=b.min}else if(l>=n&&n<b.min){if(l<b.min)continue;o=(b.min-l)/(n-l)*(o-m)+m,n=b.min}if(l>=n&&l>b.max){if(n>b.max)continue;m=(b.max-l)/(n-l)*(o-m)+m,l=b.max}else if(n>=l&&n>b.max){if(l>b.max)continue;o=(b.max-l)/(n-l)*(o-m)+m,n=b.max}if(h||(ka.beginPath(),ka.moveTo(b.p2c(l),c.p2c(f)),h=!0),m>=c.max&&o>=c.max)ka.lineTo(b.p2c(l),c.p2c(c.max)),ka.lineTo(b.p2c(n),c.p2c(c.max));else if(m<=c.min&&o<=c.min)ka.lineTo(b.p2c(l),c.p2c(c.min)),ka.lineTo(b.p2c(n),c.p2c(c.min));else{var p=l,q=n;o>=m&&m<c.min&&o>=c.min?(l=(c.min-m)/(o-m)*(n-l)+l,m=c.min):m>=o&&o<c.min&&m>=c.min&&(n=(c.min-m)/(o-m)*(n-l)+l,o=c.min),m>=o&&m>c.max&&o<=c.max?(l=(c.max-m)/(o-m)*(n-l)+l,m=c.max):o>=m&&o>c.max&&m<=c.max&&(n=(c.max-m)/(o-m)*(n-l)+l,o=c.max),l!=p&&ka.lineTo(b.p2c(p),c.p2c(m)),ka.lineTo(b.p2c(l),c.p2c(m)),ka.lineTo(b.p2c(n),c.p2c(o)),n!=q&&(ka.lineTo(b.p2c(n),c.p2c(o)),ka.lineTo(b.p2c(q),c.p2c(o)))}}}}ka.save(),ka.translate(oa.left,oa.top),ka.lineJoin="round";var d=a.lines.lineWidth,e=a.shadowSize;if(d>0&&e>0){ka.lineWidth=e,ka.strokeStyle="rgba(0,0,0,0.1)";var f=Math.PI/18;b(a.datapoints,Math.sin(f)*(d/2+e/2),Math.cos(f)*(d/2+e/2),a.xaxis,a.yaxis),ka.lineWidth=e/2,b(a.datapoints,Math.sin(f)*(d/2+e/4),Math.cos(f)*(d/2+e/4),a.xaxis,a.yaxis)}ka.lineWidth=d,ka.strokeStyle=a.color;var g=S(a.lines,a.color,0,sa);g&&(ka.fillStyle=g,c(a.datapoints,a.xaxis,a.yaxis)),d>0&&b(a.datapoints,0,0,a.xaxis,a.yaxis),ka.restore()}function P(a){function b(a,b,c,d,e,f,g,h){for(var i=a.points,j=a.pointsize,k=0;k<i.length;k+=j){var l=i[k],m=i[k+1];null==l||l<f.min||l>f.max||m<g.min||m>g.max||(ka.beginPath(),l=f.p2c(l),m=g.p2c(m)+d,"circle"==h?ka.arc(l,m,b,0,e?Math.PI:2*Math.PI,!1):h(ka,l,m,b,e),ka.closePath(),c&&(ka.fillStyle=c,ka.fill()),ka.stroke())}}ka.save(),ka.translate(oa.left,oa.top);var c=a.points.lineWidth,d=a.shadowSize,e=a.points.radius,f=a.points.symbol;if(c>0&&d>0){var g=d/2;ka.lineWidth=g,ka.strokeStyle="rgba(0,0,0,0.1)",b(a.datapoints,e,null,g+g/2,!0,a.xaxis,a.yaxis,f),ka.strokeStyle="rgba(0,0,0,0.2)",b(a.datapoints,e,null,g/2,!0,a.xaxis,a.yaxis,f)}ka.lineWidth=c,ka.strokeStyle=a.color,b(a.datapoints,e,S(a.points,a.color),0,!1,a.xaxis,a.yaxis,f),ka.restore()}function Q(a,b,c,d,e,f,g,h,i,j,k,l){var m,n,o,p,q,r,s,t,u;k?(t=r=s=!0,q=!1,m=c,n=a,p=b+d,o=b+e,m>n&&(u=n,n=m,m=u,q=!0,r=!1)):(q=r=s=!0,t=!1,m=a+d,n=a+e,o=c,p=b,o>p&&(u=p,p=o,o=u,t=!0,s=!1)),n<h.min||m>h.max||p<i.min||o>i.max||(m<h.min&&(m=h.min,q=!1),n>h.max&&(n=h.max,r=!1),o<i.min&&(o=i.min,t=!1),p>i.max&&(p=i.max,s=!1),m=h.p2c(m),o=i.p2c(o),n=h.p2c(n),p=i.p2c(p),g&&(j.beginPath(),j.moveTo(m,o),j.lineTo(m,p),j.lineTo(n,p),j.lineTo(n,o),j.fillStyle=g(o,p),j.fill()),l>0&&(q||r||s||t)&&(j.beginPath(),j.moveTo(m,o+f),q?j.lineTo(m,p+f):j.moveTo(m,p+f),s?j.lineTo(n,p+f):j.moveTo(n,p+f),r?j.lineTo(n,o+f):j.moveTo(n,o+f),t?j.lineTo(m,o+f):j.moveTo(m,o+f),j.stroke()))}function R(a){function b(b,c,d,e,f,g,h){for(var i=b.points,j=b.pointsize,k=0;k<i.length;k+=j)null!=i[k]&&Q(i[k],i[k+1],i[k+2],c,d,e,f,g,h,ka,a.bars.horizontal,a.bars.lineWidth)}ka.save(),ka.translate(oa.left,oa.top),ka.lineWidth=a.bars.lineWidth,ka.strokeStyle=a.color;var c="left"==a.bars.align?0:-a.bars.barWidth/2,d=a.bars.fill?function(b,c){return S(a.bars,a.color,b,c)}:null;b(a.datapoints,c,c+a.bars.barWidth,0,d,a.xaxis,a.yaxis),ka.restore()}function S(b,c,d,e){var f=b.fill;if(!f)return null;if(b.fillColor)return ea(b.fillColor,d,e,c);var g=a.color.parse(c);return g.a="number"==typeof f?f:.4,g.normalize(),g.toString()}function T(){if(b.find(".legend").remove(),ga.legend.show){for(var c,d,e=[],f=!1,g=ga.legend.labelFormatter,h=0;h<fa.length;++h)c=fa[h],d=c.label,d&&(h%ga.legend.noColumns==0&&(f&&e.push("</tr>"),e.push("<tr>"),f=!0),g&&(d=g(d,c)),e.push('<td class="legendColorBox"><div style="border:1px solid '+ga.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+c.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+d+"</td>"));if(f&&e.push("</tr>"),0!=e.length){var i='<table style="font-size:smaller;color:'+ga.grid.color+'">'+e.join("")+"</table>";if(null!=ga.legend.container)a(ga.legend.container).html(i);else{var j="",k=ga.legend.position,l=ga.legend.margin;null==l[0]&&(l=[l,l]),"n"==k.charAt(0)?j+="top:"+(l[1]+oa.top)+"px;":"s"==k.charAt(0)&&(j+="bottom:"+(l[1]+oa.bottom)+"px;"),"e"==k.charAt(1)?j+="right:"+(l[0]+oa.right)+"px;":"w"==k.charAt(1)&&(j+="left:"+(l[0]+oa.left)+"px;");var m=a('<div class="legend">'+i.replace('style="','style="position:absolute;'+j+";")+"</div>").appendTo(b);if(0!=ga.legend.backgroundOpacity){var n=ga.legend.backgroundColor;null==n&&(n=ga.grid.backgroundColor,n=n&&"string"==typeof n?a.color.parse(n):a.color.extract(m,"background-color"),n.a=1,n=n.toString());var o=m.children();a('<div style="position:absolute;width:'+o.width()+"px;height:"+o.height()+"px;"+j+"background-color:"+n+';"> </div>').prependTo(m).css("opacity",ga.legend.backgroundOpacity)}}}}}function U(a,b,c){var d,e,f=ga.grid.mouseActiveRadius,g=f*f+1,h=null;for(d=fa.length-1;d>=0;--d)if(c(fa[d])){var i=fa[d],j=i.xaxis,k=i.yaxis,l=i.datapoints.points,m=i.datapoints.pointsize,n=j.c2p(a),o=k.c2p(b),p=f/j.scale,q=f/k.scale;if(j.options.inverseTransform&&(p=Number.MAX_VALUE),k.options.inverseTransform&&(q=Number.MAX_VALUE),i.lines.show||i.points.show)for(e=0;e<l.length;e+=m){var r=l[e],s=l[e+1];if(null!=r&&!(r-n>p||-p>r-n||s-o>q||-q>s-o)){var t=Math.abs(j.p2c(r)-a),u=Math.abs(k.p2c(s)-b),v=t*t+u*u;g>v&&(g=v,h=[d,e/m])}}if(i.bars.show&&!h){var w="left"==i.bars.align?0:-i.bars.barWidth/2,x=w+i.bars.barWidth;for(e=0;e<l.length;e+=m){var r=l[e],s=l[e+1],y=l[e+2];null!=r&&(fa[d].bars.horizontal?n<=Math.max(y,r)&&n>=Math.min(y,r)&&o>=s+w&&s+x>=o:n>=r+w&&r+x>=n&&o>=Math.min(y,s)&&o<=Math.max(y,s))&&(h=[d,e/m])}}}return h?(d=h[0],e=h[1],m=fa[d].datapoints.pointsize,{datapoint:fa[d].datapoints.points.slice(e*m,(e+1)*m),dataIndex:e,series:fa[d],seriesIndex:d}):null}function V(a){ga.grid.hoverable&&Y("plothover",a,function(a){return 0!=a.hoverable})}function W(a){ga.grid.hoverable&&Y("plothover",a,function(a){return!1})}function X(a){Y("plotclick",a,function(a){return 0!=a.clickable})}function Y(a,c,d){var e=ja.offset(),f=c.pageX-e.left-oa.left,g=c.pageY-e.top-oa.top,h=o({left:f,top:g});h.pageX=c.pageX,h.pageY=c.pageY;var i=U(f,g,d);if(i&&(i.pageX=parseInt(i.series.xaxis.p2c(i.datapoint[0])+e.left+oa.left),i.pageY=parseInt(i.series.yaxis.p2c(i.datapoint[1])+e.top+oa.top)),ga.grid.autoHighlight){for(var j=0;j<va.length;++j){var k=va[j];k.auto!=a||i&&k.series==i.series&&k.point[0]==i.datapoint[0]&&k.point[1]==i.datapoint[1]||aa(k.series,k.point)}i&&_(i.series,i.datapoint,a)}b.trigger(a,[h,i])}function Z(){wa||(wa=setTimeout($,30))}function $(){wa=null,la.save(),la.clearRect(0,0,pa,qa),la.translate(oa.left,oa.top);var a,b;for(a=0;a<va.length;++a)b=va[a],b.series.bars.show?da(b.series,b.point):ca(b.series,b.point);la.restore(),g(ta.drawOverlay,[la])}function _(a,b,c){if("number"==typeof a&&(a=fa[a]),"number"==typeof b){var d=a.datapoints.pointsize;b=a.datapoints.points.slice(d*b,d*(b+1))}var e=ba(a,b);-1==e?(va.push({series:a,point:b,auto:c}),Z()):c||(va[e].auto=!1)}function aa(a,b){null==a&&null==b&&(va=[],Z()),"number"==typeof a&&(a=fa[a]),"number"==typeof b&&(b=a.data[b]);var c=ba(a,b);-1!=c&&(va.splice(c,1),Z())}function ba(a,b){for(var c=0;c<va.length;++c){var d=va[c];if(d.series==a&&d.point[0]==b[0]&&d.point[1]==b[1])return c}return-1}function ca(b,c){var d=c[0],e=c[1],f=b.xaxis,g=b.yaxis;if(!(d<f.min||d>f.max||e<g.min||e>g.max)){var h=b.points.radius+b.points.lineWidth/2;la.lineWidth=h,la.strokeStyle=a.color.parse(b.color).scale("a",.5).toString();var i=1.5*h,d=f.p2c(d),e=g.p2c(e);la.beginPath(),"circle"==b.points.symbol?la.arc(d,e,i,0,2*Math.PI,!1):b.points.symbol(la,d,e,i,!1),la.closePath(),la.stroke()}}function da(b,c){la.lineWidth=b.bars.lineWidth,la.strokeStyle=a.color.parse(b.color).scale("a",.5).toString();var d=a.color.parse(b.color).scale("a",.5).toString(),e="left"==b.bars.align?0:-b.bars.barWidth/2;Q(c[0],c[1],c[2]||0,e,e+b.bars.barWidth,0,function(){return d},b.xaxis,b.yaxis,la,b.bars.horizontal,b.bars.lineWidth)}function ea(b,c,d,e){if("string"==typeof b)return b;for(var f=ka.createLinearGradient(0,d,0,c),g=0,h=b.colors.length;h>g;++g){var i=b.colors[g];if("string"!=typeof i){var j=a.color.parse(e);null!=i.brightness&&(j=j.scale("rgb",i.brightness)),null!=i.opacity&&(j.a*=i.opacity),i=j.toString()}f.addColorStop(g/(h-1),i)}return f}var fa=[],ga={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},hooks:{}},ha=null,ia=null,ja=null,ka=null,la=null,ma=[],na=[],oa={left:0,right:0,top:0,bottom:0},pa=0,qa=0,ra=0,sa=0,ta={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},ua=this;ua.setData=k,ua.setupGrid=D,ua.draw=I,ua.getPlaceholder=function(){return b},ua.getCanvas=function(){return ha},ua.getPlotOffset=function(){return oa},ua.width=function(){return ra},ua.height=function(){return sa},ua.offset=function(){var a=ja.offset();return a.left+=oa.left,a.top+=oa.top,a},ua.getData=function(){return fa},ua.getAxes=function(){var b={};return a.each(ma.concat(na),function(a,c){c&&(b[c.direction+(1!=c.n?c.n:"")+"axis"]=c)}),b},ua.getXAxes=function(){return ma},ua.getYAxes=function(){return na},ua.c2p=o,ua.p2c=p,ua.getOptions=function(){return ga},ua.highlight=_,ua.unhighlight=aa,ua.triggerRedrawOverlay=Z,ua.pointOffset=function(a){return{left:parseInt(ma[m(a,"x")-1].p2c(+a.x)+oa.left),top:parseInt(na[m(a,"y")-1].p2c(+a.y)+oa.top)}},ua.shutdown=y,ua.resize=function(){u(),v(ha),v(ia)},ua.hooks=ta,h(ua),j(e),w(),k(d),D(),I(),x();var va=[],wa=null}function c(a,b){return b*Math.floor(a/b)}a.plot=function(c,d,e){var f=new b(a(c),d,e,a.plot.plugins);return f},a.plot.version="0.7",a.plot.plugins=[],a.plot.formatDate=function(a,b,c){var d=function(a){return a=""+a,1==a.length?"0"+a:a},e=[],f=!1,g=!1,h=a.getUTCHours(),i=12>h;null==c&&(c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),-1!=b.search(/%p|%P/)&&(h>12?h-=12:0==h&&(h=12));for(var j=0;j<b.length;++j){var k=b.charAt(j);if(f){switch(k){case"h":k=""+h;break;case"H":k=d(h);break;case"M":k=d(a.getUTCMinutes());break;case"S":k=d(a.getUTCSeconds());break;case"d":k=""+a.getUTCDate();break;case"m":k=""+(a.getUTCMonth()+1);break;case"y":k=""+a.getUTCFullYear();break;case"b":k=""+c[a.getUTCMonth()];break;case"p":k=i?"am":"pm";break;case"P":k=i?"AM":"PM";break;case"0":k="",g=!0}k&&g&&(k=d(k),g=!1),e.push(k),g||(f=!1)}else"%"==k?f=!0:e.push(k)}return e.join("")}}(jQuery),this.j$=this.jStat=function(a,b){function c(){return new c.fn.init(arguments)}var d=Array.prototype.slice,e=Object.prototype.toString,f=function(b,c){var d=b>c?b:c;return a.pow(10,17-~~(a.log(d>0?d:-d)*a.LOG10E))},g=Array.isArray||function(a){return"[object Array]"===e.call(a)},h=function(a){return"[object Function]"===e.call(a)},i=function(a){return"[object Number]"===e.call(a)&&!isNaN(a)},j=function(a){return[].concat.apply([],a)};return c.fn=c.prototype={constructor:c,init:function(a){var b=0;if(g(a[0]))if(g(a[0][0])){for(h(a[1])&&(a[0]=c.map(a[0],a[1]));b<a[0].length;b++)this[b]=a[0][b];this.length=a[0].length}else this[0]=h(a[1])?c.map(a[0],a[1]):a[0],this.length=1;else if(i(a[0]))this[0]=c.seq.apply(null,a),this.length=1;else{if(a[0]instanceof c)return c(a[0].toArray());this[0]=[],this.length=1}return this},length:0,toArray:function(){return this.length>1?d.call(this):d.call(this)[0]},push:[].push,sort:[].sort,splice:[].splice,slice:[].slice},c.fn.init.prototype=c.fn,c.utils={calcRdx:f,isArray:g,isFunction:h,isNumber:i,toVector:j},c.extend=function(a){var b,e=d.call(arguments),f=1;if(1===e.length){for(b in a)c[b]=a[b];return this}for(;f<e.length;f++)for(b in e[f])a[b]=e[f][b];return a},c.extend({rows:function(a){return a.length||1},cols:function(a){return a[0].length||1},dimensions:function(a){return{rows:c.rows(a),cols:c.cols(a)}},row:function(a,b){return a[b]},col:function(a,b){for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=[a[d][b]];return c},diag:function(a){for(var b=0,d=c.rows(a),e=new Array(d);d>b;b++)e[b]=[a[b][b]];return e},antidiag:function(a){for(var b=c.rows(a)-1,d=new Array(b),e=0;b>=0;b--,e++)d[e]=[a[e][b]];return d},transpose:function(a){var b,c,d,e=[],f=0;for(g(a[0])||(a=[a]),b=a.length,c=a[0].length;c>f;f++)for(e.push(new Array(b)),d=0;b>d;d++)e[f][d]=a[d][f];return 1===e.length?e[0]:e},map:function(a,b,c){var d,e,f,h,i=0;for(g(a[0])||(a=[a]),d=a.length,e=a[0].length,f=c?a:new Array(d);d>i;i++)for(f[i]||(f[i]=new Array(e)),h=0;e>h;h++)f[i][h]=b(a[i][h],i,h);return 1===f.length?f[0]:f},alter:function(a,b){return c.map(a,b,!0)},create:function(a,b,c){var d,e,f=new Array(a);for(h(b)&&(c=b,b=a),d=0;a>d;d++)for(f[d]=new Array(b),e=0;b>e;e++)f[d][e]=c(d,e);return f},zeros:function(a,b){return i(b)||(b=a),c.create(a,b,function(){return 0})},ones:function(a,b){return i(b)||(b=a),c.create(a,b,function(){return 1})},rand:function(b,d){return i(d)||(d=b),c.create(b,d,function(){return a.random()})},identity:function(a,b){return i(b)||(b=a),c.create(a,b,function(a,b){return a===b?1:0})},symmetric:function(a){var b,c=0,d=a.length;if(a.length!==a[0].length)return!1;for(;d>c;c++)for(b=0;d>b;b++)if(a[b][c]!==a[c][b])return!1;return!0},clear:function(a){return c.alter(a,function(){return 0})},seq:function(a,b,c,d){h(d)||(d=!1);for(var e=[],g=f(a,b),i=(b*g-a*g)/((c-1)*g),j=a,k=0;b>=j;k++,j=(a*g+i*g*k)/g)e.push(d?d(j,k):j);return e}}),function(a){for(var b=0;b<a.length;b++)(function(a){c.fn[a]=function(b){var d,e=this;return b?(setTimeout(function(){b.call(e,c.fn[a].call(e))},15),this):(d=c[a](this),g(d)?c(d):d)}})(a[b])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(a){for(var b=0;b<a.length;b++)(function(a){c.fn[a]=function(b,d){var e=this;return d?(setTimeout(function(){d.call(e,c.fn[a].call(e,b))},15),this):c(c[a](this,b))}})(a[b])}("row col".split(" ")),function(a){for(var b=0;b<a.length;b++)(function(a){c.fn[a]=function(){return c(c[a].apply(null,arguments))}})(a[b])}("create zeros ones rand identity".split(" ")),c.extend(c.fn,{map:function(a,b){return c(c.map(this,a,b))},alter:function(a){return c.alter(this,a),this}}),c}(Math),function(a,b){var c=a.utils.isFunction,d=function(a,b){return a-b};a.extend({sum:function(a){for(var b=0,c=a.length;--c>=0;)b+=a[c];return b},sumsqrd:function(a){for(var b=0,c=a.length;--c>=0;)b+=a[c]*a[c];return b},sumsqerr:function(b){for(var c,d=a.mean(b),e=0,f=b.length;--f>=0;)c=b[f]-d,e+=c*c;return e},product:function(a){for(var b=1,c=a.length;--c>=0;)b*=a[c];return b},min:function(a){for(var b=a[0],c=0;++c<a.length;)a[c]<b&&(b=a[c]);return b},max:function(a){for(var b=a[0],c=0;++c<a.length;)a[c]>b&&(b=a[c]);return b},mean:function(b){return a.sum(b)/b.length},meansqerr:function(b){return a.sumsqerr(b)/b.length},geomean:function(c){return b.pow(a.product(c),1/c.length)},median:function(a){var b=a.length,c=a.slice().sort(d);return 1&b?c[b/2|0]:(c[b/2-1]+c[b/2])/2},cumsum:function(a){var b=a.length,c=new Array(b),d=1;for(c[0]=a[0];b>d;d++)c[d]=c[d-1]+a[d];return c},diff:function(a){var b=[],c=a.length,d=1;for(d=1;c>d;d++)b.push(a[d]-a[d-1]);return b},mode:function(a){for(var b=a.length,c=a.slice().sort(d),e=1,f=0,g=0,h=0,i=[];b>h;h++)c[h]===c[h+1]?e++:(e>f?(i=[c[h]],f=e,g=0):e===f&&(i.push(c[h]),g++),e=1);return 0===g?i[0]:i},range:function(b){return a.max(b)-a.min(b)},variance:function(b,c){return a.sumsqerr(b)/(b.length-(c?1:0))},stdev:function(c,d){return b.sqrt(a.variance(c,d))},meandev:function(c){for(var d=0,e=a.mean(c),f=c.length-1;f>=0;f--)d+=b.abs(c[f]-e);return d/c.length},meddev:function(c){for(var d=0,e=a.median(c),f=c.length-1;f>=0;f--)d+=b.abs(c[f]-e);return d/c.length},coeffvar:function(b){return a.stdev(b)/a.mean(b)},quartiles:function(a){var c=a.length,e=a.slice().sort(d);return[e[b.round(c/4)-1],e[b.round(c/2)-1],e[b.round(3*c/4)-1]]},covariance:function(b,c){for(var d=a.mean(b),e=a.mean(c),f=b.length,g=new Array(f),h=0;f>h;h++)g[h]=(b[h]-d)*(c[h]-e);return a.sum(g)/(f-1)},corrcoeff:function(b,c){return a.covariance(b,c)/a.stdev(b,1)/a.stdev(c,1)}}),function(b){for(var d=0;d<b.length;d++)(function(b){a.fn[b]=function(d,e){var f=[],g=0,h=this;if(c(d)&&(e=d,d=!1),e)return setTimeout(function(){e.call(h,a.fn[b].call(h,d))},15),this;if(this.length>1){for(h=d===!0?this:this.transpose();g<h.length;g++)f[g]=a[b](h[g]);return d===!0?a[b](a.utils.toVector(f)):f}return a[b](this[0],d)}})(b[d])}("sum sumsqrd sumsqerr product min max mean meansqerr geomean median diff mode range variance stdev meandev meddev coeffvar quartiles".split(" ")),a.fn.cumsum=function(b,d){var e=[],f=0,g=this;if(c(b)&&(d=b,b=!1),d)return setTimeout(function(){d.call(g,a.fn.cumsum.call(g,b))},15),this;if(this.length>1){for(g=b===!0?this:this.transpose();f<g.length;f++)e[f]=a.cumsum(g[f]);return e}return a.cumsum(this[0],b)}}(this.jStat,Math),function(a,b){a.extend({gammaln:function(a){var c,d,e,f=0,g=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],h=1.000000000190015;for(e=(d=c=a)+5.5,e-=(c+.5)*b.log(e);6>f;f++)h+=g[f]/++d;return b.log(2.5066282746310007*h/c)-e},gammafn:function(a){var c,d,e,f,g=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],h=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],i=!1,j=0,k=0,l=0,m=a;if(0>=m){if(f=m%1+3.6e-16,!f)return 1/0;i=(1&m?-1:1)*b.PI/b.sin(b.PI*f),m=1-m}for(e=m,d=1>m?m++:(m-=j=(0|m)-1)-1,c=0;8>c;++c)l=(l+g[c])*d,k=k*d+h[c];if(f=l/k+1,m>e)f/=e;else if(e>m)for(c=0;j>c;++c)f*=m,m++;return i&&(f=i/f),f},gammap:function(c,d){var e,f=a.gammaln(c),g=c,h=1/c,i=h,j=d+1-c,k=1/1e-30,l=1/j,m=l,n=1,o=-~(8.5*b.log(c>=1?c:1/c)+.4*c+17);if(0>d||0>=c)return NaN;if(c+1>d){for(;o>=n;n++)h+=i*=d/++g;return h*b.exp(-d+c*b.log(d)-f)}for(;o>=n;n++)e=-n*(n-c),j+=2,l=e*l+j,k=j+e/k,l=1/l,m*=l*k;return 1-m*b.exp(-d+c*b.log(d)-f)},factorialln:function(b){return 0>b?NaN:a.gammaln(b+1)},factorial:function(b){return 0>b?NaN:a.gammafn(b+1)},combination:function(c,d){return c>170||d>170?b.exp(a.combinationln(c,d)):a.factorial(c)/a.factorial(d)/a.factorial(c-d)},combinationln:function(b,c){return a.factorialln(b)-a.factorialln(c)-a.factorialln(b-c)},permutation:function(b,c){return a.factorial(b)/a.factorial(b-c)},betafn:function(c,d){return 0>=c||0>=d?void 0:c+d>170?b.exp(a.betaln(c,d)):a.gammafn(c)*a.gammafn(d)/a.gammafn(c+d)},betaln:function(b,c){
return a.gammaln(b)+a.gammaln(c)-a.gammaln(b+c)},betacf:function(a,c,d){var e,f,g,h,i,j,k,l,m,n=1e-30,o=1;for(k=c+d,m=c+1,l=c-1,g=1,h=1-k*a/m,b.abs(h)<n&&(h=n),h=1/h,j=h;100>=o&&(e=2*o,f=o*(d-o)*a/((l+e)*(c+e)),h=1+f*h,b.abs(h)<n&&(h=n),g=1+f/g,b.abs(g)<n&&(g=n),h=1/h,j*=h*g,f=-(c+o)*(k+o)*a/((c+e)*(m+e)),h=1+f*h,b.abs(h)<n&&(h=n),g=1+f/g,b.abs(g)<n&&(g=n),h=1/h,i=h*g,j*=i,!(b.abs(i-1)<3e-7));o++);return j},gammapinv:function(c,d){var e,f,g,h,i,j,k,l=0,m=d-1,n=1e-8,o=a.gammaln(d);if(c>=1)return b.max(100,d+100*b.sqrt(d));if(0>=c)return 0;for(d>1?(j=b.log(m),k=b.exp(m*(j-1)-o),i=.5>c?c:1-c,g=b.sqrt(-2*b.log(i)),e=(2.30753+.27061*g)/(1+g*(.99229+.04481*g))-g,.5>c&&(e=-e),e=b.max(.001,d*b.pow(1-1/(9*d)-e/(3*b.sqrt(d)),3))):(g=1-d*(.253+.12*d),e=g>c?b.pow(c/g,1/d):1-b.log(1-(c-g)/(1-g)));12>l;l++){if(0>=e)return 0;if(f=a.gammap(d,e)-c,g=d>1?k*b.exp(-(e-m)+m*(b.log(e)-j)):b.exp(-e+m*b.log(e)-o),h=f/g,e-=g=h/(1-.5*b.min(1,h*((d-1)/e-1))),0>=e&&(e=.5*(e+g)),b.abs(g)<n*e)break}return e},erf:function(a){var c,d,e,f,g=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,1.5626441722e-8,-8.5238095915e-8,6.529054439e-9,5.059343495e-9,-9.91364156e-10,-2.27365122e-10,9.6467911e-11,2.394038e-12,-6.886027e-12,8.94487e-13,3.13092e-13,-1.12708e-13,3.81e-16,7.106e-15,-1.523e-15,-9.4e-17,1.21e-16,-2.8e-17],h=g.length-1,i=!1,j=0,k=0;for(0>a&&(a=-a,i=!0),c=2/(2+a),d=4*c-2;h>0;h--)e=j,j=d*j-k+g[h],k=e;return f=c*b.exp(-a*a+.5*(g[0]+d*j)-k),i?f-1:1-f},erfc:function(b){return 1-a.erf(b)},erfcinv:function(c){var d,e,f,g,h=0;if(c>=2)return-100;if(0>=c)return 100;for(g=1>c?c:2-c,f=b.sqrt(-2*b.log(g/2)),d=-.70711*((2.30753+.27061*f)/(1+f*(.99229+.04481*f))-f);2>h;h++)e=a.erfc(d)-g,d+=e/(1.1283791670955126*b.exp(-d*d)-d*e);return 1>c?d:-d},ibetainv:function(c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=1e-8,r=d-1,s=e-1,t=0;if(0>=c)return 0;if(c>=1)return 1;for(d>=1&&e>=1?(h=.5>c?c:1-c,i=b.sqrt(-2*b.log(h)),l=(2.30753+.27061*i)/(1+i*(.99229+.04481*i))-i,.5>c&&(l=-l),m=(l*l-3)/6,n=2/(1/(2*d-1)+1/(2*e-1)),o=l*b.sqrt(m+n)/n-(1/(2*e-1)-1/(2*d-1))*(m+5/6-2/(3*n)),l=d/(d+e*b.exp(2*o))):(f=b.log(d/(d+e)),g=b.log(e/(d+e)),i=b.exp(d*f)/d,j=b.exp(e*g)/e,o=i+j,l=i/o>c?b.pow(d*o*c,1/d):1-b.pow(e*o*(1-c),1/e)),p=-a.gammaln(d)-a.gammaln(e)+a.gammaln(d+e);10>t;t++){if(0===l||1===l)return l;if(k=a.ibeta(l,d,e)-c,i=b.exp(r*b.log(l)+s*b.log(1-l)+p),j=k/i,l-=i=j/(1-.5*b.min(1,j*(r/l-s/(1-l)))),0>=l&&(l=.5*(l+i)),l>=1&&(l=.5*(l+i+1)),b.abs(i)<q*l&&t>0)break}return l},ibeta:function(c,d,e){var f=0===c||1===c?0:b.exp(a.gammaln(d+e)-a.gammaln(d)-a.gammaln(e)+d*b.log(c)+e*b.log(1-c));return 0>c||c>1?!1:(d+1)/(d+e+2)>c?f*a.betacf(c,d,e)/d:1-f*a.betacf(1-c,e,d)/e},randn:function(c,d){var e,f,g,h,i;if(d||(d=c),c)return a.create(c,d,function(){return a.randn()});do e=b.random(),f=1.7156*(b.random()-.5),g=e-.449871,h=b.abs(f)+.386595,i=g*g+h*(.196*h-.25472*g);while(i>.27597&&(i>.27846||f*f>-4*b.log(e)*e*e));return f/e},randg:function(c,d,e){var f,g,h,i,j,k,l=c;if(e||(e=d),c||(c=1),d)return k=a.zeros(d,e),k.alter(function(){return a.randg(c)}),k;1>c&&(c+=1),f=c-1/3,g=1/b.sqrt(9*f);do{do j=a.randn(),i=1+g*j;while(0>=i);i=i*i*i,h=b.random()}while(h>1-.331*b.pow(j,4)&&b.log(h)>.5*j*j+f*(1-i+b.log(i)));if(c==l)return f*i;do h=b.random();while(0===h);return b.pow(h,1/l)*f*i}}),function(b){for(var c=0;c<b.length;c++)(function(b){a.fn[b]=function(){return a(a.map(this,function(c){return a[b](c)}))}})(b[c])}("gammaln gammafn factorial factorialln".split(" ")),function(b){for(var c=0;c<b.length;c++)(function(b){a.fn[b]=function(){return a(a[b].apply(null,arguments))}})(b[c])}("randn".split(" "))}(this.jStat,Math),function(a,b){!function(b){for(var c=0;c<b.length;c++)(function(b){a[b]=function(a,b,c){return this instanceof arguments.callee?(this._a=a,this._b=b,this._c=c,this):new arguments.callee(a,b,c)},a.fn[b]=function(c,d,e){var f=a[b](c,d,e);return f.data=this,f},a[b].prototype.sample=function(c){var d=this._a,e=this._b,f=this._c;return c?a.alter(c,function(){return a[b].sample(d,e,f)}):a[b].sample(d,e,f)},function(c){for(var d=0;d<c.length;d++)(function(c){a[b].prototype[c]=function(d){var e=this._a,f=this._b,g=this._c;return d||(d=this.data),"number"!=typeof d?a.fn.map.call(d,function(d){return a[b][c](d,e,f,g)}):a[b][c](d,e,f,g)}})(c[d])}("pdf cdf inv".split(" ")),function(c){for(var d=0;d<c.length;d++)(function(c){a[b].prototype[c]=function(){return a[b][c](this._a,this._b,this._c)}})(c[d])}("mean median mode variance".split(" "))})(b[c])}("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy lognormal normal pareto studentt weibull uniform  binomial negbin hypgeom poisson triangular".split(" ")),a.extend(a.beta,{pdf:function(c,d,e){return c>1||0>c?0:b.pow(c,d-1)*b.pow(1-c,e-1)/a.betafn(d,e)},cdf:function(b,c,d){return b>1||0>b?1*(b>1):a.ibeta(b,c,d)},inv:function(b,c,d){return a.ibetainv(b,c,d)},mean:function(a,b){return a/(a+b)},median:function(a,b){},mode:function(a,c){return a*c/(b.pow(a+c,2)*(a+c+1))},sample:function(b,c){var d=a.randg(b);return d/(d+a.randg(c))},variance:function(a,c){return a*c/(b.pow(a+c,2)*(a+c+1))}}),a.extend(a.centralF,{pdf:function(c,d,e){return c>=0?b.sqrt(b.pow(d*c,d)*b.pow(e,e)/b.pow(d*c+e,d+e))/(c*a.betafn(d/2,e/2)):void 0},cdf:function(b,c,d){return a.ibeta(c*b/(c*b+d),c/2,d/2)},inv:function(b,c,d){return d/(c*(1/a.ibetainv(b,c/2,d/2)-1))},mean:function(a,b){return b>2?b/(b-2):void 0},mode:function(a,b){return a>2?b*(a-2)/(a*(b+2)):void 0},sample:function(b,c){var d=2*a.randg(b/2),e=2*a.randg(c/2);return d/b/(e/c)},variance:function(a,b){return b>4?2*b*b*(a+b-2)/(a*(b-2)*(b-2)*(b-4)):void 0}}),a.extend(a.cauchy,{pdf:function(a,c,d){return d/(b.pow(a-c,2)+b.pow(d,2))/b.PI},cdf:function(a,c,d){return b.atan((a-c)/d)/b.PI+.5},inv:function(a,c,d){return c+d*b.tan(b.PI*(a-.5))},median:function(a,b){return a},mode:function(a,b){return a},sample:function(c,d){return a.randn()*b.sqrt(1/(2*a.randg(.5)))*d+c}}),a.extend(a.chisquare,{pdf:function(c,d){return b.exp((d/2-1)*b.log(c)-c/2-d/2*b.log(2)-a.gammaln(d/2))},cdf:function(b,c){return a.gammap(c/2,b/2)},inv:function(b,c){return 2*a.gammapinv(b,.5*c)},mean:function(a){return a},median:function(a){return a*b.pow(1-2/(9*a),3)},mode:function(a){return a-2>0?a-2:0},sample:function(b){return 2*a.randg(b/2)},variance:function(a){return 2*a}}),a.extend(a.exponential,{pdf:function(a,c){return 0>a?0:c*b.exp(-c*a)},cdf:function(a,c){return 0>a?0:1-b.exp(-c*a)},inv:function(a,c){return-b.log(1-a)/c},mean:function(a){return 1/a},median:function(a){return 1/a*b.log(2)},mode:function(a){return 0},sample:function(a){return-1/a*b.log(b.random())},variance:function(a){return b.pow(a,-2)}}),a.extend(a.gamma,{pdf:function(c,d,e){return b.exp((d-1)*b.log(c)-c/e-a.gammaln(d)-d*b.log(e))},cdf:function(b,c,d){return a.gammap(c,b/d)},inv:function(b,c,d){return a.gammapinv(b,c)*d},mean:function(a,b){return a*b},mode:function(a,b){return a>1?(a-1)*b:void 0},sample:function(b,c){return a.randg(b)*c},variance:function(a,b){return a*b*b}}),a.extend(a.invgamma,{pdf:function(c,d,e){return b.exp(-(d+1)*b.log(c)-e/c-a.gammaln(d)+d*b.log(e))},cdf:function(b,c,d){return 1-a.gammap(c,d/b)},inv:function(b,c,d){return d/a.gammapinv(1-b,c)},mean:function(a,b){return a>1?b/(a-1):void 0},mode:function(a,b){return b/(a+1)},sample:function(b,c){return c/a.randg(b)},variance:function(a,b){return a>2?b*b/((a-1)*(a-1)*(a-2)):void 0}}),a.extend(a.kumaraswamy,{pdf:function(a,c,d){return b.exp(b.log(c)+b.log(d)+(c-1)*b.log(a)+(d-1)*b.log(1-b.pow(a,c)))},cdf:function(a,c,d){return 1-b.pow(1-b.pow(a,c),d)},mean:function(b,c){return c*a.gammafn(1+1/b)*a.gammafn(c)/a.gammafn(1+1/b+c)},median:function(a,c){return b.pow(1-b.pow(2,-1/c),1/a)},mode:function(a,c){return a>=1&&c>=1&&1!==a&&1!==c?b.pow((a-1)/(a*c-1),1/a):void 0},variance:function(a,b){}}),a.extend(a.lognormal,{pdf:function(a,c,d){return b.exp(-b.log(a)-.5*b.log(2*b.PI)-b.log(d)-b.pow(b.log(a)-c,2)/(2*d*d))},cdf:function(c,d,e){return.5+.5*a.erf((b.log(c)-d)/b.sqrt(2*e*e))},inv:function(c,d,e){return b.exp(-1.4142135623730951*e*a.erfcinv(2*c)+d)},mean:function(a,c){return b.exp(a+c*c/2)},median:function(a,c){return b.exp(a)},mode:function(a,c){return b.exp(a-c*c)},sample:function(c,d){return b.exp(a.randn()*d+c)},variance:function(a,c){return(b.exp(c*c)-1)*b.exp(2*a+c*c)}}),a.extend(a.normal,{pdf:function(a,c,d){return b.exp(-.5*b.log(2*b.PI)-b.log(d)-b.pow(a-c,2)/(2*d*d))},cdf:function(c,d,e){return.5*(1+a.erf((c-d)/b.sqrt(2*e*e)))},inv:function(b,c,d){return-1.4142135623730951*d*a.erfcinv(2*b)+c},mean:function(a,b){return a},median:function(a,b){return a},mode:function(a,b){return a},sample:function(b,c){return a.randn()*c+b},variance:function(a,b){return b*b}}),a.extend(a.pareto,{pdf:function(a,c,d){return a>c?d*b.pow(c,d)/b.pow(a,d+1):void 0},cdf:function(a,c,d){return 1-b.pow(c/a,d)},mean:function(a,c){return c>1?c*b.pow(a,c)/(c-1):void 0},median:function(a,c){return a*c*b.SQRT2},mode:function(a,b){return a},variance:function(a,c){return c>2?a*a*c/(b.pow(c-1,2)*(c-2)):void 0}}),a.extend(a.studentt,{pdf:function(c,d){return a.gammafn((d+1)/2)/(b.sqrt(d*b.PI)*a.gammafn(d/2))*b.pow(1+c*c/d,-((d+1)/2))},cdf:function(c,d){var e=d/2;return a.ibeta((c+b.sqrt(c*c+d))/(2*b.sqrt(c*c+d)),e,e)},inv:function(c,d){var e=a.ibetainv(2*b.min(c,1-c),.5*d,.5);return e=b.sqrt(d*(1-e)/e),c>0?e:-e},mean:function(a){return a>1?0:void 0},median:function(a){return 0},mode:function(a){return 0},sample:function(c){return a.randn()*b.sqrt(c/(2*a.randg(c/2)))},variance:function(a){return a>2?a/(a-2):a>1?1/0:void 0}}),a.extend(a.weibull,{pdf:function(a,c,d){return 0>a?0:d/c*b.pow(a/c,d-1)*b.exp(-b.pow(a/c,d))},cdf:function(a,c,d){return 0>a?0:1-b.exp(-b.pow(a/c,d))},inv:function(a,c,d){return c*b.pow(-b.log(1-a),1/d)},mean:function(b,c){return b*a.gammafn(1+1/c)},median:function(a,c){return a*b.pow(b.log(2),1/c)},mode:function(a,c){return c>1?a*b.pow((c-1)/c,1/c):void 0},sample:function(a,c){return a*b.pow(-b.log(b.random()),1/c)},variance:function(c,d){return c*c*a.gammafn(1+2/d)-b.pow(this.mean(c,d),2)}}),a.extend(a.uniform,{pdf:function(a,b,c){return b>a||a>c?0:1/(c-b)},cdf:function(a,b,c){return b>a?0:c>a?(a-b)/(c-b):1},mean:function(a,b){return.5*(a+b)},median:function(b,c){return a.mean(b,c)},mode:function(a,b){},sample:function(a,c){return a/2+c/2+(c/2-a/2)*(2*b.random()-1)},variance:function(a,c){return b.pow(c-a,2)/12}}),a.extend(a.binomial,{pdf:function(c,d,e){return 0===e||1===e?d*e===c?1:0:a.combination(d,c)*b.pow(e,c)*b.pow(1-e,d-c)},cdf:function(b,c,d){var e=[],f=0;if(0>b)return 0;if(c>b){for(;b>=f;f++)e[f]=a.binomial.pdf(f,c,d);return a.sum(e)}return 1}}),a.extend(a.negbin,{pdf:function(c,d,e){return c!==c|0?!1:0>c?0:a.combination(c+d-1,c)*b.pow(1-e,d)*b.pow(e,c)},cdf:function(b,c,d){var e=0,f=0;if(0>b)return 0;for(;b>=f;f++)e+=a.negbin.pdf(f,c,d);return e}}),a.extend(a.hypgeom,{pdf:function(b,c,d,e){return b!==b|0?!1:0>b?0:a.combination(d,b)*a.combination(c-d,e-b)/a.combination(c,e)},cdf:function(b,c,d,e){var f=0,g=0;if(0>b)return 0;for(;b>=g;g++)f+=a.hypgeom.pdf(g,c,d,e);return f}}),a.extend(a.poisson,{pdf:function(c,d){return b.pow(d,c)*b.exp(-d)/a.factorial(c)},cdf:function(b,c){var d=[],e=0;if(0>b)return 0;for(;b>=e;e++)d.push(a.poisson.pdf(e,c));return a.sum(d)},mean:function(a){return a},variance:function(a){return a},sample:function(a){var c=1,d=0,e=b.exp(-a);do d++,c*=b.random();while(c>e);return d-1}}),a.extend(a.triangular,{pdf:function(a,b,c,d){return b>=c||b>d||d>c?void 0:b>a||a>c?0:d>=a?2*(a-b)/((c-b)*(d-b)):2*(c-a)/((c-b)*(c-d))},cdf:function(a,c,d,e){return c>=d||c>e||e>d?void 0:c>a?0:e>=a?b.pow(a-c,2)/((d-c)*(e-c)):1-b.pow(d-a,2)/((d-c)*(d-e))},mean:function(a,b,c){return(a+b+c)/3},median:function(a,c,d){return(a+c)/2>=d?c-b.sqrt((c-a)*(c-d))/b.sqrt(2):d>(a+c)/2?a+b.sqrt((c-a)*(d-a))/b.sqrt(2):void 0},mode:function(a,b,c){return c},sample:function(a,c,d){var e=b.random();return(d-a)/(c-a)>e?a+b.sqrt(e*(c-a)*(d-a)):c-b.sqrt((1-e)*(c-a)*(c-d))},variance:function(a,b,c){return(a*a+b*b+c*c-a*b-a*c-b*c)/18}})}(this.jStat,Math),function(a,b){var d=Array.prototype.push,e=a.utils.isArray;a.extend({add:function(b,c){return e(c)?(e(c[0])||(c=[c]),a.map(b,function(a,b,d){return a+c[b][d]})):a.map(b,function(a){return a+c})},subtract:function(b,c){return e(c)?(e(c[0])||(c=[c]),a.map(b,function(a,b,d){return a-c[b][d]||0})):a.map(b,function(a){return a-c})},divide:function(b,c){return e(c)?(e(c[0])||(c=[c]),a.multiply(b,a.inv(c))):a.map(b,function(a){return a/c})},multiply:function(b,c){var d,f,g,h,i=b.length,j=b[0].length,k=a.zeros(i,g=e(c)?c[0].length:j),l=0;if(e(c)){for(;g>l;l++)for(d=0;i>d;d++){for(h=0,f=0;j>f;f++)h+=b[d][f]*c[f][l];k[d][l]=h}return 1===i&&1===l?k[0][0]:k}return a.map(b,function(a){return a*c})},dot:function(b,c){e(b[0])||(b=[b]),e(c[0])||(c=[c]);for(var d,f,g=1===b[0].length&&1!==b.length?a.transpose(b):b,h=1===c[0].length&&1!==c.length?a.transpose(c):c,i=[],j=0,k=g.length,l=g[0].length;k>j;j++){for(i[j]=[],d=0,f=0;l>f;f++)d+=g[j][f]*h[j][f];i[j]=d}return 1===i.length?i[0]:i},pow:function(c,d){return a.map(c,function(a){return b.pow(a,d)})},abs:function(c){return a.map(c,function(a){return b.abs(a)})},norm:function(a,c){var d=0,f=0;for(isNaN(c)&&(c=2),e(a[0])&&(a=a[0]);f<a.length;f++)d+=b.pow(b.abs(a[f]),c);return b.pow(d,1/c)},angle:function(c,d){return b.acos(a.dot(c,d)/(a.norm(c)*a.norm(d)))},aug:function(a,b){for(var c=a.slice(),e=0;e<c.length;e++)d.apply(c[e],b[e]);return c},inv:function(b){for(var c,d=b.length,e=b[0].length,f=a.identity(d,e),g=a.gauss_jordan(b,f),h=[],i=0;d>i;i++)for(h[i]=[],c=e-1;c<g[0].length;c++)h[i][c-e]=g[i][c];return h},det:function(a){var b,c=a.length,d=2*c,e=new Array(d),f=c-1,g=d-1,h=f-c+1,i=g,j=0,k=0;if(2===c)return a[0][0]*a[1][1]-a[0][1]*a[1][0];for(;d>j;j++)e[j]=1;for(j=0;c>j;j++){for(b=0;c>b;b++)e[0>h?h+c:h]*=a[j][b],e[c>i?i+c:i]*=a[j][b],h++,i--;h=--f-c+1,i=--g}for(j=0;c>j;j++)k+=e[j];for(;d>j;j++)k-=e[j];return k},gauss_elimination:function(c,d){var e,f,g,h,i=0,j=0,k=c.length,l=c[0].length,m=1,n=0,o=[];for(c=a.aug(c,d),e=c[0].length;k>i;i++){for(f=c[i][i],j=i,h=i+1;l>h;h++)f<b.abs(c[h][i])&&(f=c[h][i],j=h);if(j!=i)for(h=0;e>h;h++)g=c[i][h],c[i][h]=c[j][h],c[j][h]=g;for(j=i+1;k>j;j++)for(m=c[j][i]/c[i][i],h=i;e>h;h++)c[j][h]=c[j][h]-m*c[i][h]}for(i=k-1;i>=0;i--){for(n=0,j=i+1;k-1>=j;j++)n=o[j]*c[i][j];o[i]=(c[i][e-1]-n)/c[i][i]}return o},gauss_jordan:function(d,e){for(var f=a.aug(d,e),g=f.length,h=f[0].length,i=0;g>i;i++){for(var j=i,k=i+1;g>k;k++)b.abs(f[k][i])>b.abs(f[j][i])&&(j=k);var l=f[i];f[i]=f[j],f[j]=l;for(var k=i+1;g>k;k++){c=f[k][i]/f[i][i];for(var m=i;h>m;m++)f[k][m]-=f[i][m]*c}}for(var i=g-1;i>=0;i--){c=f[i][i];for(var k=0;i>k;k++)for(var m=h-1;m>i-1;m--)f[k][m]-=f[i][m]*f[k][i]/c;f[i][i]/=c;for(var m=g;h>m;m++)f[i][m]/=c}return f},lu:function(a,b){},cholesky:function(a,b){},gauss_jacobi:function(c,d,e,f){for(var g,h,i,j,k=0,l=0,m=c.length,n=[],o=[],p=[];m>k;k++)for(n[k]=[],o[k]=[],p[k]=[],l=0;m>l;l++)k>l?(n[k][l]=c[k][l],o[k][l]=p[k][l]=0):l>k?(o[k][l]=c[k][l],n[k][l]=p[k][l]=0):(p[k][l]=c[k][l],n[k][l]=o[k][l]=0);for(i=a.multiply(a.multiply(a.inv(p),a.add(n,o)),-1),h=a.multiply(a.inv(p),d),g=e,j=a.add(a.multiply(i,e),h),k=2;b.abs(a.norm(a.subtract(j,g)))>f;)g=j,j=a.add(a.multiply(i,g),h),k++;return j},gauss_seidel:function(c,d,e,f){for(var g,h,i,j,k,l=0,m=c.length,n=[],o=[],p=[];m>l;l++)for(n[l]=[],o[l]=[],p[l]=[],g=0;m>g;g++)l>g?(n[l][g]=c[l][g],o[l][g]=p[l][g]=0):g>l?(o[l][g]=c[l][g],n[l][g]=p[l][g]=0):(p[l][g]=c[l][g],n[l][g]=o[l][g]=0);for(j=a.multiply(a.multiply(a.inv(a.add(p,n)),o),-1),i=a.multiply(a.inv(a.add(p,n)),d),h=e,k=a.add(a.multiply(j,e),i),l=2;b.abs(a.norm(a.subtract(k,h)))>f;)h=k,k=a.add(a.multiply(j,h),i),l+=1;return k},SOR:function(c,d,e,f,g){for(var h,i,j,k,l,m=0,n=c.length,o=[],p=[],q=[];n>m;m++)for(o[m]=[],p[m]=[],q[m]=[],h=0;n>h;h++)m>h?(o[m][h]=c[m][h],p[m][h]=q[m][h]=0):h>m?(p[m][h]=c[m][h],o[m][h]=q[m][h]=0):(q[m][h]=c[m][h],o[m][h]=p[m][h]=0);for(k=a.multiply(a.inv(a.add(q,a.multiply(o,g))),a.subtract(a.multiply(q,1-g),a.multiply(p,g))),j=a.multiply(a.multiply(a.inv(a.add(q,a.multiply(o,g))),d),g),i=e,l=a.add(a.multiply(k,e),j),m=2;b.abs(a.norm(a.subtract(l,i)))>f;)i=l,l=a.add(a.multiply(k,i),j),m++;return l},householder:function(c){for(var d,e,f,g,h,i=c.length,j=c[0].length,k=0,l=[],m=[];i-1>k;k++){for(d=0,g=k+1;j>g;g++)d+=c[g][k]*c[g][k];for(h=c[k+1][k]>0?-1:1,d=h*b.sqrt(d),e=b.sqrt((d*d-c[k+1][k]*d)/2),l=a.zeros(i,1),l[k+1][0]=(c[k+1][k]-d)/(2*e),f=k+2;i>f;f++)l[f][0]=c[f][k]/(2*e);m=a.subtract(a.identity(i,j),a.multiply(a.multiply(l,a.transpose(l)),2)),c=a.multiply(m,a.multiply(c,m))}return c},QR:function(c,d){for(var e,f,g,h,i,j,k=c.length,l=c[0].length,m=0,n=[],o=[],p=[];k-1>m;m++){for(f=0,e=m+1;l>e;e++)f+=c[e][m]*c[e][m];for(i=c[m+1][m]>0?-1:1,f=i*b.sqrt(f),g=b.sqrt((f*f-c[m+1][m]*f)/2),n=a.zeros(k,1),n[m+1][0]=(c[m+1][m]-f)/(2*g),h=m+2;k>h;h++)n[h][0]=c[h][m]/(2*g);o=a.subtract(a.identity(k,l),a.multiply(a.multiply(n,a.transpose(n)),2)),c=a.multiply(o,c),d=a.multiply(o,d)}for(m=k-1;m>=0;m--){for(j=0,e=m+1;l-1>=e;e++)j=p[e]*c[m][e];p[m]=d[m][0]/c[m][m]}return p},jacobi:function(c){for(var d,e,f,g,h,i,j,k,l=1,m=0,n=c.length,o=a.identity(n,n),p=[];1===l;){for(m++,i=c[0][1],g=0,h=1,e=0;n>e;e++)for(f=0;n>f;f++)e!=f&&i<b.abs(c[e][f])&&(i=b.abs(c[e][f]),g=e,h=f);for(j=c[g][g]===c[h][h]?c[g][h]>0?b.PI/4:-b.PI/4:b.atan(2*c[g][h]/(c[g][g]-c[h][h]))/2,k=a.identity(n,n),k[g][g]=b.cos(j),k[g][h]=-b.sin(j),k[h][g]=b.sin(j),k[h][h]=b.cos(j),o=a.multiply(o,k),d=a.multiply(a.multiply(a.inv(k),c),k),c=d,l=0,e=1;n>e;e++)for(f=1;n>f;f++)e!=f&&b.abs(c[e][f])>.001&&(l=1)}for(e=0;n>e;e++)p.push(c[e][e]);return[o,p]},rungekutta:function(a,b,c,d,e,f){var g,h,i,j,k;if(2===f)for(;c>=d;)g=b*a(d,e),h=b*a(d+b,e+g),i=e+(g+h)/2,e=i,d+=b;if(4===f)for(;c>=d;)g=b*a(d,e),h=b*a(d+b/2,e+g/2),j=b*a(d+b/2,e+h/2),k=b*a(d+b,e+j),i=e+(g+2*h+2*j+k)/6,e=i,d+=b;return e},romberg:function(a,c,d,e){for(var f,g,h,i,j,k=0,l=(d-c)/2,m=[],n=[],o=[];e/2>k;){for(j=a(c),h=c,i=0;d>=h;h+=l,i++)m[i]=h;for(f=m.length,h=1;f-1>h;h++)j+=(h%2!==0?4:2)*a(m[h]);j=l/3*(j+a(d)),o[k]=j,l/=2,k++}for(g=o.length,f=1;1!==g;){for(h=0;g-1>h;h++)n[h]=(b.pow(4,f)*o[h+1]-o[h])/(b.pow(4,f)-1);g=n.length,o=n,n=[],f++}return o},richardson:function(a,c,d,e){function f(a,b){for(var c,d=0,e=a.length;e>d;d++)a[d]===b&&(c=d);return c}for(var g,h,i,j,k,l=(a.length,b.abs(d-a[f(a,d)+1])),m=0,n=[],o=[];e>=l;)g=f(a,d+e),h=f(a,d),n[m]=(c[g]-2*c[h]+c[2*h-g])/(e*e),e/=2,m++;for(j=n.length,i=1;1!=j;){for(k=0;j-1>k;k++)o[k]=(b.pow(4,i)*n[k+1]-n[k])/(b.pow(4,i)-1);j=o.length,n=o,o=[],i++}return n},simpson:function(a,b,c,d){for(var e,f=(c-b)/d,g=a(b),h=[],i=b,j=0,k=1;c>=i;i+=f,j++)h[j]=i;for(e=h.length;e-1>k;k++)g+=(k%2!==0?4:2)*a(h[k]);return f/3*(g+a(c))},hermite:function(a,b,c,d){for(var e,f=a.length,g=0,h=0,i=[],j=[],k=[],l=[];f>h;h++){for(i[h]=1,e=0;f>e;e++)h!=e&&(i[h]*=(d-a[e])/(a[h]-a[e]));for(j[h]=0,e=0;f>e;e++)h!=e&&(j[h]+=1/(a[h]-a[e]));k[h]=(1-2*(d-a[h])*j[h])*i[h]*i[h],l[h]=(d-a[h])*i[h]*i[h],g+=k[h]*b[h]+l[h]*c[h]}return g},lagrange:function(a,b,c){for(var d,e,f=0,g=0,h=a.length;h>g;g++){for(e=b[g],d=0;h>d;d++)g!=d&&(e*=(c-a[d])/(a[g]-a[d]));f+=e}return f},cubic_spline:function(b,c,d){for(var e,f=b.length,g=0,h=[],i=[],j=[],k=[],l=[],m=[],n=[];f-1>g;g++)l[g]=b[g+1]-b[g];for(j[0]=0,g=1;f-1>g;g++)j[g]=3/l[g]*(c[g+1]-c[g])-3/l[g-1]*(c[g]-c[g-1]);for(g=1;f-1>g;g++)h[g]=[],i[g]=[],h[g][g-1]=l[g-1],h[g][g]=2*(l[g-1]+l[g]),h[g][g+1]=l[g],i[g][0]=j[g];for(k=a.multiply(a.inv(h),i),e=0;f-1>e;e++)m[e]=(c[e+1]-c[e])/l[e]-l[e]*(k[e+1][0]+2*k[e][0])/3,n[e]=(k[e+1][0]-k[e][0])/(3*l[e]);for(e=0;f>e&&!(b[e]>d);e++);return e-=1,c[e]+(d-b[e])*m[e]+a.sq(d-b[e])*k[e]+(d-b[e])*a.sq(d-b[e])*n[e]},gauss_quadrature:function(){},PCA:function(b){var c,d,e=b.length,f=b[0].length,g=0,h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=[],p=[],q=[];for(g=0;e>g;g++)h[g]=a.sum(b[g])/f;for(g=0;f>g;g++)for(n[g]=[],c=0;e>c;c++)n[g][c]=b[c][g]-h[c];for(n=a.transpose(n),g=0;e>g;g++)for(o[g]=[],c=0;e>c;c++)o[g][c]=a.dot([n[g]],[n[c]])/(f-1);for(j=a.jacobi(o),p=j[0],i=j[1],q=a.transpose(p),g=0;g<i.length;g++)for(c=g;c<i.length;c++)i[g]<i[c]&&(d=i[g],i[g]=i[c],i[c]=d,k=q[g],q[g]=q[c],q[c]=k);for(m=a.transpose(n),g=0;e>g;g++)for(l[g]=[],c=0;c<m.length;c++)l[g][c]=a.dot([q[g]],[m[c]]);return[b,i,q,l]}}),function(b){for(var c=0;c<b.length;c++)(function(b){a.fn[b]=function(c,d){var e=this;return d?(setTimeout(function(){d.call(e,a.fn[b].call(e,c))},15),this):a(a[b](this,c))}})(b[c])}("add divide multiply subtract dot pow abs norm angle".split(" "))}(this.jStat,Math),function(a,b){var c=[].slice,d=a.utils.isNumber;a.extend({zscore:function(){var b=c.call(arguments);return d(b[1])?(b[0]-b[1])/b[2]:(b[0]-a.mean(b[1]))/a.stdev(b[1],b[2])},ztest:function(){var e=c.call(arguments);if(4===e.length){if(d(e[1])){var f=a.zscore(e[0],e[1],e[2]);return 1===e[3]?a.normal.cdf(-b.abs(f),0,1):2*a.normal.cdf(-b.abs(f),0,1)}var f=e[0];return 1===e[2]?a.normal.cdf(-b.abs(f),0,1):2*a.normal.cdf(-b.abs(f),0,1)}var f=a.zscore(e[0],e[1],e[3]);return 1===e[1]?a.normal.cdf(-b.abs(f),0,1):2*a.normal.cdf(-b.abs(f),0,1)}}),a.extend(a.fn,{zscore:function(a,b){return(a-this.mean())/this.stdev(b)},ztest:function(c,d,e){var f=b.abs(this.zscore(c,e));return 1===d?a.normal.cdf(-f,0,1):2*a.normal.cdf(-f,0,1)}}),a.extend({tscore:function(){var d=c.call(arguments);return 4===d.length?(d[0]-d[1])/(d[2]/b.sqrt(d[3])):(d[0]-a.mean(d[1]))/(a.stdev(d[1],!0)/b.sqrt(d[1].length))},ttest:function(){var e,f=c.call(arguments);return 5===f.length?(e=b.abs(a.tscore(f[0],f[1],f[2],f[3])),1===f[4]?a.studentt.cdf(-e,f[3]-1):2*a.studentt.cdf(-e,f[3]-1)):d(f[1])?(e=b.abs(f[0]),1==f[2]?a.studentt.cdf(-e,f[1]-1):2*a.studentt.cdf(-e,f[1]-1)):(e=b.abs(a.tscore(f[0],f[1])),1==f[2]?a.studentt.cdf(-e,f[1].length-1):2*a.studentt.cdf(-e,f[1].length-1))}}),a.extend(a.fn,{tscore:function(a){return(a-this.mean())/(this.stdev(!0)/b.sqrt(this.cols()))},ttest:function(c,d){return 1===d?1-a.studentt.cdf(b.abs(this.tscore(c)),this.cols()-1):2*a.studentt.cdf(-b.abs(this.tscore(c)),this.cols()-1)}}),a.extend({anovafscore:function(){var d,e,f,g,h,i,j,k,l=c.call(arguments);if(1===l.length){for(h=new Array(l[0].length),j=0;j<l[0].length;j++)h[j]=l[0][j];l=h}if(2===l.length)return a.variance(l[0])/a.variance(l[1]);for(e=new Array,j=0;j<l.length;j++)e=e.concat(l[j]);for(f=a.mean(e),d=0,j=0;j<l.length;j++)d+=l[j].length*b.pow(a.mean(l[j])-f,2);for(d/=l.length-1,i=0,j=0;j<l.length;j++)for(g=a.mean(l[j]),k=0;k<l[j].length;k++)i+=b.pow(l[j][k]-g,2);return i/=e.length-l.length,d/i},anovaftest:function(){var b,e,f,g,h=c.call(arguments);if(d(h[0]))return 1-a.centralF.cdf(h[0],h[1],h[2]);for(anovafscore=a.anovafscore(h),b=h.length-1,f=0,g=0;g<h.length;g++)f+=h[g].length;return e=f-b-1,1-a.centralF.cdf(anovafscore,b,e)},ftest:function(b,c,d){return 1-a.centralF.cdf(b,c,d)}}),a.extend(a.fn,{anovafscore:function(){return a.anovafscore(this.toArray())},anovaftest:function(){var b,c=0;for(b=0;b<this.length;b++)c+=this[b].length;return a.ftest(this.anovafscore(),this.length-1,c-this.length)}}),a.extend({normalci:function(){var d,e=c.call(arguments),f=new Array(2);return d=4===e.length?b.abs(a.normal.inv(e[1]/2,0,1)*e[2]/b.sqrt(e[3])):b.abs(a.normal.inv(e[1]/2,0,1)*a.stdev(e[2])/b.sqrt(e[2].length)),f[0]=e[0]-d,f[1]=e[0]+d,f},tci:function(){var d,e=c.call(arguments),f=new Array(2);return d=4===e.length?b.abs(a.studentt.inv(e[1]/2,e[3]-1)*e[2]/b.sqrt(e[3])):b.abs(a.studentt.inv(e[1]/2,e[2].length)*a.stdev(e[2],!0)/b.sqrt(e[2].length)),f[0]=e[0]-d,f[1]=e[0]+d,f},significant:function(a,b){return b>a}}),a.extend(a.fn,{normalci:function(b,c){return a.normalci(b,c,this.toArray())},tci:function(b,c){return a.tci(b,c,this.toArray())}})}(this.jStat,Math);var subtle_grayscale=[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]}],blue_water=[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#46bcec"},{visibility:"on"}]}],shades_of_grey=[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}],pale_dawn=[{featureType:"administrative",elementType:"all",stylers:[{visibility:"on"},{lightness:33}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2e5d4"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#c5dac6"}]},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"on"},{lightness:20}]},{featureType:"road",elementType:"all",stylers:[{lightness:20}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#c5c6c6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#e4d7c6"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#fbfaf7"}]},{featureType:"water",elementType:"all",stylers:[{visibility:"on"},{color:"#acbcc9"}]}],apple_aaps_esque=[{featureType:"landscape.man_made",elementType:"geometry",stylers:[{color:"#f7f1df"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#d0e3b4"}]},{featureType:"landscape.natural.terrain",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.medical",elementType:"geometry",stylers:[{color:"#fbd3da"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#bde6ab"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffe15f"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efd151"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"black"}]},{featureType:"transit.station.airport",elementType:"geometry.fill",stylers:[{color:"#cfb2db"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#a2daf2"}]}],midnight_commander=[{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{color:"#000000"},{lightness:13}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#144b53"},{lightness:14},{weight:1.4}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#08304b"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#0c4152"},{lightness:5}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#0b434f"},{lightness:25}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#000000"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#0b3d51"},{lightness:16}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"transit",elementType:"all",stylers:[{color:"#146474"}]},{featureType:"water",elementType:"all",stylers:[{color:"#021019"}]}],blue_essence=[{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#e0efef"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{hue:"#1900ff"},{color:"#c0e8e8"}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"on"},{lightness:700}]},{featureType:"water",elementType:"all",stylers:[{color:"#7dcdcd"}]}],retro=[{featureType:"administrative",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"water",stylers:[{visibility:"simplified"}]},{featureType:"transit",stylers:[{visibility:"simplified"}]},{featureType:"landscape",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{visibility:"off"}]},{featureType:"road.local",stylers:[{visibility:"on"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"on"}]},{featureType:"water",stylers:[{color:"#84afa3"},{lightness:52}]},{stylers:[{saturation:-17},{gamma:.36}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#3f518c"}]}],paper=[{featureType:"administrative",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{visibility:"simplified"},{hue:"#0066ff"},{saturation:74},{lightness:100}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"off"},{weight:.6},{saturation:-85},{lightness:61}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"on"}]},{featureType:"road.arterial",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"water",elementType:"all",stylers:[{visibility:"simplified"},{color:"#5f94ff"},{lightness:26},{gamma:5.86}]}],avacado=[{featureType:"water",elementType:"geometry",stylers:[{visibility:"on"},{color:"#aee2e0"}]},{featureType:"landscape",elementType:"geometry.fill",
stylers:[{color:"#abce83"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#769E72"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#7B8758"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#EBF4A4"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#8dab68"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{visibility:"simplified"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#5B5B3F"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#ABCE83"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#A4C67D"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#9BBF72"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#EBF4A4"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{visibility:"on"},{color:"#87ae79"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#7f2200"},{visibility:"off"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"},{visibility:"on"},{weight:4.1}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#495421"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{visibility:"off"}]}],unimposed=[{featureType:"administrative",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{hue:"#727D82"},{lightness:-30},{saturation:-80}]},{featureType:"water",elementType:"all",stylers:[{visibility:"simplified"},{hue:"#F3F4F4"},{lightness:80},{saturation:-80}]}];if("undefined"!=typeof module&&"undefined"!=typeof exports){module.exports=OAuth;var CryptoJS=require("crypto-js")}OAuth.prototype.authorize=function(a,b){var c={oauth_consumer_key:this.consumer["public"],oauth_nonce:this.getNonce(),oauth_signature_method:this.signature_method,oauth_timestamp:this.getTimeStamp(),oauth_version:this.version};return b||(b={}),b["public"]&&(c.oauth_token=b["public"]),a.data||(a.data={}),c.oauth_signature=this.getSignature(a,b.secret,c),c},OAuth.prototype.getSignature=function(a,b,c){return this.hash(this.getBaseString(a,c),this.getSigningKey(b))},OAuth.prototype.getBaseString=function(a,b){return a.method.toUpperCase()+"&"+this.percentEncode(this.getBaseUrl(a.url))+"&"+this.percentEncode(this.getParameterString(a,b))},OAuth.prototype.getParameterString=function(a,b){var c=this.sortObject(this.percentEncodeData(this.mergeObject(b,this.mergeObject(a.data,this.deParamUrl(a.url))))),d="";for(var e in c)d+=e+"="+c[e]+"&";return d=d.substr(0,d.length-1)},OAuth.prototype.getSigningKey=function(a){return a=a||"",this.last_ampersand||a?this.percentEncode(this.consumer.secret)+"&"+this.percentEncode(a):this.percentEncode(this.consumer.secret)},OAuth.prototype.getBaseUrl=function(a){return a.split("?")[0]},OAuth.prototype.deParam=function(a){for(var b=decodeURIComponent(a).split("&"),c={},d=0;d<b.length;d++){var e=b[d].split("=");c[e[0]]=e[1]}return c},OAuth.prototype.deParamUrl=function(a){var b=a.split("?");return 1===b.length?{}:this.deParam(b[1])},OAuth.prototype.percentEncode=function(a){return encodeURIComponent(a).replace(/\!/g,"%21").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")},OAuth.prototype.percentEncodeData=function(a){var b={};for(var c in a)b[this.percentEncode(c)]=this.percentEncode(a[c]);return b},OAuth.prototype.toHeader=function(a){a=this.sortObject(a);var b="OAuth ";for(var c in a)-1!==c.indexOf("oauth_")&&(b+=this.percentEncode(c)+'="'+this.percentEncode(a[c])+'"'+this.parameter_seperator);return{Authorization:b.substr(0,b.length-this.parameter_seperator.length)}},OAuth.prototype.getNonce=function(){for(var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",b="",c=0;c<this.nonce_length;c++)b+=a[parseInt(Math.random()*a.length,10)];return b},OAuth.prototype.getTimeStamp=function(){return parseInt((new Date).getTime()/1e3,10)},OAuth.prototype.mergeObject=function(a,b){var c=a;for(var d in b)c[d]=b[d];return c},OAuth.prototype.sortObject=function(a){var b=Object.keys(a),c={};b.sort();for(var d=0;d<b.length;d++){var e=b[d];c[e]=a[e]}return c},angular.module("airedioApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("airedioApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.menu=[{title:"Home",link:"/"}],a.isCollapsed=!0,a.isActive=function(a){return a===b.path()}}]),angular.module("airedioApp").run(["$templateCache",function(a){a.put("app/mapmaker/main.html",'<style>body {\n  word-wrap:break-word;\n}\n#map {\n   /*z-index: -2;*/\n    display: block;\n    position:absolute;\n    height:auto;\n    bottom:0;\n    top:0;\n    left:0;\n    right:0;\n    /*margin-top:50px;  adjust top margin to your header height */\n\n    } \n\n\n#pac-input{\n\n  z-index: 3;\n  left: 200px !important;\n  top:25px;\n  width: 211px;\n  opacity: 0.6;\n  display: block;\n\n\n}\n\n#datadiv{\n color : black;\n\n}\n.my-modal {\n\n  position: absolute;\n  display: block;\n  bottom: 123px;\n  left: 453px;\n  width: 53%;\n\n}\n\n.ui-tabs.ui-tabs-vertical {\n    padding: 0;\n    width: 42em;\n}\n.ui-tabs.ui-tabs-vertical .ui-widget-header {\n    border: none;\n}\n.ui-tabs.ui-tabs-vertical .ui-tabs-nav {\n    float: left;\n    width: 10em;\n    background: #CCC;\n    border-radius: 4px 0 0 4px;\n    border-right: 1px solid gray;\n}\n.ui-tabs.ui-tabs-vertical .ui-tabs-nav li {\n    clear: left;\n    width: 100%;\n    margin: 0.2em 0;\n    border: 1px solid gray;\n    border-width: 1px 0 1px 1px;\n    border-radius: 4px 0 0 4px;\n    overflow: hidden;\n    position: relative;\n    right: -2px;\n    z-index: 2;\n}\n.ui-tabs.ui-tabs-vertical .ui-tabs-nav li a {\n    display: block;\n    width: 100%;\n    padding: 0.6em 1em;\n}\n.ui-tabs.ui-tabs-vertical .ui-tabs-nav li a:hover {\n    cursor: pointer;\n}\n.ui-tabs.ui-tabs-vertical .ui-tabs-nav li.ui-tabs-active {\n    margin-bottom: 0.2em;\n    padding-bottom: 0;\n    border-right: 1px solid white;\n}\n.ui-tabs.ui-tabs-vertical .ui-tabs-nav li:last-child {\n    margin-bottom: 10px;\n}\n.ui-tabs.ui-tabs-vertical .ui-tabs-panel {\n    float: left;\n    width: 28em;\n    border-left: 1px solid gray;\n    border-radius: 0;\n    position: relative;\n    left: -1px;\n}\n\n\n.close {\n  font-size: 40px !important;\n  font-weight: bold;\n  line-height: 18px;\n  color: #000000;\n  text-shadow: 0 1px 0 #ffffff;\n  opacity: 0.2;\n  filter: alpha(opacity=20);\n  text-decoration: none;\n}\n.close:hover {\n  color: #000000;\n  text-decoration: none;\n  opacity: 0.4;\n  filter: alpha(opacity=40);\n  cursor: pointer;\n}\n\n\n.help {\n  position: absolute;\n  right: 4px;\n  top: 4px;\n  font-size: 26px !important;\n  font-weight: bold;\n  line-height: 18px;\n  color: #000000;\n  text-shadow: 0 1px 0 #ffffff;\n  opacity: 0.2;\n  filter: alpha(opacity=20);\n  text-decoration: none;\n}\n.help:hover {\n  color: #000000;\n  text-decoration: none;\n  opacity: 0.4;\n  filter: alpha(opacity=40);\n  cursor: pointer;\n}\n\n\n.help-ex {\n  font-size: 26px !important;\n  font-weight: bold;\n  line-height: 18px;\n  color: #000000;\n  text-shadow: 0 1px 0 #ffffff;\n  opacity: 0.2;\n  filter: alpha(opacity=20);\n  text-decoration: none;\n}\n.help-ex:hover {\n  color: #000000;\n  text-decoration: none;\n  opacity: 0.4;\n  filter: alpha(opacity=40);\n  cursor: pointer;\n}\n\n.ui-tabs.ui-tabs-vertical .ui-tabs-nav{\n  height: 100%;\n}\n\n.nav .masthead-nav{\n	z-index: 10; \n}\n\n.mapim{\n    width: 320px;\n    height: auto;\n}\n\n.mybutt{\n  width: 326px;\n}\n\n.tabs-below > .nav-tabs,\n.tabs-right > .nav-tabs,\n.tabs-left > .nav-tabs {\n    border-bottom: 0;\n}\n\n.tab-content > .tab-pane,\n.pill-content > .pill-pane {\n    display: none;\n}\n\n.tab-content > .active,\n.pill-content > .active {\n    display: block;\n}\n\n.tabs-below > .nav-tabs {\n    border-top: 1px solid #ddd;\n}\n\n.tabs-below > .nav-tabs > li {\n    margin-top: -1px;\n    margin-bottom: 0;\n}\n\n.tabs-below > .nav-tabs > li > a {\n    -webkit-border-radius: 0 0 4px 4px;\n    -moz-border-radius: 0 0 4px 4px;\n    border-radius: 0 0 4px 4px;\n}\n\n.tabs-below > .nav-tabs > li > a:hover,\n.tabs-below > .nav-tabs > li > a:focus {\n    border-top-color: #ddd;\n    border-bottom-color: transparent;\n}\n\n.tabs-below > .nav-tabs > .active > a,\n.tabs-below > .nav-tabs > .active > a:hover,\n.tabs-below > .nav-tabs > .active > a:focus {\n    border-color: transparent #ddd #ddd #ddd;\n}\n\n.tabs-left > .nav-tabs > li,\n.tabs-right > .nav-tabs > li {\n    float: none;\n}\n\n.tabs-left > .nav-tabs > li > a,\n.tabs-right > .nav-tabs > li > a {\n    min-width: 74px;\n    margin-right: 0;\n    margin-bottom: 3px;\n}\n\n.tabs-left > .nav-tabs {\n    float: left;\n    margin-right: 19px;\n    border-right: 1px solid #ddd;\n}\n\n.tabs-left > .nav-tabs > li > a {\n    margin-right: -1px;\n    -webkit-border-radius: 4px 0 0 4px;\n    -moz-border-radius: 4px 0 0 4px;\n    border-radius: 4px 0 0 4px;\n}\n\n.tabs-left > .nav-tabs > li > a:hover,\n.tabs-left > .nav-tabs > li > a:focus {\n    border-color: #eeeeee #dddddd #eeeeee #eeeeee;\n}\n\n.tabs-left > .nav-tabs .active > a,\n.tabs-left > .nav-tabs .active > a:hover,\n.tabs-left > .nav-tabs .active > a:focus {\n    border-color: #ddd transparent #ddd #ddd;\n    *border-right-color: #ffffff;\n}\n\n.tabs-right > .nav-tabs {\n    float: right;\n    margin-left: 19px;\n    border-left: 1px solid #ddd;\n}\n\n.tabs-right > .nav-tabs > li > a {\n    margin-left: -1px;\n    -webkit-border-radius: 0 4px 4px 0;\n    -moz-border-radius: 0 4px 4px 0;\n    border-radius: 0 4px 4px 0;\n}\n\n.tabs-right > .nav-tabs > li > a:hover,\n.tabs-right > .nav-tabs > li > a:focus {\n    border-color: #eeeeee #eeeeee #eeeeee #dddddd;\n}\n\n.tabs-right > .nav-tabs .active > a,\n.tabs-right > .nav-tabs .active > a:hover,\n.tabs-right > .nav-tabs .active > a:focus {\n    border-color: #ddd #ddd #ddd transparent;\n    *border-left-color: #ffffff;\n}\n  .ui-tooltip {\n    max-width: 350px;\n  }\n\n.tab-div{\n\n  width: 293px;\n  height: 705px;\n  display: block;\n  z-index: 100;\n  position: relative;\n  left: 108px;\n  background-color: #e7e7e7;\n  text-align: center;\n}\n  .tabs-left{\n    z-index: 100;\n    top:200px;\n  }\n\n  #a,#b, #c,#d, #e, #f, #g, #h, #i {\n    position: absolute;\n    width: 293px;\n    height: 705px\n\n  }\n   \n .tickLabel{\ncolor: black;\n}\n#group_diff_hist{\n/*bottom: 23px !important;\nz-index: 9;*/\n/*fill: white;\nwidth: 454px;*/\nopacity: .9;\n/*height: 0px;\nposition: fixed;*/\n/*color: black;*/\n}\n\n#group_diff_plot{\n/*bottom: 24px !important;\nz-index: 9;\nwidth: 454px;\nheight: 0px;\nposition: fixed;*/\nopacity: .9;\n\n}\n\n.legendLabel {\n  font-size:11px; line-height:0px; \n}\n\n   #incoming-video {\n        /*background: url(\'/assets/quick_starts/video_placeholder.png\') no-repeat center;*/\n        /*background-color: #000;*/\n        /*background-size: contain;*/\n\n        background: #555;\n        height: 250px;\n        width: 100%;\n   \n      }\n\n\n\n      .mejs-controls {display: none !important;}\n\n      video{\n        height: 100%;\n        width: 100%;\n      }\n\n\n\n      #video-container {\n\n  width: 254px;\n  height: 191px;\n  bottom: 0px;\n  position: absolute;\n  right: 0px;\n\n      }</style><div ng-include="\'components/navbar/navbar.html\'"></div><div id=map></div><input id=pac-input placeholder="Search Box"><div id=tabs style="width : 0px"><tabset class=tabs-left close=""><tab heading="My Data"><div class=tab-div><div class=example-chat id=a><a ng-click=modals.myDataCall() class=help>?</a><h3>Data Sources</h3><p>Here you can access your data sources and we\'ve provide demo data sets.</p><div ng-click=changeData($index) ng-repeat="dat in datum" class="example-chat data-container"><header>{{dat.text}}</header><footer><h4>PUBLIC</h4><button name=button ng-click=closeAlert($index) class="btn btn-danger">Remove Stream</button></footer></div></div></div></tab><tab heading="Add Data"><div class=tab-div><div class=example-chat id=b><a ng-click=modals.addDataCall() class=help>?</a><h3>Add Data to Map</h3><p>Here you can get can send data from your arduino, rasberry pi, your browser, or any device that can send http requests.</p><p>Click to get api id to send real time data!</p><div class="example-chat newstream-container"><header>Add New Data</header><div><input ng-model=dataname placeholder="Enter A Name" class=form-control></div><button type=button class="btn btn-primary" ng-click=getCode(dataname)>Get ID!</button><h4 class=example-chat-messages>{{firecode}}</h4></div><div><h4>How to Use ID:</h4><p>Send a GET request to <strong>\'aired.io/api/things/{{firecode}}/lat/lng/data\'</strong> With some random data a call to the API might look this: \'aired.io/api/things/{{firecode}}/25.7933/80.2906/75F\'</p><p></p></div></div></div></tab><tab heading="Style Map"><div class=tab-div><div class=example-chat id=c><a ng-click=modals.styleDataCall() class=help>?</a><h3>Change Map Color Theme</h3><p>Hover to see map preview and description.</p><div class=btn-group-vertical role=group aria-label="Vertical button group" style="width: 175px"><button type=button class="btn btn-primary" id=subtle_grayscale ng-click=subtle_grayscale()>Grayscale</button> <button type=button class="btn btn-primary" ng-click=avacado() id=avacado>Green Lands</button> <button type=button class="btn btn-primary" ng-click=blue_water() id=blue_water>Blue Waters</button> <button type=button class="btn btn-primary" ng-click=shades_of_grey() id=shades_of_grey>Gray Shades</button> <button type=button class="btn btn-primary" ng-click=pale_dawn() id=pale_dawn>Pale Dawn</button> <button type=button class="btn btn-primary" ng-click=apple_aaps_esque() id=apple_aaps_esque>Roads Map</button> <button type=button class="btn btn-primary" ng-click=blue_essence() id=blue_essence>Bright Blues</button> <button type=button class="btn btn-primary" ng-click=retro() id=retro>Retro Map</button> <button type=button class="btn btn-primary" ng-click=paper() id=paper>Paper</button> <button type=button class="btn btn-primary" ng-click=unimposed() id=unimposed>Unimposed</button></div><h2>Change Data Colors</h2><div class=form-group ng-repeat="colors in map.colorScheme track by $index"><input minicolors=opacitysettings id=opacity class=form-control ng-model=map.colorScheme[$index]></div></div></div></tab><tab active=dataTab heading="Data Analysis"><div class=tab-div><div class=example-chat id=e><a ng-click=modals.dataAnalysisCall() class=help>?</a> <button type=button class="btn btn-primary" ng-model=singleModel ng-click=addRect(1) btn-checkbox btn-checkbox-true=1 btn-checkbox-false=0 style="width: 140px;\n    height: 50px;\n      white-space: normal;\n        margin-top: 5px">{{rectOffMess1}}</button> <button type=button class="btn btn-primary" ng-model=singleModel ng-click=addRect(2) btn-checkbox btn-checkbox-true=1 btn-checkbox-false=0 style="width: 140px;\n    height: 50px;\n      white-space: normal;\n        margin-top: 5px">{{rectOffMess2}}</button><p class=dataStats style="width: 140px">{{box1}}</p><p class=dataStats style="width: 140px;\n    left: 145px;\n    top: 50px;\n    position: absolute">{{box2}}</p><p>{{p_val}}</p><button type=button ng-show="p_val!= undefined && bayesbutt" class="btn btn-primary" ng-model=singleModel ng-click="runbayes(); select();" btn-checkbox btn-checkbox-true=1 btn-checkbox-false=0>Run Baysiain Analysis</button><div ng-show=!bayesbutt><div class=aired-container><div class=ball></div><div class=ball></div><div class=ball></div><div class=ball></div><div class=ball></div><div class=ball></div><div class=ball></div></div><progressbar animate=false value=percentDone><span style="color:black; white-space:nowrap">{{percentDone}}%</span></progressbar></div><div ng-show="showCharts == true" id=diff_plots_div><div id=group_diff_plot_wrapper_div class=sg-8><div class=item_title>Trace Plot - Difference of Means</div><div id=group_diff_plot style="height: 200px; bottom:0px"></div><div class=item_description>Should look like a "hairy caterpillar"...</div></div><div id=group_diff_hist_wrapper_div class=sg-11><div class=item_title>Distribution - Difference of Means</div><div id=group_diff_hist style="height: 200px; bottom: 0px"></div><div class=item_description>If the 95% Highest Density Interval does not include zero there is a credible difference!</div></div></div><div ng-show="rectOffMess1!=\'Remove\' && rectOffMess2!=\'Remove\'"><h3>Click one of the buttons above to add a interactive Data Box to the map and start looking at some statisics related to data inside the box!</h3></div><div ng-show="rectOffMess1!=\'Remove\' && rectOffMess2==\'Remove\' || rectOffMess1==\'Remove\' && rectOffMess2!=\'Remove\'"><h3>Feel free to move around and resize the data box to learn more about the data. Add another box for statisical comparisons.</h3></div><div ng-show="rectOffMess1==\'Remove\' && rectOffMess2==\'Remove\' && p_val== undefined"><h3>For statisical conparison tools to be active make sure there is data in boxes with n > 1</h3></div><div ng-show="rectOffMess1==\'Remove\' && rectOffMess2==\'Remove\' && p_val!= undefined && !showCharts"><h3>For large sample sizes about t-test should be usefull for smaller sample sizes click the above button for further analysis</h3></div></div></div></tab><tab heading=Collaborate><div class=tab-div><div class=example-chat id=f><a ng-click=modals.collaborateCall() class=help>?</a><div id=logged-in class="example-chat collab-container"><div id=call-container><div id=initialize-call ng-show="showCall && !showCallAE"><h3>Make a Call</h3><div class=form-group><label for=username-call>Enter Username</label><input name=username-call placeholder="Enter a User" id=username-call ng-model=kandyapi.calluser class="form-control"></div><button name=button ng-click=makecall() class="btn btn-success">Call</button></div><div ng-show=showCallAE id=call-status><h3></h3><p class=pull-left></p><button name=button ng-click=answerCall() class="btn btn-success pull-left" id=answer-call>Answer</button> <button name=button ng-click=rejectCall() class="btn btn-danger pull-right" id=end-call>Recject</button></div><div ng-show="!showCallAE && !showCall" id=call-status><button name=button ng-click=endCall() class="btn btn-danger" id=end-call>End Call</button></div></div></div><div class="example-chat collab-container"><h3>Link Map</h3><button ng-click="showair = true" class="control-form btn collab-btn">Air This Map</button> <button ng-click="showair = false" class="control-form btn collab-btn">Maps On Air</button><div ng-show=showair ng-model=selectedi class="example-chat data-container" style="width: 199px"><header>{{selectedi.text}}</header><p>Enter the email of the person that you would like to mirror your map to</p><div class=example-chat-toolbar><label for=nameInput>Email:</label><input ng-model=colabData.airedEmail id=nameInput></div><!-- <ul id=\'example-messages\' class="example-chat-messages"></ul> --><footer ng-click=shareDes()><h4>Click to Share</h4></footer></div><div ng-show=!showair ng-model=selectedi class="example-chat data-container" style="width: 199px"><header>{{selectedi.text}}</header><p>Here you can connect to a source sharing with you and mirror their screen. Just enter your email or sign in.</p><div class=example-chat-toolbar><label for=nameInput>Email:</label><input ng-model=colabData.matchEmail id=nameInput></div><footer ng-click=findAir()><h4>Connect to a Shared Map</h4></footer></div></div></div></div></tab><tab heading="My Account"><div class=tab-div><div class=example-chat id=g><a ng-click=modals.accountCall() class=help>?</a><div class=jumbotron ng-show=!loggedin><h2>Login</h2><div class="alert alert-danger" data-ng-repeat="error in errors">{{ error }}</div><div class=form-group><label>Email address</label><input type=email class=form-control placeholder="Enter email" ng-model=user.email></div><div class=form-group><label>Password</label><input type=password class=form-control placeholder=Password ng-model=user.password></div><button type=text class="btn btn-primary" data-ng-click=login()>Login</button><h2>Register</h2><div class="alert alert-danger" data-ng-repeat="error in errors">{{ error }}</div><div class=form-group><label>Email address</label><input type=email class=form-control placeholder="Enter email" ng-model=registerUser.email></div><div class=form-group><label>Password</label><input type=password class=form-control placeholder=Password ng-model=registerUser.password></div><div class=form-group><label>Password</label><input type=password class=form-control placeholder=Password ng-model=registerUser.confirmPassword></div><button type=text class="btn btn-success" data-ng-click=createUser()>Sign up</button></div><div ng-show=loggedin><p><button class="btn btn-default btn-sm" ng-click=logout()>Logout</button></p><h4>Export Data</h4><div ng-repeat="dat in datum track by $index" class="example-chat data-container"><header>{{dat.text}}</header><h3>Data Link</h3><p>aired.io/api/things/{{dat.code}}</p></div></div></div></div></tab></tabset></div><div id=welcome ng-show=modals.welcome class="my-modal example-chat main-page"><a ng-click=modals.welcomeCall() class=close>×</a><h1>Welcome to Aired.io</h1><h3><code>Aired.io</code> allows you to create open data maps from Arduino, Rasberry Pi, your own apps, or any device that can send http requests. We have added some example data sets for you to left. Use the dashboard to navigate and click the <a class=help-ex>?</a> in the right corner to learn about the current page.</h3><!-- ICONS CLOUDS--><div class=container-cloud><!-- First cloud --><svg version=1.1 class=svg-cloud01 viewbox="0 0 100 100" preserveaspectratio="xMinYMin meet"><g><path d="M642.02-364.11c-0.772,0-1.519,0.114-2.229,0.313c-0.17-6.744-5.679-12.162-12.464-12.162   c-4.368,0-8.201,2.251-10.428,5.65c-1.38-2.61-4.117-4.393-7.275-4.393c-2.621,0-4.95,1.229-6.456,3.139   c-2.865-6.496-9.357-11.031-16.913-11.031c-8.99,0-16.479,6.42-18.138,14.926c-0.937-0.248-1.911-0.393-2.925-0.393   c-6.312,0-11.427,5.116-11.427,11.427c0,0.907,0.117,1.787,0.317,2.634h95.921c0.146-0.609,0.229-1.243,0.229-1.896   C650.233-360.433,646.556-364.11,642.02-364.11z"></g><g><path d="M90.02,48.188c-0.771,0-1.518,0.113-2.229,0.312c-0.17-6.744-5.678-12.162-12.463-12.162   c-4.369,0-8.201,2.251-10.428,5.65c-1.381-2.61-4.117-4.393-7.275-4.393c-2.621,0-4.951,1.229-6.457,3.139   c-2.865-6.496-9.357-11.031-16.913-11.031c-8.99,0-16.479,6.42-18.138,14.926c-0.937-0.248-1.911-0.393-2.925-0.393   c-6.312,0-11.427,5.116-11.427,11.427c0,0.907,0.117,1.786,0.317,2.634h95.92c0.146-0.609,0.23-1.243,0.23-1.896   C98.234,51.863,94.557,48.188,90.02,48.188z"></g></svg><!-- Second cloud --> <svg version=1.1 class=svg-cloud02 viewbox="0 0 100 100" preserveaspectratio="xMinYMin meet"><g><path d="M642.02-364.11c-0.772,0-1.519,0.114-2.229,0.313c-0.17-6.744-5.679-12.162-12.464-12.162   c-4.368,0-8.201,2.251-10.428,5.65c-1.38-2.61-4.117-4.393-7.275-4.393c-2.621,0-4.95,1.229-6.456,3.139   c-2.865-6.496-9.357-11.031-16.913-11.031c-8.99,0-16.479,6.42-18.138,14.926c-0.937-0.248-1.911-0.393-2.925-0.393   c-6.312,0-11.427,5.116-11.427,11.427c0,0.907,0.117,1.787,0.317,2.634h95.921c0.146-0.609,0.229-1.243,0.229-1.896   C650.233-360.433,646.556-364.11,642.02-364.11z"></g><g><path d="M90.02,48.188c-0.771,0-1.518,0.113-2.229,0.312c-0.17-6.744-5.678-12.162-12.463-12.162   c-4.369,0-8.201,2.251-10.428,5.65c-1.381-2.61-4.117-4.393-7.275-4.393c-2.621,0-4.951,1.229-6.457,3.139   c-2.865-6.496-9.357-11.031-16.913-11.031c-8.99,0-16.479,6.42-18.138,14.926c-0.937-0.248-1.911-0.393-2.925-0.393   c-6.312,0-11.427,5.116-11.427,11.427c0,0.907,0.117,1.786,0.317,2.634h95.92c0.146-0.609,0.23-1.243,0.23-1.896   C98.234,51.863,94.557,48.188,90.02,48.188z"></g></svg></div></div><div id=welcome ng-show=modals.myData class="my-modal example-chat main-page"><a ng-click=modals.myDataCall() class=close>×</a><h1>My Data Tab</h1><h3>Here you can select a currently streaming data source. Upon clicking that geo data will appear on the map. These data sources can be shared with freind, colleagues for the world. You can also remove the stream with deletes the data from our database forever.</h3></div><div id=welcome ng-show=modals.addData class="my-modal example-chat main-page"><a ng-click=modals.addDataCall() class=close>×</a><h1>Adding Data</h1><h3>To create a new data stream you have to click to get a new personal data id. Once you have the ID you can use it to receive data from Arduinos, Rasberry Pi, other micro controlers or even your browser by sending GET requests to your data url. Below we have some examples in popular programming languages:</h3></div><div id=welcome ng-show=modals.styleData class="my-modal example-chat main-page"><a ng-click=modals.styleDataCall() class=close>×</a><h1>Styling data</h1><h3>Add some creativity to your map. You can change the colors of the data points and the design of the map. You can also collaborate with friends or colleagues to create maps together.</h3></div><div id=welcome ng-show=modals.dataAnalysis class="my-modal example-chat main-page"><a ng-click=modals.dataAnalysisCall() class=close>×</a><h1>Data analysis</h1><h3>This tool allows you to run some pretty sophisticated analysis on whatever geocentric data you have. When you add a data box to the map it will instantly start calculating the mean and standard deviation of the data inside the box. Once you put too eight of boxes on my you can run statistical comparison to see if there\'s a significant difference in one region versus another. We provide two to accomplish this your basic statistical t-test and babies into Monte Carlo Markov chain sampling which is really useful when comparing areas with smaller data points. It\'s also very cool.</h3></div><div id=welcome ng-show=modals.collaborate class="my-modal example-chat main-page"><a ng-click=modals.collaborateCall() class=close>×</a><h1>Collaborate</h1><h3>You can make video calls through Kandy just enter the email address of the person you want to call. This feature is limited to Kandy users only.</h3><h3>you can also share this map with with someone in an interactive way allowing you to do data analysis and data styling together. Both screens will mimic each other. Just enter the email of the person you want to allow to see your map and mimic its behavior.</h3></div><div id=welcome ng-show=modals.account class="my-modal example-chat main-page"><a ng-click=modals.accountCall() class=close>×</a><h1>My Acoount</h1><h3>If you signed up for an account you will be able to upload your own data sets and have them be saved to your account information. You also need to have an account to collaborate with other users and share your maps</h3></div><div ng-show="!showCallAE && !showCall" id=video-container><video ng-src={{trustSrc(src)}} autoplay></video></div>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand>airedio</a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li></ul></div></div></div>')}]);